<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Dependency utilities | Outstanding User Interfaces with Shiny</title>
  <meta name="description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Dependency utilities | Outstanding User Interfaces with Shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Dependency utilities | Outstanding User Interfaces with Shiny" />
  
  <meta name="twitter:description" content="This book will serve as content for the 2020 erum workshop." />
  

<meta name="author" content="David Granjon" />


<meta name="date" content="2020-04-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="htmltools-overview.html"/>
<link rel="next" href="htmltools-other-tools.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Outstanding User Interfaces with Shiny</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#is-this-book-for-me"><i class="fa fa-check"></i>Is this book for me?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#related-content"><i class="fa fa-check"></i>Related content</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="part"><span><b>Survival Kit</b></span></li>
<li class="chapter" data-level="2" data-path="survival-kit-html.html"><a href="survival-kit-html.html"><i class="fa fa-check"></i><b>2</b> HTML</a></li>
<li class="chapter" data-level="3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html"><i class="fa fa-check"></i><b>3</b> JavaScript</a></li>
<li class="chapter" data-level="4" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html"><i class="fa fa-check"></i><b>4</b> Shiny</a></li>
<li class="part"><span><b>htmltools</b></span></li>
<li class="chapter" data-level="5" data-path="htmltools-overview.html"><a href="htmltools-overview.html"><i class="fa fa-check"></i><b>5</b> htmltools overview</a><ul>
<li class="chapter" data-level="5.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#html-tags"><i class="fa fa-check"></i><b>5.1</b> HTML Tags</a></li>
<li class="chapter" data-level="5.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#notations"><i class="fa fa-check"></i><b>5.2</b> Notations</a></li>
<li class="chapter" data-level="5.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#adding-new-tags"><i class="fa fa-check"></i><b>5.3</b> Adding new tags</a></li>
<li class="chapter" data-level="5.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#alternative-way-to-write-tags"><i class="fa fa-check"></i><b>5.4</b> Alternative way to write tags</a></li>
<li class="chapter" data-level="5.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#playing-with-tags"><i class="fa fa-check"></i><b>5.5</b> Playing with tags</a><ul>
<li class="chapter" data-level="5.5.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#tags-structure"><i class="fa fa-check"></i><b>5.5.1</b> Tags structure</a></li>
<li class="chapter" data-level="5.5.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#useful-functions-for-tags"><i class="fa fa-check"></i><b>5.5.2</b> Useful functions for tags</a></li>
<li class="chapter" data-level="5.5.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#other-interesting-functions"><i class="fa fa-check"></i><b>5.5.3</b> Other interesting functions</a></li>
<li class="chapter" data-level="5.5.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#conditionally-set-attributes"><i class="fa fa-check"></i><b>5.5.4</b> Conditionally set attributes</a></li>
<li class="chapter" data-level="5.5.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#using"><i class="fa fa-check"></i><b>5.5.5</b> Using %&gt;%</a></li>
<li class="chapter" data-level="5.5.6" data-path="htmltools-overview.html"><a href="htmltools-overview.html#programmatically-create-children-elements"><i class="fa fa-check"></i><b>5.5.6</b> Programmatically create children elements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html"><i class="fa fa-check"></i><b>6</b> Dependency utilities</a><ul>
<li class="chapter" data-level="6.1" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-dirty-approach"><i class="fa fa-check"></i><b>6.1</b> The dirty approach</a></li>
<li class="chapter" data-level="6.2" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-clean-approach"><i class="fa fa-check"></i><b>6.2</b> The clean approach</a></li>
<li class="chapter" data-level="6.3" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#another-example-importing-html-dependencies-from-other-packages"><i class="fa fa-check"></i><b>6.3</b> Another example: Importing HTML dependencies from other packages</a></li>
<li class="chapter" data-level="6.4" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#suppress-dependencies"><i class="fa fa-check"></i><b>6.4</b> Suppress dependencies</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html"><i class="fa fa-check"></i><b>7</b> Other tools</a><ul>
<li class="chapter" data-level="7.1" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html#css"><i class="fa fa-check"></i><b>7.1</b> CSS</a></li>
</ul></li>
<li class="part"><span><b>Practice</b></span></li>
<li class="chapter" data-level="8" data-path="custom-templates-selection.html"><a href="custom-templates-selection.html"><i class="fa fa-check"></i><b>8</b> Template selection</a></li>
<li class="chapter" data-level="9" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html"><i class="fa fa-check"></i><b>9</b> Define dependencies</a></li>
<li class="chapter" data-level="10" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html"><i class="fa fa-check"></i><b>10</b> Template skeleton</a></li>
<li class="chapter" data-level="11" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html"><i class="fa fa-check"></i><b>11</b> Develop custom input widgets</a><ul>
<li class="chapter" data-level="11.1" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#how-does-shiny-handle-inputs"><i class="fa fa-check"></i><b>11.1</b> How does Shiny handle inputs?</a></li>
<li class="chapter" data-level="11.2" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#how-to-add-new-input-to-shiny"><i class="fa fa-check"></i><b>11.2</b> How to add new input to Shiny?</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html"><i class="fa fa-check"></i><b>12</b> Testing templates elements</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Outstanding User Interfaces with Shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="htmltools-dependencies" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Dependency utilities</h1>
<p>When creating a new template, you sometimes need to import custom HTML dependencies
that do not come along with shiny. No problem, htmltools is here for you (shiny also
contains these functions).</p>
<div id="the-dirty-approach" class="section level2">
<h2><span class="header-section-number">6.1</span> The dirty approach</h2>
<p>Let’s consider the following example. I want to include a bootstrap 4 card in a shiny app.
This example is taken from an interesting question <a href="https://community.rstudio.com/t/create-a-div-using-htmltools-withtags/22439/2">here</a>.
The naive approach would be to include the HTML code directly in the app code</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="co"># we create the card function before</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2">my_card &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">  <span class="kw">withTags</span>(</a>
<a class="sourceLine" id="cb34-4" data-line-number="4">    <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb34-5" data-line-number="5">      <span class="dt">class =</span> <span class="st">&quot;card border-success mb-3&quot;</span>,</a>
<a class="sourceLine" id="cb34-6" data-line-number="6">      <span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;card-header bg-transparent border-success&quot;</span>),</a>
<a class="sourceLine" id="cb34-7" data-line-number="7">      <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb34-8" data-line-number="8">        <span class="dt">class =</span> <span class="st">&quot;card-body text-success&quot;</span>,</a>
<a class="sourceLine" id="cb34-9" data-line-number="9">        <span class="kw">h3</span>(<span class="dt">class =</span> <span class="st">&quot;card-title&quot;</span>, <span class="st">&quot;title&quot;</span>),</a>
<a class="sourceLine" id="cb34-10" data-line-number="10">        <span class="kw">p</span>(<span class="dt">class =</span> <span class="st">&quot;card-text&quot;</span>, ...)</a>
<a class="sourceLine" id="cb34-11" data-line-number="11">      ),</a>
<a class="sourceLine" id="cb34-12" data-line-number="12">      <span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;card-footer bg-transparent border-success&quot;</span>, <span class="st">&quot;footer&quot;</span>)</a>
<a class="sourceLine" id="cb34-13" data-line-number="13">    )</a>
<a class="sourceLine" id="cb34-14" data-line-number="14">  )</a>
<a class="sourceLine" id="cb34-15" data-line-number="15">}</a>
<a class="sourceLine" id="cb34-16" data-line-number="16"></a>
<a class="sourceLine" id="cb34-17" data-line-number="17"><span class="co"># we build our app</span></a>
<a class="sourceLine" id="cb34-18" data-line-number="18"><span class="kw">shinyApp</span>(</a>
<a class="sourceLine" id="cb34-19" data-line-number="19">  <span class="dt">ui =</span> <span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb34-20" data-line-number="20">    <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb34-21" data-line-number="21">      <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb34-22" data-line-number="22">        <span class="dt">width =</span> <span class="dv">6</span>,</a>
<a class="sourceLine" id="cb34-23" data-line-number="23">        <span class="dt">align =</span> <span class="st">&quot;center&quot;</span>,</a>
<a class="sourceLine" id="cb34-24" data-line-number="24">        <span class="kw">br</span>(),</a>
<a class="sourceLine" id="cb34-25" data-line-number="25">        <span class="kw">my_card</span>(<span class="st">&quot;blablabla. PouetPouet Pouet.&quot;</span>)</a>
<a class="sourceLine" id="cb34-26" data-line-number="26">      )</a>
<a class="sourceLine" id="cb34-27" data-line-number="27">    )</a>
<a class="sourceLine" id="cb34-28" data-line-number="28">  ),</a>
<a class="sourceLine" id="cb34-29" data-line-number="29">  <span class="dt">server =</span> <span class="cf">function</span>(input, output) {}</a>
<a class="sourceLine" id="cb34-30" data-line-number="30">)</a></code></pre></div>
<p>and desesperately see that nothing is displayed. If you remember, this was expected since
shiny does not contain bootstrap 4 dependencies and this card is unfortunately a
bootstrap 4 object. Don’t panic! We just need to tell shiny to load the css we need to display
this card (if required, we could include the javascript as well). We could use either
<code>includeCSS()</code>, <code>tags$head(tags$link(rel = &quot;stylesheet&quot;, type = &quot;text/css&quot;, href = &quot;custom.css&quot;))</code>. See
more <a href="https://shiny.rstudio.com/articles/css.html">here</a>.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="kw">shinyApp</span>(</a>
<a class="sourceLine" id="cb35-2" data-line-number="2">  <span class="dt">ui =</span> <span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb35-3" data-line-number="3">    <span class="co"># load the css code</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4">    <span class="kw">includeCSS</span>(<span class="dt">path =</span> <span class="st">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css&quot;</span>),</a>
<a class="sourceLine" id="cb35-5" data-line-number="5">    <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb35-6" data-line-number="6">      <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb35-7" data-line-number="7">        <span class="dt">width =</span> <span class="dv">6</span>,</a>
<a class="sourceLine" id="cb35-8" data-line-number="8">        <span class="dt">align =</span> <span class="st">&quot;center&quot;</span>,</a>
<a class="sourceLine" id="cb35-9" data-line-number="9">        <span class="kw">br</span>(),</a>
<a class="sourceLine" id="cb35-10" data-line-number="10">        <span class="kw">my_card</span>(<span class="st">&quot;blablabla. PouetPouet Pouet.&quot;</span>)</a>
<a class="sourceLine" id="cb35-11" data-line-number="11">      )</a>
<a class="sourceLine" id="cb35-12" data-line-number="12">    )</a>
<a class="sourceLine" id="cb35-13" data-line-number="13">  ),</a>
<a class="sourceLine" id="cb35-14" data-line-number="14">  <span class="dt">server =</span> <span class="cf">function</span>(input, output) {}</a>
<a class="sourceLine" id="cb35-15" data-line-number="15">)</a></code></pre></div>
<p>The card is ugly (which is another problem we will fix later) but at least displayed.</p>
<p>When I say this approach is dirty, it is because it will not be easily re-usable by others.
Instead, we prefer a packaging approach, like in the next section.</p>
</div>
<div id="the-clean-approach" class="section level2">
<h2><span class="header-section-number">6.2</span> The clean approach</h2>
<p>We will use the <code>htmlDependency</code> and <code>attachDependencies</code> functions from htmltools.
The htmlDependency takes several arguments:</p>
<ul>
<li>the name of your dependency</li>
<li>the version (useful to remember on which version it is built upon)</li>
<li>a path to the dependency (can be a CDN or a local folder)</li>
<li>script and stylesheet to respectively pass css and scripts</li>
</ul>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="co"># handle dependency</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2">card_css &lt;-<span class="st"> &quot;bootstrap.min.css&quot;</span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3">bs4_card_dep &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb36-4" data-line-number="4">  <span class="kw">htmlDependency</span>(</a>
<a class="sourceLine" id="cb36-5" data-line-number="5">    <span class="dt">name =</span> <span class="st">&quot;bs4_card&quot;</span>,</a>
<a class="sourceLine" id="cb36-6" data-line-number="6">    <span class="dt">version =</span> <span class="st">&quot;1.0&quot;</span>,</a>
<a class="sourceLine" id="cb36-7" data-line-number="7">    <span class="dt">src =</span> <span class="kw">c</span>(<span class="dt">href =</span> <span class="st">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/&quot;</span>),</a>
<a class="sourceLine" id="cb36-8" data-line-number="8">    <span class="dt">stylesheet =</span> card_css</a>
<a class="sourceLine" id="cb36-9" data-line-number="9">  )</a>
<a class="sourceLine" id="cb36-10" data-line-number="10">}</a></code></pre></div>
<p>We create the card tag and give it the bootstrap 4 dependency through the <code>attachDependencies()</code> function. In recent version of htmltools, we may simply use
<code>tagList(tag, deps)</code> instead.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="co"># create the card</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2">my_card &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</a>
<a class="sourceLine" id="cb37-3" data-line-number="3">  cardTag &lt;-<span class="st"> </span><span class="kw">withTags</span>(</a>
<a class="sourceLine" id="cb37-4" data-line-number="4">    <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb37-5" data-line-number="5">      <span class="dt">class =</span> <span class="st">&quot;card border-success mb-3&quot;</span>,</a>
<a class="sourceLine" id="cb37-6" data-line-number="6">      <span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;card-header bg-transparent border-success&quot;</span>),</a>
<a class="sourceLine" id="cb37-7" data-line-number="7">      <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb37-8" data-line-number="8">        <span class="dt">class =</span> <span class="st">&quot;card-body text-success&quot;</span>,</a>
<a class="sourceLine" id="cb37-9" data-line-number="9">        <span class="kw">h3</span>(<span class="dt">class =</span> <span class="st">&quot;card-title&quot;</span>, <span class="st">&quot;title&quot;</span>),</a>
<a class="sourceLine" id="cb37-10" data-line-number="10">        <span class="kw">p</span>(<span class="dt">class =</span> <span class="st">&quot;card-text&quot;</span>, ...)</a>
<a class="sourceLine" id="cb37-11" data-line-number="11">      ),</a>
<a class="sourceLine" id="cb37-12" data-line-number="12">      <span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;card-footer bg-transparent border-success&quot;</span>, <span class="st">&quot;footer&quot;</span>)</a>
<a class="sourceLine" id="cb37-13" data-line-number="13">    )</a>
<a class="sourceLine" id="cb37-14" data-line-number="14">  )</a>
<a class="sourceLine" id="cb37-15" data-line-number="15">  </a>
<a class="sourceLine" id="cb37-16" data-line-number="16">  <span class="co"># attach dependencies (old way)</span></a>
<a class="sourceLine" id="cb37-17" data-line-number="17">  <span class="co"># htmltools::attachDependencies(cardTag, bs4_card_dep())</span></a>
<a class="sourceLine" id="cb37-18" data-line-number="18">  </a>
<a class="sourceLine" id="cb37-19" data-line-number="19">  <span class="co"># simpler way</span></a>
<a class="sourceLine" id="cb37-20" data-line-number="20">  <span class="kw">tagList</span>(cardTag, <span class="kw">bs4_card_dep</span>())</a>
<a class="sourceLine" id="cb37-21" data-line-number="21">  </a>
<a class="sourceLine" id="cb37-22" data-line-number="22">}</a></code></pre></div>
<p>We finally run our app:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="co"># run shiny app </span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb38-3" data-line-number="3">  <span class="dt">title =</span> <span class="st">&quot;Hello Shiny!&quot;</span>,</a>
<a class="sourceLine" id="cb38-4" data-line-number="4">  <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb38-5" data-line-number="5">    <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb38-6" data-line-number="6">      <span class="dt">width =</span> <span class="dv">6</span>,</a>
<a class="sourceLine" id="cb38-7" data-line-number="7">      <span class="dt">align =</span> <span class="st">&quot;center&quot;</span>,</a>
<a class="sourceLine" id="cb38-8" data-line-number="8">      <span class="kw">br</span>(),</a>
<a class="sourceLine" id="cb38-9" data-line-number="9">      <span class="kw">my_card</span>(<span class="st">&quot;blablabla. PouetPouet Pouet.&quot;</span>)</a>
<a class="sourceLine" id="cb38-10" data-line-number="10">    )</a>
<a class="sourceLine" id="cb38-11" data-line-number="11">  )</a>
<a class="sourceLine" id="cb38-12" data-line-number="12">)</a>
<a class="sourceLine" id="cb38-13" data-line-number="13"></a>
<a class="sourceLine" id="cb38-14" data-line-number="14"><span class="kw">shinyApp</span>(ui, <span class="dt">server =</span> <span class="cf">function</span>(input, output) { })</a></code></pre></div>
<p>With this approach, you could develop a package of custom dependencies that people
could use when they need to add custom elements in shiny.</p>
</div>
<div id="another-example-importing-html-dependencies-from-other-packages" class="section level2">
<h2><span class="header-section-number">6.3</span> Another example: Importing HTML dependencies from other packages</h2>
<p>You may know shinydashboard, a package to design dashboards with shiny. In the following, we would like to integrate the box component in a classic Shiny App (without the dashboard layout). However, if you try to include the Shinydashboard box tag, you will notice that nothing is displayed since Shiny does not have shinydashboard dependencies. Fortunately htmltools contains a function, namely <code>findDependencies</code> that looks for all dependencies attached to a tag. How about extracting shinydashboard dependencies? Before going futher, let’s define the basic skeleton of a shinydashboard:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="kw">shinyApp</span>(</a>
<a class="sourceLine" id="cb39-2" data-line-number="2">  <span class="dt">ui =</span> <span class="kw">dashboardPage</span>(</a>
<a class="sourceLine" id="cb39-3" data-line-number="3">    <span class="kw">dashboardHeader</span>(),</a>
<a class="sourceLine" id="cb39-4" data-line-number="4">    <span class="kw">dashboardSidebar</span>(),</a>
<a class="sourceLine" id="cb39-5" data-line-number="5">    <span class="kw">dashboardBody</span>(),</a>
<a class="sourceLine" id="cb39-6" data-line-number="6">    <span class="dt">title =</span> <span class="st">&quot;Dashboard example&quot;</span></a>
<a class="sourceLine" id="cb39-7" data-line-number="7">  ),</a>
<a class="sourceLine" id="cb39-8" data-line-number="8">  <span class="dt">server =</span> <span class="cf">function</span>(input, output) { }</a>
<a class="sourceLine" id="cb39-9" data-line-number="9">)</a></code></pre></div>
<p>We don’t need to understand shinydashboard details. However, if you are interested to dig in, <a href="https://rstudio.github.io/shinydashboard/">help yourself</a>. What is important here is the main
wrapper function <code>dashboardPage</code>. (You should already be familiar with <code>fluidPage</code>, another wrapper function). We apply <code>findDependencies</code> on <code>dashboardPage</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">deps &lt;-<span class="st"> </span><span class="kw">findDependencies</span>(</a>
<a class="sourceLine" id="cb40-2" data-line-number="2">  <span class="kw">dashboardPage</span>(</a>
<a class="sourceLine" id="cb40-3" data-line-number="3">    <span class="dt">header =</span> <span class="kw">dashboardHeader</span>(), </a>
<a class="sourceLine" id="cb40-4" data-line-number="4">    <span class="dt">sidebar =</span> <span class="kw">dashboardSidebar</span>(), </a>
<a class="sourceLine" id="cb40-5" data-line-number="5">    <span class="dt">body =</span> <span class="kw">dashboardBody</span>()</a>
<a class="sourceLine" id="cb40-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb40-7" data-line-number="7">)</a>
<a class="sourceLine" id="cb40-8" data-line-number="8">deps</a></code></pre></div>
<p>deps is a list containg 4 dependencies:</p>
<ul>
<li><a href="https://fontawesome.com">Font Awesome</a> handles icons</li>
<li><a href="https://getbootstrap.com/docs/3.3/">Bootstrap</a> is the main HTML/CSS/JS template. Importantly,
please note the version 3.3.7, whereas the current is 4.3.1</li>
<li><a href="https://adminlte.io">AdminLTE</a> is the dependency containg HTML/CSS/JS related to the admin template.
It is closely linked to Bootstrap 3.</li>
<li>shinydashboard, the CSS and javascript necessary for shinydashboard to work properly. In practice,
integrating custom HTML templates to shiny does not usually work out of the box for many reasons (Explain why!) and some modifications are necessary.</li>
</ul>
<pre><code>[[1]]
List of 10
$ name      : chr &quot;font-awesome&quot;
$ version   : chr &quot;5.3.1&quot;
$ src       :List of 1
..$ file: chr &quot;www/shared/fontawesome&quot;
$ meta      : NULL
$ script    : NULL
$ stylesheet: chr [1:2] &quot;css/all.min.css&quot; &quot;css/v4-shims.min.css&quot;
$ head      : NULL
$ attachment: NULL
$ package   : chr &quot;shiny&quot;
$ all_files : logi TRUE
- attr(*, &quot;class&quot;)= chr &quot;html_dependency&quot;
[[2]]
List of 10
$ name      : chr &quot;bootstrap&quot;
$ version   : chr &quot;3.3.7&quot;
$ src       :List of 2
..$ href: chr &quot;shared/bootstrap&quot;
..$ file: chr &quot;/Library/Frameworks/R.framework/Versions/3.5/Resources/library/shiny/www/shared/bootstrap&quot;
$ meta      :List of 1
..$ viewport: chr &quot;width=device-width, initial-scale=1&quot;
$ script    : chr [1:3] &quot;js/bootstrap.min.js&quot; &quot;shim/html5shiv.min.js&quot; &quot;shim/respond.min.js&quot;
$ stylesheet: chr &quot;css/bootstrap.min.css&quot;
$ head      : NULL
$ attachment: NULL
$ package   : NULL
$ all_files : logi TRUE
- attr(*, &quot;class&quot;)= chr &quot;html_dependency&quot;
[[3]]
List of 10
$ name      : chr &quot;AdminLTE&quot;
$ version   : chr &quot;2.0.6&quot;
$ src       :List of 1
..$ file: chr &quot;/Library/Frameworks/R.framework/Versions/3.5/Resources/library/shinydashboard/AdminLTE&quot;
$ meta      : NULL
$ script    : chr &quot;app.min.js&quot;
$ stylesheet: chr [1:2] &quot;AdminLTE.min.css&quot; &quot;_all-skins.min.css&quot;
$ head      : NULL
$ attachment: NULL
$ package   : NULL
$ all_files : logi TRUE
- attr(*, &quot;class&quot;)= chr &quot;html_dependency&quot;
[[4]]
List of 10
$ name      : chr &quot;shinydashboard&quot;
$ version   : chr &quot;0.7.1&quot;
$ src       :List of 1
..$ file: chr &quot;/Library/Frameworks/R.framework/Versions/3.5/Resources/library/shinydashboard&quot;
$ meta      : NULL
$ script    : chr &quot;shinydashboard.min.js&quot;
$ stylesheet: chr &quot;shinydashboard.css&quot;
$ head      : NULL
$ attachment: NULL
$ package   : NULL
$ all_files : logi TRUE
- attr(*, &quot;class&quot;)= chr &quot;html_dependency&quot;</code></pre>
<p>Below, we attach the dependencies to the <code>box</code> with <code>tagList</code>, as shown above. Notice that our custom <code>box</code> does not contain all parameters from shinydashboard but this is not what matters in this example.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">my_box &lt;-<span class="st"> </span><span class="cf">function</span>(title, status) {</a>
<a class="sourceLine" id="cb42-2" data-line-number="2">  <span class="kw">tagList</span>(<span class="kw">box</span>(<span class="dt">title =</span> title, <span class="dt">status =</span> status), deps)</a>
<a class="sourceLine" id="cb42-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb42-4" data-line-number="4">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb42-5" data-line-number="5">  <span class="kw">titlePanel</span>(<span class="st">&quot;Shiny with a box&quot;</span>),</a>
<a class="sourceLine" id="cb42-6" data-line-number="6">  <span class="kw">my_box</span>(<span class="dt">title =</span> <span class="st">&quot;My box&quot;</span>, <span class="dt">status =</span> <span class="st">&quot;danger&quot;</span>),</a>
<a class="sourceLine" id="cb42-7" data-line-number="7">)</a>
<a class="sourceLine" id="cb42-8" data-line-number="8">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {}</a>
<a class="sourceLine" id="cb42-9" data-line-number="9"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p>Now, you may imagine the possibilities are almost unlimited!</p>
</div>
<div id="suppress-dependencies" class="section level2">
<h2><span class="header-section-number">6.4</span> Suppress dependencies</h2>
<p>In rare cases, you may need to remove an existing dependency (conflict). The <code>suppressDependencies</code> function allows to perform that task. For instance, <a href="https://github.com/Appsilon/shiny.semantic">shiny.semantic</a> built on top of
semantic ui is not compatible with Bootstrap. Below, we remove the AdminLTE dependency
from a shinydashboard page and nothing is displayed (as expected):</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="kw">shinyApp</span>(</a>
<a class="sourceLine" id="cb43-2" data-line-number="2">  <span class="dt">ui =</span> <span class="kw">dashboardPage</span>(</a>
<a class="sourceLine" id="cb43-3" data-line-number="3">    <span class="kw">dashboardHeader</span>(),</a>
<a class="sourceLine" id="cb43-4" data-line-number="4">    <span class="kw">dashboardSidebar</span>(),</a>
<a class="sourceLine" id="cb43-5" data-line-number="5">    <span class="kw">dashboardBody</span>(<span class="kw">suppressDependencies</span>(<span class="st">&quot;AdminLTE&quot;</span>)),</a>
<a class="sourceLine" id="cb43-6" data-line-number="6">    <span class="dt">title =</span> <span class="st">&quot;Dashboard example&quot;</span></a>
<a class="sourceLine" id="cb43-7" data-line-number="7">  ),</a>
<a class="sourceLine" id="cb43-8" data-line-number="8">  <span class="dt">server =</span> <span class="cf">function</span>(input, output) { }</a>
<a class="sourceLine" id="cb43-9" data-line-number="9">)</a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="htmltools-overview.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="htmltools-other-tools.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/htmltools-dependencies.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
