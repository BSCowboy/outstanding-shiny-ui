<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Develop custom input widgets | Outstanding User Interfaces with Shiny</title>
  <meta name="description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Develop custom input widgets | Outstanding User Interfaces with Shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Develop custom input widgets | Outstanding User Interfaces with Shiny" />
  
  <meta name="twitter:description" content="This book will serve as content for the 2020 erum workshop." />
  

<meta name="author" content="David Granjon" />


<meta name="date" content="2020-05-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="custom-templates-skeleton.html"/>
<link rel="next" href="custom-templates-interactivity.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Outstanding User Interfaces with Shiny</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#is-this-book-for-me"><i class="fa fa-check"></i>Is this book for me?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#related-content"><i class="fa fa-check"></i>Related content</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="part"><span><b>Survival Kit</b></span></li>
<li class="chapter" data-level="2" data-path="survival-kit-html.html"><a href="survival-kit-html.html"><i class="fa fa-check"></i><b>2</b> HTML</a><ul>
<li class="chapter" data-level="2.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-basics"><i class="fa fa-check"></i><b>2.1</b> HTML Basics</a></li>
<li class="chapter" data-level="2.2" data-path="survival-kit-html.html"><a href="survival-kit-html.html#tag-attributes"><i class="fa fa-check"></i><b>2.2</b> Tag attributes</a></li>
<li class="chapter" data-level="2.3" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-page-skeleton"><i class="fa fa-check"></i><b>2.3</b> HTML page: skeleton</a></li>
<li class="chapter" data-level="2.4" data-path="survival-kit-html.html"><a href="survival-kit-html.html#about-the-document-object-model-dom"><i class="fa fa-check"></i><b>2.4</b> About the Document Object Model (DOM)</a><ul>
<li class="chapter" data-level="2.4.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#visualizing-the-dom-the-html-inspector"><i class="fa fa-check"></i><b>2.4.1</b> Visualizing the DOM: the HTML inspector</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="survival-kit-html.html"><a href="survival-kit-html.html#preliminary-introduction-to-css-and-javascript"><i class="fa fa-check"></i><b>2.5</b> Preliminary introduction to CSS and JavaScript</a><ul>
<li class="chapter" data-level="2.5.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-and-css"><i class="fa fa-check"></i><b>2.5.1</b> HTML and CSS</a></li>
<li class="chapter" data-level="2.5.2" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-and-javascript"><i class="fa fa-check"></i><b>2.5.2</b> HTML and JavaScript</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html"><i class="fa fa-check"></i><b>3</b> JavaScript</a><ul>
<li class="chapter" data-level="3.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#setup"><i class="fa fa-check"></i><b>3.2</b> Setup</a><ul>
<li class="chapter" data-level="3.2.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#node"><i class="fa fa-check"></i><b>3.2.1</b> Node</a></li>
<li class="chapter" data-level="3.2.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#choose-a-good-ide"><i class="fa fa-check"></i><b>3.2.2</b> Choose a good IDE</a></li>
<li class="chapter" data-level="3.2.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#first-script"><i class="fa fa-check"></i><b>3.2.3</b> First Script</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#programming-with-js-basis"><i class="fa fa-check"></i><b>3.3</b> Programming with JS: basis</a><ul>
<li class="chapter" data-level="3.3.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#js-types"><i class="fa fa-check"></i><b>3.3.1</b> JS types</a></li>
<li class="chapter" data-level="3.3.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#variables"><i class="fa fa-check"></i><b>3.3.2</b> Variables</a></li>
<li class="chapter" data-level="3.3.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#conditions"><i class="fa fa-check"></i><b>3.3.3</b> Conditions</a></li>
<li class="chapter" data-level="3.3.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#objects"><i class="fa fa-check"></i><b>3.3.4</b> Objects</a></li>
<li class="chapter" data-level="3.3.5" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#iterations"><i class="fa fa-check"></i><b>3.3.5</b> Iterations</a></li>
<li class="chapter" data-level="3.3.6" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#functions"><i class="fa fa-check"></i><b>3.3.6</b> Functions</a></li>
<li class="chapter" data-level="3.3.7" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#event-listeners"><i class="fa fa-check"></i><b>3.3.7</b> Event listeners</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#jquery"><i class="fa fa-check"></i><b>3.4</b> jQuery</a><ul>
<li class="chapter" data-level="3.4.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#introduction-1"><i class="fa fa-check"></i><b>3.4.1</b> Introduction</a></li>
<li class="chapter" data-level="3.4.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#syntax"><i class="fa fa-check"></i><b>3.4.2</b> Syntax</a></li>
<li class="chapter" data-level="3.4.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#useful-functions"><i class="fa fa-check"></i><b>3.4.3</b> Useful functions</a></li>
<li class="chapter" data-level="3.4.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#chaining-jquery-methods"><i class="fa fa-check"></i><b>3.4.4</b> Chaining jQuery methods</a></li>
<li class="chapter" data-level="3.4.5" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#iterations-1"><i class="fa fa-check"></i><b>3.4.5</b> Iterations</a></li>
<li class="chapter" data-level="3.4.6" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#good-practice"><i class="fa fa-check"></i><b>3.4.6</b> Good practice</a></li>
<li class="chapter" data-level="3.4.7" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#events"><i class="fa fa-check"></i><b>3.4.7</b> Events</a></li>
<li class="chapter" data-level="3.4.8" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#extending-objects"><i class="fa fa-check"></i><b>3.4.8</b> Extending objects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html"><i class="fa fa-check"></i><b>4</b> Shiny: What’s under the Hood?</a><ul>
<li class="chapter" data-level="4.1" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#shiny-html-css-and-javascript"><i class="fa fa-check"></i><b>4.1</b> Shiny, HTML, CSS and JavaScript</a></li>
<li class="chapter" data-level="4.2" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#discover-shiny-dependencies"><i class="fa fa-check"></i><b>4.2</b> Discover Shiny dependencies</a></li>
<li class="chapter" data-level="4.3" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#websocket-rjs-bidirectional-communication"><i class="fa fa-check"></i><b>4.3</b> Websocket: R/JS bidirectional communication</a></li>
<li class="chapter" data-level="4.4" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#the-shiny-session-object"><i class="fa fa-check"></i><b>4.4</b> The Shiny session object</a></li>
<li class="chapter" data-level="4.5" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#shinys-input-system"><i class="fa fa-check"></i><b>4.5</b> Shiny’s input system</a><ul>
<li class="chapter" data-level="4.5.1" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#shiny-javascript-sources"><i class="fa fa-check"></i><b>4.5.1</b> Shiny JavaScript sources</a></li>
<li class="chapter" data-level="4.5.2" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#the-shiny-javascript-object"><i class="fa fa-check"></i><b>4.5.2</b> The Shiny JavaScript object</a></li>
<li class="chapter" data-level="4.5.3" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#initialization"><i class="fa fa-check"></i><b>4.5.3</b> Initialization</a></li>
<li class="chapter" data-level="4.5.4" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#input-bindings"><i class="fa fa-check"></i><b>4.5.4</b> Input bindings</a></li>
<li class="chapter" data-level="4.5.5" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#utilities-to-quickly-define-new-inputs"><i class="fa fa-check"></i><b>4.5.5</b> Utilities to quickly define new inputs</a></li>
<li class="chapter" data-level="4.5.6" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#miscellaneous"><i class="fa fa-check"></i><b>4.5.6</b> Miscellaneous</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#custom-handlers-from-r-to-javascript"><i class="fa fa-check"></i><b>4.6</b> Custom handlers: from R to JavaScript</a></li>
</ul></li>
<li class="part"><span><b>htmltools</b></span></li>
<li class="chapter" data-level="5" data-path="htmltools-overview.html"><a href="htmltools-overview.html"><i class="fa fa-check"></i><b>5</b> htmltools overview</a><ul>
<li class="chapter" data-level="5.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#html-tags"><i class="fa fa-check"></i><b>5.1</b> HTML Tags</a></li>
<li class="chapter" data-level="5.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#notations"><i class="fa fa-check"></i><b>5.2</b> Notations</a></li>
<li class="chapter" data-level="5.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#adding-new-tags"><i class="fa fa-check"></i><b>5.3</b> Adding new tags</a></li>
<li class="chapter" data-level="5.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#alternative-way-to-write-tags"><i class="fa fa-check"></i><b>5.4</b> Alternative way to write tags</a></li>
<li class="chapter" data-level="5.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#playing-with-tags"><i class="fa fa-check"></i><b>5.5</b> Playing with tags</a><ul>
<li class="chapter" data-level="5.5.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#tags-structure"><i class="fa fa-check"></i><b>5.5.1</b> Tags structure</a></li>
<li class="chapter" data-level="5.5.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#useful-functions-for-tags"><i class="fa fa-check"></i><b>5.5.2</b> Useful functions for tags</a></li>
<li class="chapter" data-level="5.5.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#other-interesting-functions"><i class="fa fa-check"></i><b>5.5.3</b> Other interesting functions</a></li>
<li class="chapter" data-level="5.5.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#conditionally-set-attributes"><i class="fa fa-check"></i><b>5.5.4</b> Conditionally set attributes</a></li>
<li class="chapter" data-level="5.5.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#using"><i class="fa fa-check"></i><b>5.5.5</b> Using %&gt;%</a></li>
<li class="chapter" data-level="5.5.6" data-path="htmltools-overview.html"><a href="htmltools-overview.html#programmatically-create-children-elements"><i class="fa fa-check"></i><b>5.5.6</b> Programmatically create children elements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html"><i class="fa fa-check"></i><b>6</b> Dependency utilities</a><ul>
<li class="chapter" data-level="6.1" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-dirty-approach"><i class="fa fa-check"></i><b>6.1</b> The dirty approach</a></li>
<li class="chapter" data-level="6.2" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-clean-approach"><i class="fa fa-check"></i><b>6.2</b> The clean approach</a></li>
<li class="chapter" data-level="6.3" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#another-example-importing-html-dependencies-from-other-packages"><i class="fa fa-check"></i><b>6.3</b> Another example: Importing HTML dependencies from other packages</a></li>
<li class="chapter" data-level="6.4" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#suppress-dependencies"><i class="fa fa-check"></i><b>6.4</b> Suppress dependencies</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html"><i class="fa fa-check"></i><b>7</b> Other tools</a><ul>
<li class="chapter" data-level="7.1" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html#css"><i class="fa fa-check"></i><b>7.1</b> CSS</a></li>
</ul></li>
<li class="part"><span><b>Practice</b></span></li>
<li class="chapter" data-level="8" data-path="custom-templates-selection.html"><a href="custom-templates-selection.html"><i class="fa fa-check"></i><b>8</b> Template selection</a></li>
<li class="chapter" data-level="9" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html"><i class="fa fa-check"></i><b>9</b> Define dependencies</a><ul>
<li class="chapter" data-level="9.1" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#discover-the-project"><i class="fa fa-check"></i><b>9.1</b> Discover the project</a></li>
<li class="chapter" data-level="9.2" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#identify-mandatory-dependencies"><i class="fa fa-check"></i><b>9.2</b> Identify mandatory dependencies</a></li>
<li class="chapter" data-level="9.3" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#bundle-dependencies"><i class="fa fa-check"></i><b>9.3</b> Bundle dependencies</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html"><i class="fa fa-check"></i><b>10</b> Template skeleton</a><ul>
<li class="chapter" data-level="10.1" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#identify-template-elements"><i class="fa fa-check"></i><b>10.1</b> Identify template elements</a></li>
<li class="chapter" data-level="10.2" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#design-the-page-layout"><i class="fa fa-check"></i><b>10.2</b> Design the page layout</a><ul>
<li class="chapter" data-level="10.2.1" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-page-wrapper"><i class="fa fa-check"></i><b>10.2.1</b> The page wrapper</a></li>
<li class="chapter" data-level="10.2.2" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-body-content"><i class="fa fa-check"></i><b>10.2.2</b> The body content</a></li>
<li class="chapter" data-level="10.2.3" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-footer"><i class="fa fa-check"></i><b>10.2.3</b> The footer</a></li>
<li class="chapter" data-level="10.2.4" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-navbar-or-header"><i class="fa fa-check"></i><b>10.2.4</b> The navbar (or header)</a></li>
<li class="chapter" data-level="10.2.5" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#card-containers"><i class="fa fa-check"></i><b>10.2.5</b> Card containers</a></li>
<li class="chapter" data-level="10.2.6" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#ribbons-card-components"><i class="fa fa-check"></i><b>10.2.6</b> Ribbons: card components</a></li>
<li class="chapter" data-level="10.2.7" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#icons"><i class="fa fa-check"></i><b>10.2.7</b> Icons</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html"><i class="fa fa-check"></i><b>11</b> Develop custom input widgets</a><ul>
<li class="chapter" data-level="11.1" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#tabler-action-button"><i class="fa fa-check"></i><b>11.1</b> Tabler action button</a><ul>
<li class="chapter" data-level="11.1.1" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#reminders-about-the-action-button"><i class="fa fa-check"></i><b>11.1.1</b> Reminders about the action button</a></li>
<li class="chapter" data-level="11.1.2" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#application-to-tabler"><i class="fa fa-check"></i><b>11.1.2</b> Application to tabler</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#toggle-switch"><i class="fa fa-check"></i><b>11.2</b> Toggle Switch</a></li>
<li class="chapter" data-level="11.3" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#navbar-menu-input"><i class="fa fa-check"></i><b>11.3</b> Navbar menu input</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html"><i class="fa fa-check"></i><b>12</b> Adding more interactivity</a><ul>
<li class="chapter" data-level="12.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#custom-progress-bars"><i class="fa fa-check"></i><b>12.1</b> Custom progress bars</a></li>
<li class="chapter" data-level="12.2" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#user-feedback-toasts"><i class="fa fa-check"></i><b>12.2</b> User feedback: toasts</a><ul>
<li class="chapter" data-level="12.2.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#toast-skeleton"><i class="fa fa-check"></i><b>12.2.1</b> Toast skeleton</a></li>
<li class="chapter" data-level="12.2.2" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#the-toast-api"><i class="fa fa-check"></i><b>12.2.2</b> The toast API</a></li>
<li class="chapter" data-level="12.2.3" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#r-implementation"><i class="fa fa-check"></i><b>12.2.3</b> R implementation</a></li>
<li class="chapter" data-level="12.2.4" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#wrap-up"><i class="fa fa-check"></i><b>12.2.4</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#transform-an-element-in-a-custom-action-button"><i class="fa fa-check"></i><b>12.3</b> Transform an element in a custom action button</a></li>
<li class="chapter" data-level="12.4" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#tab-events"><i class="fa fa-check"></i><b>12.4</b> Tab events</a><ul>
<li class="chapter" data-level="12.4.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#insert-tabs"><i class="fa fa-check"></i><b>12.4.1</b> Insert/Remove tabs in tabsetpanel</a></li>
<li class="chapter" data-level="12.4.2" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#more-events"><i class="fa fa-check"></i><b>12.4.2</b> More events</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html"><i class="fa fa-check"></i><b>13</b> Testing and validating templates elements</a><ul>
<li class="chapter" data-level="13.1" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#validate-template-functions"><i class="fa fa-check"></i><b>13.1</b> Validate template functions</a></li>
<li class="chapter" data-level="13.2" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#testing-templates-elements"><i class="fa fa-check"></i><b>13.2</b> Testing templates elements</a></li>
<li class="chapter" data-level="13.3" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#testing-javascript"><i class="fa fa-check"></i><b>13.3</b> Testing JavaScript</a></li>
</ul></li>
<li class="part"><span><b>Beautify with CSS and SASS</b></span></li>
<li class="chapter" data-level="14" data-path="beautify-with-fresh.html"><a href="beautify-with-fresh.html"><i class="fa fa-check"></i><b>14</b> Beautify with fresh</a><ul>
<li class="chapter" data-level="14.1" data-path="beautify-with-fresh.html"><a href="beautify-with-fresh.html#fresh-the-big-picture"><i class="fa fa-check"></i><b>14.1</b> {fresh}, the big picture</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Outstanding User Interfaces with Shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="custom-templates-inputs" class="section level1">
<h1><span class="header-section-number">Chapter 11</span> Develop custom input widgets</h1>
<p>In the previous chapter, we built the template dependencies, the page skeleton as well as containers like cards. However, it would be nice to custonize user interactions by bringing new inputs. In this chapter, we will apply knowledge from Chapter <a href="survival-kit-shiny.html#survival-kit-shiny">4</a> about creating new Shiny input.</p>
<div id="tabler-action-button" class="section level2">
<h2><span class="header-section-number">11.1</span> Tabler action button</h2>
<p>Let’s start with a simple input: the action button. Tabler has builtin HTML buttons with a substantial amount of custom styles, compared to the classic Shiny action button.</p>
<div id="reminders-about-the-action-button" class="section level3">
<h3><span class="header-section-number">11.1.1</span> Reminders about the action button</h3>
<p>Below is the code of the <code>actionButton</code> input.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" data-line-number="1">actionButton &lt;-<span class="st"> </span><span class="cf">function</span> (inputId, label, <span class="dt">icon =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="ot">NULL</span>, ...)  {</a>
<a class="sourceLine" id="cb168-2" data-line-number="2">  value &lt;-<span class="st"> </span><span class="kw">restoreInput</span>(<span class="dt">id =</span> inputId, <span class="dt">default =</span> <span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb168-3" data-line-number="3">  tags<span class="op">$</span><span class="kw">button</span>(</a>
<a class="sourceLine" id="cb168-4" data-line-number="4">    <span class="dt">id =</span> inputId, </a>
<a class="sourceLine" id="cb168-5" data-line-number="5">    <span class="dt">style =</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(width)) <span class="kw">paste0</span>(<span class="st">&quot;width: &quot;</span>, <span class="kw">validateCssUnit</span>(width), <span class="st">&quot;;&quot;</span>), </a>
<a class="sourceLine" id="cb168-6" data-line-number="6">    <span class="dt">type =</span> <span class="st">&quot;button&quot;</span>, </a>
<a class="sourceLine" id="cb168-7" data-line-number="7">    <span class="dt">class =</span> <span class="st">&quot;btn btn-default action-button&quot;</span>, </a>
<a class="sourceLine" id="cb168-8" data-line-number="8">    <span class="st">`</span><span class="dt">data-val</span><span class="st">`</span> =<span class="st"> </span>value, </a>
<a class="sourceLine" id="cb168-9" data-line-number="9">    <span class="kw">list</span>(<span class="kw">validateIcon</span>(icon), label), ...</a>
<a class="sourceLine" id="cb168-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb168-11" data-line-number="11">}</a></code></pre></div>
<p>The button tag has some attributes: id, style, type, class, <code>data-val</code>, label and children passed via <code>...</code></p>
<p>When the app starts, the action button has the value 0 and each click will increment its value by 1. How is this behaviour created? For each Shiny input element (radio, slider), there is an associated JavaScript magic file, called input binding, which you can find <a href="https://github.com/rstudio/shiny/tree/master/srcjs">here</a>. In our case, we are only interested in the action button binding:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb169-1" data-line-number="1"><span class="kw">var</span> actionButtonInputBinding <span class="op">=</span> <span class="kw">new</span> <span class="at">InputBinding</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb169-2" data-line-number="2"><span class="va">$</span>.<span class="at">extend</span>(actionButtonInputBinding<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb169-3" data-line-number="3">  <span class="dt">find</span><span class="op">:</span> <span class="kw">function</span>(scope) <span class="op">{</span></a>
<a class="sourceLine" id="cb169-4" data-line-number="4">    <span class="cf">return</span> <span class="at">$</span>(scope).<span class="at">find</span>(<span class="st">&quot;.action-button&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb169-5" data-line-number="5">  <span class="op">},</span></a>
<a class="sourceLine" id="cb169-6" data-line-number="6">  <span class="dt">getValue</span><span class="op">:</span> <span class="kw">function</span>(el) <span class="op">{</span></a>
<a class="sourceLine" id="cb169-7" data-line-number="7">    <span class="cf">return</span> <span class="at">$</span>(el).<span class="at">data</span>(<span class="st">&#39;val&#39;</span>) <span class="op">||</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb169-8" data-line-number="8">  <span class="op">},</span></a>
<a class="sourceLine" id="cb169-9" data-line-number="9">  <span class="co">// ... other methods</span></a>
<a class="sourceLine" id="cb169-10" data-line-number="10"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>What you see above is <strong>not</strong> the whole script since we focus on the first method, that is <code>find</code>. It will look for <strong>all</strong> elements having the class <strong>.action-button</strong>, making it possible to define multiple action buttons at the same time.</p>
<p>Consequently, if we go back to the previous section, the <code>actionButton</code> has the class <strong>.action-button</strong>, thereby making it visible to the binding. What is interesting is that all elements having the class .action-button will be considered by the same shiny input binding.</p>
</div>
<div id="application-to-tabler" class="section level3">
<h3><span class="header-section-number">11.1.2</span> Application to tabler</h3>
<p>First of all, let’s compare the tabler HTML button to the Shiny action button.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb170-1" data-line-number="1"><span class="kw">&lt;button</span><span class="ot"> class=</span><span class="st">&quot;btn btn-primary&quot;</span><span class="kw">&gt;</span>Button<span class="kw">&lt;/button&gt;</span></a></code></pre></div>
<p>We convert it to R. The button API contains more style and leave the reader to add extra elements as an exercise.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" data-line-number="1">tabler_button &lt;-<span class="st"> </span><span class="cf">function</span>(inputId, label, <span class="dt">status =</span> <span class="ot">NULL</span>, <span class="dt">icon =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="ot">NULL</span>, ...) {</a>
<a class="sourceLine" id="cb171-2" data-line-number="2">  </a>
<a class="sourceLine" id="cb171-3" data-line-number="3">  btn_cl &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb171-4" data-line-number="4">    <span class="st">&quot;btn action-button&quot;</span>,</a>
<a class="sourceLine" id="cb171-5" data-line-number="5">    <span class="cf">if</span> (<span class="kw">is.null</span>(status)) {</a>
<a class="sourceLine" id="cb171-6" data-line-number="6">      <span class="st">&quot; btn-primary&quot;</span></a>
<a class="sourceLine" id="cb171-7" data-line-number="7">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb171-8" data-line-number="8">      <span class="kw">paste0</span>(<span class="st">&quot; btn-&quot;</span>, status)</a>
<a class="sourceLine" id="cb171-9" data-line-number="9">    }</a>
<a class="sourceLine" id="cb171-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb171-11" data-line-number="11">  </a>
<a class="sourceLine" id="cb171-12" data-line-number="12">  value &lt;-<span class="st"> </span><span class="kw">restoreInput</span>(<span class="dt">id =</span> inputId, <span class="dt">default =</span> <span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb171-13" data-line-number="13">  </a>
<a class="sourceLine" id="cb171-14" data-line-number="14">  <span class="co"># custom right margin</span></a>
<a class="sourceLine" id="cb171-15" data-line-number="15">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(icon)) icon<span class="op">$</span>attribs<span class="op">$</span>class &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb171-16" data-line-number="16">    icon<span class="op">$</span>attribs<span class="op">$</span>class, <span class="st">&quot; mr-1&quot;</span></a>
<a class="sourceLine" id="cb171-17" data-line-number="17">  )</a>
<a class="sourceLine" id="cb171-18" data-line-number="18">  </a>
<a class="sourceLine" id="cb171-19" data-line-number="19">  tags<span class="op">$</span><span class="kw">button</span>(</a>
<a class="sourceLine" id="cb171-20" data-line-number="20">    <span class="dt">id =</span> inputId, </a>
<a class="sourceLine" id="cb171-21" data-line-number="21">    <span class="dt">style =</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(width)) <span class="kw">paste0</span>(<span class="st">&quot;width: &quot;</span>, <span class="kw">validateCssUnit</span>(width), <span class="st">&quot;;&quot;</span>), </a>
<a class="sourceLine" id="cb171-22" data-line-number="22">    <span class="dt">type =</span> <span class="st">&quot;button&quot;</span>, </a>
<a class="sourceLine" id="cb171-23" data-line-number="23">    <span class="dt">class =</span> btn_cl, </a>
<a class="sourceLine" id="cb171-24" data-line-number="24">    <span class="st">`</span><span class="dt">data-val</span><span class="st">`</span> =<span class="st"> </span>value, </a>
<a class="sourceLine" id="cb171-25" data-line-number="25">    <span class="kw">list</span>(icon, label), ...</a>
<a class="sourceLine" id="cb171-26" data-line-number="26">  )</a>
<a class="sourceLine" id="cb171-27" data-line-number="27">}</a></code></pre></div>
<p>In tabler, the button status is mandatory, which is the reason why it is a parameter of the function. Moreover, we need to add an horizontal right margin to the icon, if provided so that the label renders well.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" data-line-number="1">ui &lt;-<span class="st"> </span><span class="kw">tabler_page</span>(</a>
<a class="sourceLine" id="cb172-2" data-line-number="2">  <span class="kw">tabler_button</span>(<span class="st">&quot;btn&quot;</span>, <span class="st">&quot;Click&quot;</span>, <span class="dt">icon =</span> <span class="kw">icon</span>(<span class="st">&quot;thumbs-up&quot;</span>), <span class="dt">width =</span> <span class="st">&quot;25%&quot;</span>)</a>
<a class="sourceLine" id="cb172-3" data-line-number="3">)</a>
<a class="sourceLine" id="cb172-4" data-line-number="4"></a>
<a class="sourceLine" id="cb172-5" data-line-number="5">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb172-6" data-line-number="6">  <span class="kw">observe</span>(<span class="kw">print</span>(input<span class="op">$</span>btn))</a>
<a class="sourceLine" id="cb172-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb172-8" data-line-number="8"></a>
<a class="sourceLine" id="cb172-9" data-line-number="9"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p>We easily check that clicking on the button increments the related input. In few minutes, we were able to implement a custom tabler input button, built on top of the Shiny action button.</p>
<br>
<div class="callout callout-info">
<p>As a general rule, don’t try to reinvent the wheel and see whether any existing Shiny element may be reused/adapted!</p>
</div>
<p><br></p>
</div>
</div>
<div id="toggle-switch" class="section level2">
<h2><span class="header-section-number">11.2</span> Toggle Switch</h2>
<p>We implement the toggle <a href="https://preview-dev.tabler.io/docs/form-elements.html#custom-selectboxes">switch</a> component.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb173-1" data-line-number="1"><span class="kw">&lt;label</span><span class="ot"> class=</span><span class="st">&quot;form-check form-switch&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb173-2" data-line-number="2">  <span class="kw">&lt;input</span><span class="ot"> class=</span><span class="st">&quot;form-check-input&quot;</span><span class="ot"> type=</span><span class="st">&quot;checkbox&quot;</span><span class="ot"> checked</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb173-3" data-line-number="3">  <span class="kw">&lt;span</span><span class="ot"> class=</span><span class="st">&quot;form-check-label&quot;</span><span class="kw">&gt;</span>Option 1<span class="kw">&lt;/span&gt;</span></a>
<a class="sourceLine" id="cb173-4" data-line-number="4"><span class="kw">&lt;/label&gt;</span></a></code></pre></div>
<p>Notice that the tabler switch has the checkbox type, which is very similar to the Shiny checkbox (a switch is a checkbox with a different style)</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" data-line-number="1"><span class="kw">checkboxInput</span>(<span class="st">&quot;test&quot;</span>, <span class="st">&quot;Test&quot;</span>, <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="form-group shiny-input-container">
<div class="checkbox">
<label>
<input id="test" type="checkbox" checked="checked"/>
<span>Test</span>
</label>
</div>
</div>
<p>Therefore, we should again be able to build on top of an existing input <a href="https://github.com/rstudio/shiny/blob/master/srcjs/input_binding_checkbox.js">binding</a>. We create the <code>tabler_switch</code> function:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" data-line-number="1">tabler_switch &lt;-<span class="st"> </span><span class="cf">function</span>(inputId, label, <span class="dt">value =</span> <span class="ot">FALSE</span>, <span class="dt">width =</span> <span class="ot">NULL</span>) {</a>
<a class="sourceLine" id="cb175-2" data-line-number="2">  </a>
<a class="sourceLine" id="cb175-3" data-line-number="3">  value &lt;-<span class="st"> </span><span class="kw">restoreInput</span>(<span class="dt">id =</span> inputId, <span class="dt">default =</span> value)</a>
<a class="sourceLine" id="cb175-4" data-line-number="4">  inputTag &lt;-<span class="st"> </span>tags<span class="op">$</span><span class="kw">input</span>(</a>
<a class="sourceLine" id="cb175-5" data-line-number="5">    <span class="dt">id =</span> inputId, </a>
<a class="sourceLine" id="cb175-6" data-line-number="6">    <span class="dt">type =</span> <span class="st">&quot;checkbox&quot;</span>,</a>
<a class="sourceLine" id="cb175-7" data-line-number="7">    <span class="dt">class =</span> <span class="st">&quot;form-check-input&quot;</span></a>
<a class="sourceLine" id="cb175-8" data-line-number="8">  )</a>
<a class="sourceLine" id="cb175-9" data-line-number="9">  </a>
<a class="sourceLine" id="cb175-10" data-line-number="10">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(value) <span class="op">&amp;&amp;</span><span class="st"> </span>value) {</a>
<a class="sourceLine" id="cb175-11" data-line-number="11">    inputTag<span class="op">$</span>attribs<span class="op">$</span>checked &lt;-<span class="st"> &quot;checked&quot;</span></a>
<a class="sourceLine" id="cb175-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb175-13" data-line-number="13">  </a>
<a class="sourceLine" id="cb175-14" data-line-number="14">  tags<span class="op">$</span><span class="kw">label</span>(</a>
<a class="sourceLine" id="cb175-15" data-line-number="15">    <span class="dt">class =</span> <span class="st">&quot;form-check form-switch&quot;</span>, </a>
<a class="sourceLine" id="cb175-16" data-line-number="16">    <span class="dt">style =</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(width)) {</a>
<a class="sourceLine" id="cb175-17" data-line-number="17">      <span class="kw">paste0</span>(<span class="st">&quot;width: &quot;</span>, <span class="kw">validateCssUnit</span>(width), <span class="st">&quot;;&quot;</span>)</a>
<a class="sourceLine" id="cb175-18" data-line-number="18">    }, </a>
<a class="sourceLine" id="cb175-19" data-line-number="19">    inputTag,</a>
<a class="sourceLine" id="cb175-20" data-line-number="20">    <span class="kw">span</span>(<span class="dt">class =</span> <span class="st">&quot;form-check-label&quot;</span>, label)</a>
<a class="sourceLine" id="cb175-21" data-line-number="21">  )</a>
<a class="sourceLine" id="cb175-22" data-line-number="22">}</a></code></pre></div>
<p>Besides, we may also create an <code>update_tabler_switch</code> function similar to the <code>updateCheckboxInput</code>. We will also need <code>dropNulls</code>, a function that removes all NULL elements from a list (this function is often used in all custom Shiny templates). If you remember the <code>sendInputMessage</code> from R will be received by the <code>receiveMessage</code> method on the JavaScript side.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" data-line-number="1">dropNulls &lt;-<span class="st"> </span><span class="cf">function</span> (x) {</a>
<a class="sourceLine" id="cb176-2" data-line-number="2">  x[<span class="op">!</span><span class="kw">vapply</span>(x, is.null, <span class="dt">FUN.VALUE =</span> <span class="kw">logical</span>(<span class="dv">1</span>))]</a>
<a class="sourceLine" id="cb176-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb176-4" data-line-number="4"></a>
<a class="sourceLine" id="cb176-5" data-line-number="5">update_tabler_switch &lt;-<span class="st"> </span><span class="cf">function</span> (session, inputId, <span class="dt">label =</span> <span class="ot">NULL</span>, <span class="dt">value =</span> <span class="ot">NULL</span>) {</a>
<a class="sourceLine" id="cb176-6" data-line-number="6">  message &lt;-<span class="st"> </span><span class="kw">dropNulls</span>(<span class="kw">list</span>(<span class="dt">label =</span> label, <span class="dt">value =</span> value))</a>
<a class="sourceLine" id="cb176-7" data-line-number="7">  session<span class="op">$</span><span class="kw">sendInputMessage</span>(inputId, message)</a>
<a class="sourceLine" id="cb176-8" data-line-number="8">}</a></code></pre></div>
<p>In the following example, the action button toggles the switch input value when clicked.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" data-line-number="1">ui &lt;-<span class="st"> </span><span class="kw">tabler_page</span>(</a>
<a class="sourceLine" id="cb177-2" data-line-number="2">  <span class="kw">tabler_switch</span>(<span class="st">&quot;toggle&quot;</span>, <span class="st">&quot;Switch&quot;</span>, <span class="dt">value =</span> <span class="ot">TRUE</span>, <span class="dt">width =</span> <span class="st">&quot;25%&quot;</span>),</a>
<a class="sourceLine" id="cb177-3" data-line-number="3">  <span class="kw">tabler_button</span>(<span class="st">&quot;update&quot;</span>, <span class="st">&quot;Go!&quot;</span>)</a>
<a class="sourceLine" id="cb177-4" data-line-number="4">)</a>
<a class="sourceLine" id="cb177-5" data-line-number="5"></a>
<a class="sourceLine" id="cb177-6" data-line-number="6">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb177-7" data-line-number="7">  <span class="kw">observe</span>(<span class="kw">print</span>(input<span class="op">$</span>toggle))</a>
<a class="sourceLine" id="cb177-8" data-line-number="8">  <span class="kw">observeEvent</span>(input<span class="op">$</span>update, {</a>
<a class="sourceLine" id="cb177-9" data-line-number="9">    <span class="kw">update_tabler_switch</span>(</a>
<a class="sourceLine" id="cb177-10" data-line-number="10">      session, </a>
<a class="sourceLine" id="cb177-11" data-line-number="11">      <span class="st">&quot;toggle&quot;</span>, </a>
<a class="sourceLine" id="cb177-12" data-line-number="12">      <span class="dt">value =</span> <span class="op">!</span>input<span class="op">$</span>toggle</a>
<a class="sourceLine" id="cb177-13" data-line-number="13">    )</a>
<a class="sourceLine" id="cb177-14" data-line-number="14">  })</a>
<a class="sourceLine" id="cb177-15" data-line-number="15">}</a>
<a class="sourceLine" id="cb177-16" data-line-number="16"></a>
<a class="sourceLine" id="cb177-17" data-line-number="17"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p>Et voilà! 2 inputs in few minutes.</p>
</div>
<div id="navbar-menu-input" class="section level2">
<h2><span class="header-section-number">11.3</span> Navbar menu input</h2>
<p>We saw in Chapter <a href="survival-kit-shiny.html#survival-kit-shiny">4</a> that it is quite easy to bind other elements than pure inputs (HTML elements with the input tag) to Shiny. As a reminder, we created a custom input binding to detect the state of a shinydashboard box (collapsed/uncollapsed).
In chapter <a href="custom-templates-skeleton.html#custom-templates-skeleton">10</a>, we created the <code>tabler_navbar</code> as well as the <code>tabler_navbar_menu</code> and <code>tabler_navbar_menu_item</code>. As in shinydashboard, it would be nice to capture the currently selected tab to be able to perform actions on the server side, updating the selected tab based on a button click.</p>
<p>Where do we start? First of all, the first thing is to add an id attribute to the <code>tabler_navbar_menu</code> so that it holds the corresponding <code>input$id</code>. Whether to use <code>inputId</code> or <code>id</code> as a parameter name is up to you, but keep in mind that <code>inputId</code> does not exist in HTML.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" data-line-number="1">tabler_navbar_menu &lt;-<span class="st"> </span><span class="cf">function</span>(..., <span class="dt">inputId =</span> <span class="ot">NULL</span>) {</a>
<a class="sourceLine" id="cb178-2" data-line-number="2">  tags<span class="op">$</span><span class="kw">ul</span>(<span class="dt">id =</span> inputId, <span class="dt">class =</span> <span class="st">&quot;nav nav-pills navbar-nav&quot;</span>, ...)</a>
<a class="sourceLine" id="cb178-3" data-line-number="3">}</a></code></pre></div>
<p>The next step is the <code>navbarMenuBinding</code> creation. We decide to look for the <code>navbar-nav</code> class in the <code>find</code> method. Below, we describe the binding step by step. You may find the whole working code at the end of this example.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb179-1" data-line-number="1">find<span class="op">:</span> <span class="kw">function</span>(scope) <span class="op">{</span></a>
<a class="sourceLine" id="cb179-2" data-line-number="2">  <span class="cf">return</span> <span class="at">$</span>(scope).<span class="at">find</span>(<span class="st">&#39;.navbar-nav&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb179-3" data-line-number="3"><span class="op">}</span></a></code></pre></div>
<p>In the <code>initialize</code> method, we ensure that if no tab is selected at start, the first tab will be by default. Otherwise, we select the activated tab. We use the string interpolation to ease the insertion of JS code in strings (<code>${menuId} .nav-link.active</code>).</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb180-1" data-line-number="1">initialize<span class="op">:</span> <span class="kw">function</span>(el) <span class="op">{</span></a>
<a class="sourceLine" id="cb180-2" data-line-number="2">  <span class="kw">let</span> menuId <span class="op">=</span> <span class="st">&#39;#&#39;</span> <span class="op">+</span> <span class="at">$</span>(el).<span class="at">attr</span>(<span class="st">&#39;id&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb180-3" data-line-number="3">  <span class="kw">let</span> activeTab <span class="op">=</span> <span class="at">$</span>(<span class="vs">`</span><span class="sc">${</span>menuId<span class="sc">}</span><span class="vs"> .nav-link.active`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb180-4" data-line-number="4">  <span class="co">// if multiple items are found</span></a>
<a class="sourceLine" id="cb180-5" data-line-number="5">  <span class="cf">if</span> (<span class="va">activeTab</span>.<span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb180-6" data-line-number="6">    <span class="kw">let</span> tabId <span class="op">=</span> <span class="at">$</span>(activeTab).<span class="at">attr</span>(<span class="st">&#39;data-value&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb180-7" data-line-number="7">    <span class="at">$</span>(activeTab).<span class="at">tab</span>(<span class="st">&#39;show&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb180-8" data-line-number="8">    <span class="at">$</span>(<span class="vs">`#</span><span class="sc">${</span>tabId<span class="sc">}</span><span class="vs">`</span>).<span class="at">addClass</span>(<span class="st">&#39;show active&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb180-9" data-line-number="9">  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb180-10" data-line-number="10">    <span class="at">$</span>(<span class="vs">`</span><span class="sc">${</span>menuId<span class="sc">}</span><span class="vs"> .nav-link`</span>)</a>
<a class="sourceLine" id="cb180-11" data-line-number="11">      .<span class="at">first</span>()</a>
<a class="sourceLine" id="cb180-12" data-line-number="12">      .<span class="at">tab</span>(<span class="st">&#39;show&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb180-13" data-line-number="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb180-14" data-line-number="14"><span class="op">}</span></a></code></pre></div>
<p>The role of <code>getValue</code> is to return the currently selected tab. As a reminder, here is the <code>tabler_navbar_menu_item</code> function:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" data-line-number="1">tabler_navbar_menu_item &lt;-<span class="st"> </span><span class="cf">function</span>(text, tabName, <span class="dt">icon =</span> <span class="ot">NULL</span>, <span class="dt">selected =</span> <span class="ot">FALSE</span>) {</a>
<a class="sourceLine" id="cb181-2" data-line-number="2">  </a>
<a class="sourceLine" id="cb181-3" data-line-number="3">  item_cl &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;nav-link&quot;</span>, <span class="cf">if</span>(selected) <span class="st">&quot; active&quot;</span>)</a>
<a class="sourceLine" id="cb181-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb181-5" data-line-number="5">  tags<span class="op">$</span><span class="kw">li</span>(</a>
<a class="sourceLine" id="cb181-6" data-line-number="6">    <span class="dt">class =</span> <span class="st">&quot;nav-item&quot;</span>,</a>
<a class="sourceLine" id="cb181-7" data-line-number="7">    <span class="kw">a</span>(</a>
<a class="sourceLine" id="cb181-8" data-line-number="8">      <span class="dt">class =</span> item_cl,</a>
<a class="sourceLine" id="cb181-9" data-line-number="9">      <span class="dt">href =</span> <span class="kw">paste0</span>(<span class="st">&quot;#&quot;</span>, tabName),</a>
<a class="sourceLine" id="cb181-10" data-line-number="10">      <span class="st">`</span><span class="dt">data-toggle</span><span class="st">`</span> =<span class="st"> &quot;pill&quot;</span>, <span class="co"># see https://getbootstrap.com/docs/4.0/components/navs/</span></a>
<a class="sourceLine" id="cb181-11" data-line-number="11">      <span class="st">`</span><span class="dt">data-value</span><span class="st">`</span> =<span class="st"> </span>tabName,</a>
<a class="sourceLine" id="cb181-12" data-line-number="12">      <span class="dt">role =</span> <span class="st">&quot;tab&quot;</span>,</a>
<a class="sourceLine" id="cb181-13" data-line-number="13">      <span class="kw">span</span>(<span class="dt">class =</span> <span class="st">&quot;nav-link-icon d-md-none d-lg-inline-block&quot;</span>, icon),</a>
<a class="sourceLine" id="cb181-14" data-line-number="14">      <span class="kw">span</span>(<span class="dt">class =</span> <span class="st">&quot;nav-link-title&quot;</span>, text)</a>
<a class="sourceLine" id="cb181-15" data-line-number="15">    )</a>
<a class="sourceLine" id="cb181-16" data-line-number="16">  )</a>
<a class="sourceLine" id="cb181-17" data-line-number="17">}</a></code></pre></div>
<p>From that function, the active item has is the <code>a</code> element with the classes <code>nav-link active</code>. We recover the tab value stored in the <code>data-value</code> attribute. A bit of jQuery will do the trick!</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb182-1" data-line-number="1">getValue<span class="op">:</span> <span class="kw">function</span>(el) <span class="op">{</span></a>
<a class="sourceLine" id="cb182-2" data-line-number="2">  <span class="kw">let</span> activeTab <span class="op">=</span> <span class="at">$</span>(el).<span class="at">find</span>(<span class="st">&#39;a&#39;</span>).<span class="at">filter</span>(<span class="st">&#39;nav-link active&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb182-3" data-line-number="3">  <span class="cf">return</span> <span class="at">$</span>(activeTab).<span class="at">attr</span>(<span class="st">&#39;data-value&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb182-4" data-line-number="4"><span class="op">}</span></a></code></pre></div>
<p><code>setValue</code> is the function allowing to update the active tab. Bootstrap 4 already has
predefined methods to <a href="https://getbootstrap.com/docs/4.0/components/navs/#via-javascript">activate</a> tabs. The easiest way is to select the tab by name like <code>$('#tabMenu a[href=&quot;#tab1&quot;]').tab('show')</code>. The <code>receiveMessage</code> is simply applying the <code>setValue</code> method.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb183-1" data-line-number="1">setValue<span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> value) <span class="op">{</span></a>
<a class="sourceLine" id="cb183-2" data-line-number="2">  <span class="kw">let</span> hrefVal <span class="op">=</span> <span class="st">&#39;#&#39;</span> <span class="op">+</span> value<span class="op">;</span></a>
<a class="sourceLine" id="cb183-3" data-line-number="3">  <span class="kw">let</span> menuId <span class="op">=</span> <span class="at">$</span>(el).<span class="at">attr</span>(<span class="st">&#39;id&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb183-4" data-line-number="4">  <span class="at">$</span>(<span class="vs">`#</span><span class="sc">${</span>menuId<span class="sc">}</span><span class="vs"> a[href=&quot;</span><span class="sc">${</span>hrefVal<span class="sc">}</span><span class="vs">&quot;]`</span>).<span class="at">tab</span>(<span class="st">&#39;show&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb183-5" data-line-number="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb183-6" data-line-number="6"></a>
<a class="sourceLine" id="cb183-7" data-line-number="7">receiveMessage<span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> data) <span class="op">{</span></a>
<a class="sourceLine" id="cb183-8" data-line-number="8">  <span class="kw">this</span>.<span class="at">setValue</span>(el<span class="op">,</span> data)<span class="op">;</span></a>
<a class="sourceLine" id="cb183-9" data-line-number="9"><span class="op">}</span></a></code></pre></div>
<p>Besides, we have to create the <code>update_tabler_tab_item</code> function.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" data-line-number="1">update_tabler_tab_item &lt;-<span class="st"> </span><span class="cf">function</span>(inputId, value, <span class="dt">session =</span> <span class="kw">getDefaultReactiveDomain</span>()) {</a>
<a class="sourceLine" id="cb184-2" data-line-number="2">  session<span class="op">$</span><span class="kw">sendInputMessage</span>(inputId, <span class="dt">message =</span> value)</a>
<a class="sourceLine" id="cb184-3" data-line-number="3">}</a></code></pre></div>
<p><code>subscribe</code> will tell Shiny when to change the current input value and made it available
in the whole app. We may listen to multiple events, keeping in mind that events occur in the following order:</p>
<ul>
<li>hide.bs.tab (on the current active tab)</li>
<li>show.bs.tab (on the to-be-shown tab)</li>
<li>hidden.bs.tab (on the previous active tab, the same one as for the hide.bs.tab event)</li>
<li>shown.bs.tab (on the newly-active just-shown tab, the same one as for the show.bs.tab event)</li>
</ul>
<p>Hence, it makes more sense to listen to <code>shown.bs.tab</code> (wait the current tab to be shown).</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb185-1" data-line-number="1">subscribe<span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> callback) <span class="op">{</span></a>
<a class="sourceLine" id="cb185-2" data-line-number="2">  <span class="co">// important to use shown.bs.tab and not show.bs.tab!</span></a>
<a class="sourceLine" id="cb185-3" data-line-number="3">  <span class="at">$</span>(el).<span class="at">on</span>(<span class="st">&#39;shown.bs.tab.navbarMenuBinding&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb185-4" data-line-number="4">    <span class="at">callback</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb185-5" data-line-number="5">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb185-6" data-line-number="6"><span class="op">},</span></a>
<a class="sourceLine" id="cb185-7" data-line-number="7">  </a>
<a class="sourceLine" id="cb185-8" data-line-number="8">unsubscribe<span class="op">:</span> <span class="kw">function</span>(el) <span class="op">{</span></a>
<a class="sourceLine" id="cb185-9" data-line-number="9">  <span class="at">$</span>(el).<span class="at">off</span>(<span class="st">&#39;.navbarMenuBinding&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb185-10" data-line-number="10"><span class="op">}</span></a></code></pre></div>
<p>Below is a recap of the binding with the creation and registration included:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb186-1" data-line-number="1"><span class="at">$</span>(<span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb186-2" data-line-number="2">  <span class="co">// Input binding</span></a>
<a class="sourceLine" id="cb186-3" data-line-number="3">  <span class="kw">let</span> navbarMenuBinding <span class="op">=</span> <span class="kw">new</span> <span class="va">Shiny</span>.<span class="at">InputBinding</span>()</a>
<a class="sourceLine" id="cb186-4" data-line-number="4">  <span class="va">$</span>.<span class="at">extend</span>(navbarMenuBinding<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb186-5" data-line-number="5">    <span class="dt">find</span><span class="op">:</span> <span class="kw">function</span>(scope) <span class="op">{</span></a>
<a class="sourceLine" id="cb186-6" data-line-number="6">      <span class="cf">return</span> <span class="at">$</span>(scope).<span class="at">find</span>(<span class="st">&#39;.navbar-nav&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-7" data-line-number="7">    <span class="op">},</span></a>
<a class="sourceLine" id="cb186-8" data-line-number="8">    <span class="dt">initialize</span><span class="op">:</span> <span class="kw">function</span>(el) <span class="op">{</span></a>
<a class="sourceLine" id="cb186-9" data-line-number="9">      <span class="kw">let</span> menuId <span class="op">=</span> <span class="st">&#39;#&#39;</span> <span class="op">+</span> <span class="at">$</span>(el).<span class="at">attr</span>(<span class="st">&#39;id&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-10" data-line-number="10">      <span class="kw">let</span> activeTab <span class="op">=</span> <span class="at">$</span>(<span class="vs">`</span><span class="sc">${</span>menuId<span class="sc">}</span><span class="vs"> .nav-link.active`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-11" data-line-number="11">      <span class="co">// if multiple items are found</span></a>
<a class="sourceLine" id="cb186-12" data-line-number="12">      <span class="cf">if</span> (<span class="va">activeTab</span>.<span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb186-13" data-line-number="13">        <span class="kw">let</span> tabId <span class="op">=</span> <span class="at">$</span>(activeTab).<span class="at">attr</span>(<span class="st">&#39;data-value&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-14" data-line-number="14">        <span class="at">$</span>(activeTab).<span class="at">tab</span>(<span class="st">&#39;show&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-15" data-line-number="15">        <span class="at">$</span>(<span class="vs">`#</span><span class="sc">${</span>tabId<span class="sc">}</span><span class="vs">`</span>).<span class="at">addClass</span>(<span class="st">&#39;show active&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-16" data-line-number="16">      <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb186-17" data-line-number="17">        <span class="at">$</span>(<span class="vs">`</span><span class="sc">${</span>menuId<span class="sc">}</span><span class="vs"> .nav-link`</span>)</a>
<a class="sourceLine" id="cb186-18" data-line-number="18">          .<span class="at">first</span>()</a>
<a class="sourceLine" id="cb186-19" data-line-number="19">          .<span class="at">tab</span>(<span class="st">&#39;show&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-20" data-line-number="20">      <span class="op">}</span></a>
<a class="sourceLine" id="cb186-21" data-line-number="21">    <span class="op">},</span></a>
<a class="sourceLine" id="cb186-22" data-line-number="22">    <span class="co">// Given the DOM element for the input, return the value</span></a>
<a class="sourceLine" id="cb186-23" data-line-number="23">    <span class="dt">getValue</span><span class="op">:</span> <span class="kw">function</span>(el) <span class="op">{</span></a>
<a class="sourceLine" id="cb186-24" data-line-number="24">      <span class="kw">let</span> activeTab <span class="op">=</span> <span class="at">$</span>(el).<span class="at">find</span>(<span class="st">&#39;a&#39;</span>).<span class="at">filter</span>(<span class="st">&#39;nav-link active&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-25" data-line-number="25">      <span class="cf">return</span> <span class="at">$</span>(activeTab).<span class="at">attr</span>(<span class="st">&#39;data-value&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-26" data-line-number="26">    <span class="op">},</span></a>
<a class="sourceLine" id="cb186-27" data-line-number="27">    <span class="dt">setValue</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> value) <span class="op">{</span></a>
<a class="sourceLine" id="cb186-28" data-line-number="28">      <span class="kw">let</span> hrefVal <span class="op">=</span> <span class="st">&#39;#&#39;</span> <span class="op">+</span> value<span class="op">;</span></a>
<a class="sourceLine" id="cb186-29" data-line-number="29">      <span class="kw">let</span> menuId <span class="op">=</span> <span class="at">$</span>(el).<span class="at">attr</span>(<span class="st">&#39;id&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-30" data-line-number="30">      <span class="at">$</span>(<span class="vs">`#</span><span class="sc">${</span>menuId<span class="sc">}</span><span class="vs"> a[href=&quot;</span><span class="sc">${</span>hrefVal<span class="sc">}</span><span class="vs">&quot;]`</span>).<span class="at">tab</span>(<span class="st">&#39;show&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-31" data-line-number="31">    <span class="op">},</span></a>
<a class="sourceLine" id="cb186-32" data-line-number="32">    <span class="dt">receiveMessage</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> data) <span class="op">{</span></a>
<a class="sourceLine" id="cb186-33" data-line-number="33">      <span class="kw">this</span>.<span class="at">setValue</span>(el<span class="op">,</span> data)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-34" data-line-number="34">    <span class="op">},</span></a>
<a class="sourceLine" id="cb186-35" data-line-number="35">    <span class="dt">subscribe</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> callback) <span class="op">{</span></a>
<a class="sourceLine" id="cb186-36" data-line-number="36">      <span class="at">$</span>(el).<span class="at">on</span>(<span class="st">&#39;shown.bs.tab.navbarMenuBinding&#39;</span><span class="op">,</span> <span class="kw">function</span>(event) <span class="op">{</span></a>
<a class="sourceLine" id="cb186-37" data-line-number="37">        <span class="at">callback</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb186-38" data-line-number="38">      <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-39" data-line-number="39">    <span class="op">},</span></a>
<a class="sourceLine" id="cb186-40" data-line-number="40">    <span class="dt">unsubscribe</span><span class="op">:</span> <span class="kw">function</span>(el) <span class="op">{</span></a>
<a class="sourceLine" id="cb186-41" data-line-number="41">      <span class="at">$</span>(el).<span class="at">off</span>(<span class="st">&#39;.navbarMenuBinding&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-42" data-line-number="42">    <span class="op">}</span></a>
<a class="sourceLine" id="cb186-43" data-line-number="43">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-44" data-line-number="44">  </a>
<a class="sourceLine" id="cb186-45" data-line-number="45">  <span class="va">Shiny</span>.<span class="va">inputBindings</span>.<span class="at">register</span>(navbarMenuBinding<span class="op">,</span> <span class="st">&#39;text&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb186-46" data-line-number="46"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>We test the new <code>navbar_menu</code> binding below.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb187-1" data-line-number="1">ui &lt;-<span class="st"> </span><span class="kw">tabler_page</span>(</a>
<a class="sourceLine" id="cb187-2" data-line-number="2">  tags<span class="op">$</span><span class="kw">head</span>(</a>
<a class="sourceLine" id="cb187-3" data-line-number="3">    tags<span class="op">$</span><span class="kw">script</span>(</a>
<a class="sourceLine" id="cb187-4" data-line-number="4">      <span class="kw">HTML</span>(</a>
<a class="sourceLine" id="cb187-5" data-line-number="5">        <span class="st">&quot;$(function() {</span></a>
<a class="sourceLine" id="cb187-6" data-line-number="6"><span class="st">          // Input binding</span></a>
<a class="sourceLine" id="cb187-7" data-line-number="7"><span class="st">          let navbarMenuBinding = new Shiny.InputBinding()</span></a>
<a class="sourceLine" id="cb187-8" data-line-number="8"><span class="st">          $.extend(navbarMenuBinding, {</span></a>
<a class="sourceLine" id="cb187-9" data-line-number="9"><span class="st">            find: function(scope) {</span></a>
<a class="sourceLine" id="cb187-10" data-line-number="10"><span class="st">              return $(scope).find(&#39;.navbar-nav&#39;);</span></a>
<a class="sourceLine" id="cb187-11" data-line-number="11"><span class="st">            },</span></a>
<a class="sourceLine" id="cb187-12" data-line-number="12"><span class="st">            initialize: function(el) {</span></a>
<a class="sourceLine" id="cb187-13" data-line-number="13"><span class="st">              let menuId = &#39;#&#39; + $(el).attr(&#39;id&#39;);</span></a>
<a class="sourceLine" id="cb187-14" data-line-number="14"><span class="st">              let activeTab = $(`${menuId} .nav-link.active`);</span></a>
<a class="sourceLine" id="cb187-15" data-line-number="15"><span class="st">              // if multiple items are found</span></a>
<a class="sourceLine" id="cb187-16" data-line-number="16"><span class="st">              if (activeTab.length &gt; 0) {</span></a>
<a class="sourceLine" id="cb187-17" data-line-number="17"><span class="st">                let tabId = $(activeTab).attr(&#39;data-value&#39;);</span></a>
<a class="sourceLine" id="cb187-18" data-line-number="18"><span class="st">                $(activeTab).tab(&#39;show&#39;);</span></a>
<a class="sourceLine" id="cb187-19" data-line-number="19"><span class="st">                $(`#${tabId}`).addClass(&#39;show active&#39;);</span></a>
<a class="sourceLine" id="cb187-20" data-line-number="20"><span class="st">              } else {</span></a>
<a class="sourceLine" id="cb187-21" data-line-number="21"><span class="st">                $(`${menuId} .nav-link`)</span></a>
<a class="sourceLine" id="cb187-22" data-line-number="22"><span class="st">                  .first()</span></a>
<a class="sourceLine" id="cb187-23" data-line-number="23"><span class="st">                  .tab(&#39;show&#39;);</span></a>
<a class="sourceLine" id="cb187-24" data-line-number="24"><span class="st">              }</span></a>
<a class="sourceLine" id="cb187-25" data-line-number="25"><span class="st">            },</span></a>
<a class="sourceLine" id="cb187-26" data-line-number="26"><span class="st">            // Given the DOM element for the input, return the value</span></a>
<a class="sourceLine" id="cb187-27" data-line-number="27"><span class="st">            getValue: function(el) {</span></a>
<a class="sourceLine" id="cb187-28" data-line-number="28"><span class="st">              let currentTab = $(el).find(&#39;a&#39;).filter(&#39;.nav-link.active&#39;);</span></a>
<a class="sourceLine" id="cb187-29" data-line-number="29"><span class="st">              return $(currentTab).attr(&#39;data-value&#39;);</span></a>
<a class="sourceLine" id="cb187-30" data-line-number="30"><span class="st">            },</span></a>
<a class="sourceLine" id="cb187-31" data-line-number="31"><span class="st">            setValue: function(el, value) {</span></a>
<a class="sourceLine" id="cb187-32" data-line-number="32"><span class="st">              let hrefVal = &#39;#&#39; + value;</span></a>
<a class="sourceLine" id="cb187-33" data-line-number="33"><span class="st">              let menuId = $(el).attr(&#39;id&#39;);</span></a>
<a class="sourceLine" id="cb187-34" data-line-number="34"><span class="st">              $(`#${menuId} a[href=</span><span class="ch">\&quot;</span><span class="st">${hrefVal}</span><span class="ch">\&quot;</span><span class="st">]`).tab(&#39;show&#39;);</span></a>
<a class="sourceLine" id="cb187-35" data-line-number="35"><span class="st">            },</span></a>
<a class="sourceLine" id="cb187-36" data-line-number="36"><span class="st">            receiveMessage: function(el, data) {</span></a>
<a class="sourceLine" id="cb187-37" data-line-number="37"><span class="st">              this.setValue(el, data);</span></a>
<a class="sourceLine" id="cb187-38" data-line-number="38"><span class="st">            },</span></a>
<a class="sourceLine" id="cb187-39" data-line-number="39"><span class="st">            subscribe: function(el, callback) {</span></a>
<a class="sourceLine" id="cb187-40" data-line-number="40"><span class="st">              $(el).on(&#39;shown.bs.tab.navbarMenuBinding&#39;, function(event) {</span></a>
<a class="sourceLine" id="cb187-41" data-line-number="41"><span class="st">                callback();</span></a>
<a class="sourceLine" id="cb187-42" data-line-number="42"><span class="st">              });</span></a>
<a class="sourceLine" id="cb187-43" data-line-number="43"><span class="st">            },</span></a>
<a class="sourceLine" id="cb187-44" data-line-number="44"><span class="st">            unsubscribe: function(el) {</span></a>
<a class="sourceLine" id="cb187-45" data-line-number="45"><span class="st">              $(el).off(&#39;.navbarMenuBinding&#39;);</span></a>
<a class="sourceLine" id="cb187-46" data-line-number="46"><span class="st">            }</span></a>
<a class="sourceLine" id="cb187-47" data-line-number="47"><span class="st">          });</span></a>
<a class="sourceLine" id="cb187-48" data-line-number="48"><span class="st">          </span></a>
<a class="sourceLine" id="cb187-49" data-line-number="49"><span class="st">          Shiny.inputBindings.register(navbarMenuBinding, &#39;text&#39;);</span></a>
<a class="sourceLine" id="cb187-50" data-line-number="50"><span class="st">        });</span></a>
<a class="sourceLine" id="cb187-51" data-line-number="51"><span class="st">        &quot;</span></a>
<a class="sourceLine" id="cb187-52" data-line-number="52">      )</a>
<a class="sourceLine" id="cb187-53" data-line-number="53">    )</a>
<a class="sourceLine" id="cb187-54" data-line-number="54">  ),</a>
<a class="sourceLine" id="cb187-55" data-line-number="55">  <span class="kw">tabler_navbar</span>(</a>
<a class="sourceLine" id="cb187-56" data-line-number="56">    <span class="dt">brand_url =</span> <span class="st">&quot;https://preview-dev.tabler.io&quot;</span>, </a>
<a class="sourceLine" id="cb187-57" data-line-number="57">    <span class="dt">brand_image =</span> <span class="st">&quot;https://preview-dev.tabler.io/static/logo.svg&quot;</span>, </a>
<a class="sourceLine" id="cb187-58" data-line-number="58">    <span class="dt">nav_menu =</span> <span class="kw">tabler_navbar_menu</span>(</a>
<a class="sourceLine" id="cb187-59" data-line-number="59">      <span class="dt">id =</span> <span class="st">&quot;current_tab&quot;</span>,</a>
<a class="sourceLine" id="cb187-60" data-line-number="60">      <span class="kw">tabler_navbar_menu_item</span>(</a>
<a class="sourceLine" id="cb187-61" data-line-number="61">        <span class="dt">text =</span> <span class="st">&quot;Tab 1&quot;</span>,</a>
<a class="sourceLine" id="cb187-62" data-line-number="62">        <span class="dt">icon =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb187-63" data-line-number="63">        <span class="dt">tabName =</span> <span class="st">&quot;tab1&quot;</span>,</a>
<a class="sourceLine" id="cb187-64" data-line-number="64">        <span class="dt">selected =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb187-65" data-line-number="65">      ),</a>
<a class="sourceLine" id="cb187-66" data-line-number="66">      <span class="kw">tabler_navbar_menu_item</span>(</a>
<a class="sourceLine" id="cb187-67" data-line-number="67">        <span class="dt">text =</span> <span class="st">&quot;Tab 2&quot;</span>,</a>
<a class="sourceLine" id="cb187-68" data-line-number="68">        <span class="dt">icon =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb187-69" data-line-number="69">        <span class="dt">tabName =</span> <span class="st">&quot;tab2&quot;</span></a>
<a class="sourceLine" id="cb187-70" data-line-number="70">      )</a>
<a class="sourceLine" id="cb187-71" data-line-number="71">    ),</a>
<a class="sourceLine" id="cb187-72" data-line-number="72">    <span class="kw">tabler_button</span>(<span class="st">&quot;update&quot;</span>, <span class="st">&quot;Change tab&quot;</span>, <span class="dt">icon =</span> <span class="kw">icon</span>(<span class="st">&quot;exchange-alt&quot;</span>))</a>
<a class="sourceLine" id="cb187-73" data-line-number="73">  ),</a>
<a class="sourceLine" id="cb187-74" data-line-number="74">  <span class="kw">tabler_body</span>(</a>
<a class="sourceLine" id="cb187-75" data-line-number="75">    <span class="kw">tabler_tab_items</span>(</a>
<a class="sourceLine" id="cb187-76" data-line-number="76">      <span class="kw">tabler_tab_item</span>(</a>
<a class="sourceLine" id="cb187-77" data-line-number="77">        <span class="dt">tabName =</span> <span class="st">&quot;tab1&quot;</span>,</a>
<a class="sourceLine" id="cb187-78" data-line-number="78">        <span class="kw">sliderInput</span>(</a>
<a class="sourceLine" id="cb187-79" data-line-number="79">          <span class="st">&quot;obs&quot;</span>, </a>
<a class="sourceLine" id="cb187-80" data-line-number="80">          <span class="st">&quot;Number of observations:&quot;</span>,</a>
<a class="sourceLine" id="cb187-81" data-line-number="81">          <span class="dt">min =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb187-82" data-line-number="82">          <span class="dt">max =</span> <span class="dv">1000</span>, </a>
<a class="sourceLine" id="cb187-83" data-line-number="83">          <span class="dt">value =</span> <span class="dv">500</span></a>
<a class="sourceLine" id="cb187-84" data-line-number="84">        ),</a>
<a class="sourceLine" id="cb187-85" data-line-number="85">        <span class="kw">plotOutput</span>(<span class="st">&quot;distPlot&quot;</span>)</a>
<a class="sourceLine" id="cb187-86" data-line-number="86">      ),</a>
<a class="sourceLine" id="cb187-87" data-line-number="87">      <span class="kw">tabler_tab_item</span>(</a>
<a class="sourceLine" id="cb187-88" data-line-number="88">        <span class="dt">tabName =</span> <span class="st">&quot;tab2&quot;</span>,</a>
<a class="sourceLine" id="cb187-89" data-line-number="89">        <span class="kw">p</span>(<span class="st">&quot;Second Tab&quot;</span>)</a>
<a class="sourceLine" id="cb187-90" data-line-number="90">      )</a>
<a class="sourceLine" id="cb187-91" data-line-number="91">    ),</a>
<a class="sourceLine" id="cb187-92" data-line-number="92">    <span class="dt">footer =</span> <span class="kw">tabler_footer</span>(</a>
<a class="sourceLine" id="cb187-93" data-line-number="93">      <span class="dt">left =</span> <span class="st">&quot;Rstats, 2020&quot;</span>, </a>
<a class="sourceLine" id="cb187-94" data-line-number="94">      <span class="dt">right =</span> <span class="kw">a</span>(<span class="dt">href =</span> <span class="st">&quot;https://www.google.com&quot;</span>)</a>
<a class="sourceLine" id="cb187-95" data-line-number="95">    )</a>
<a class="sourceLine" id="cb187-96" data-line-number="96">  )</a>
<a class="sourceLine" id="cb187-97" data-line-number="97">)</a>
<a class="sourceLine" id="cb187-98" data-line-number="98">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb187-99" data-line-number="99">  output<span class="op">$</span>distPlot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb187-100" data-line-number="100">    <span class="kw">hist</span>(<span class="kw">rnorm</span>(input<span class="op">$</span>obs))</a>
<a class="sourceLine" id="cb187-101" data-line-number="101">  })</a>
<a class="sourceLine" id="cb187-102" data-line-number="102">  </a>
<a class="sourceLine" id="cb187-103" data-line-number="103">  <span class="kw">observeEvent</span>(input<span class="op">$</span>current_tab, {</a>
<a class="sourceLine" id="cb187-104" data-line-number="104">    <span class="kw">showNotification</span>(</a>
<a class="sourceLine" id="cb187-105" data-line-number="105">      <span class="kw">paste</span>(<span class="st">&quot;Hello&quot;</span>, input<span class="op">$</span>current_tab), </a>
<a class="sourceLine" id="cb187-106" data-line-number="106">      <span class="dt">type =</span> <span class="st">&quot;message&quot;</span>,</a>
<a class="sourceLine" id="cb187-107" data-line-number="107">      <span class="dt">duration =</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb187-108" data-line-number="108">    )</a>
<a class="sourceLine" id="cb187-109" data-line-number="109">  })</a>
<a class="sourceLine" id="cb187-110" data-line-number="110">  </a>
<a class="sourceLine" id="cb187-111" data-line-number="111">  <span class="kw">observeEvent</span>(input<span class="op">$</span>update, {</a>
<a class="sourceLine" id="cb187-112" data-line-number="112">    newTab &lt;-<span class="st"> </span><span class="cf">if</span> (input<span class="op">$</span>current_tab <span class="op">==</span><span class="st"> &quot;tab1&quot;</span>) <span class="st">&quot;tab2&quot;</span> <span class="cf">else</span> <span class="st">&quot;tab1&quot;</span></a>
<a class="sourceLine" id="cb187-113" data-line-number="113">    <span class="kw">update_tabler_tab_item</span>(<span class="st">&quot;current_tab&quot;</span>, newTab)</a>
<a class="sourceLine" id="cb187-114" data-line-number="114">  })</a>
<a class="sourceLine" id="cb187-115" data-line-number="115">}</a>
<a class="sourceLine" id="cb187-116" data-line-number="116"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p>Here we are!</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="custom-templates-skeleton.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="custom-templates-interactivity.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/custom-templates-inputs.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["outstanding-shiny-ui.pdf", "outstanding-shiny-ui.epub", "outstanding-shiny-ui.mobi"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
