<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 28 R + Shiny + React: welcome {reactR} | Outstanding User Interfaces with Shiny</title>
<meta name="author" content="David Granjon">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.4/tabs.js"></script><script src="libs/bs3compat-0.2.4/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Outstanding User Interfaces with Shiny</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="foreword.html">Foreword</a></li>
<li class="book-part">Introduction</li>
<li><a class="" href="web-intro.html"><span class="header-section-number">1</span> Shiny and the Web</a></li>
<li><a class="" href="web-dependencies.html"><span class="header-section-number">2</span> Discover Shiny dependencies</a></li>
<li class="book-part">From R to HTML: discover and master {htmltools}:</li>
<li><a class="" href="htmltools-overview.html"><span class="header-section-number">3</span> htmltools overview</a></li>
<li><a class="" href="htmltools-dependencies.html"><span class="header-section-number">4</span> Dependency utilities</a></li>
<li class="book-part">Beautify with CSS and SASS</li>
<li><a class="" href="beautify-css.html"><span class="header-section-number">5</span> CSS for Shiny</a></li>
<li><a class="" href="beautify-sass.html"><span class="header-section-number">6</span> Introduction to SASS</a></li>
<li><a class="" href="beautify-with-fresh.html"><span class="header-section-number">7</span> Beautify with fresh</a></li>
<li><a class="" href="beautify-with-bootstraplib.html"><span class="header-section-number">8</span> Beautify with {bslib}</a></li>
<li><a class="" href="beautify-other-tools.html"><span class="header-section-number">9</span> Other tools</a></li>
<li class="book-part">Unleash interactivity with JavaScript</li>
<li><a class="" href="survival-kit-javascript.html"><span class="header-section-number">10</span> JavaScript for Shiny</a></li>
<li><a class="" href="shiny-intro.html"><span class="header-section-number">11</span> Shiny’s internal: session and websockets</a></li>
<li><a class="" href="shiny-input-system.html"><span class="header-section-number">12</span> Shiny’s input system</a></li>
<li><a class="" href="shiny-input-lifecycle.html"><span class="header-section-number">13</span> Shiny inputs lifecycles</a></li>
<li><a class="" href="shiny-input-gems.html"><span class="header-section-number">14</span> Hidden gems about inputs</a></li>
<li><a class="" href="shiny-custom-handler.html"><span class="header-section-number">15</span> Dynamically manage content with handlers</a></li>
<li class="book-part">Practice 1: a dashboard template</li>
<li><a class="" href="custom-templates-selection.html"><span class="header-section-number">16</span> Template selection</a></li>
<li><a class="" href="custom-templates-dependencies.html"><span class="header-section-number">17</span> Define dependencies</a></li>
<li><a class="" href="custom-templates-skeleton.html"><span class="header-section-number">18</span> Template skeleton</a></li>
<li><a class="" href="custom-templates-testing.html"><span class="header-section-number">19</span> Testing and validating templates elements</a></li>
<li><a class="" href="custom-templates-inputs.html"><span class="header-section-number">20</span> Develop custom input widgets</a></li>
<li><a class="" href="custom-templates-interactivity.html"><span class="header-section-number">21</span> Adding more interactivity</a></li>
<li class="book-part">Toward a better workflow</li>
<li><a class="" href="workflow-charpente.html"><span class="header-section-number">22</span> Introduction to {charpente}</a></li>
<li class="book-part">Case study 2: Mobile development with Shiny</li>
<li><a class="" href="mobile-shiny-intro.html"><span class="header-section-number">23</span> Introduction</a></li>
<li><a class="" href="mobile-shinyMobile.html"><span class="header-section-number">24</span> Reconstruct {shinyMobile}</a></li>
<li><a class="" href="mobile-pwa.html"><span class="header-section-number">25</span> {shinyMobile} and PWA</a></li>
<li><a class="" href="mobile-widgets.html"><span class="header-section-number">26</span> Design widgets</a></li>
<li><a class="" href="mobile-going-further.html"><span class="header-section-number">27</span> Going further</a></li>
<li class="book-part">Going further</li>
<li><a class="active" href="going-further-reactR.html"><span class="header-section-number">28</span> R + Shiny + React: welcome {reactR}</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/DivadNojnarg/outstanding-shiny-ui">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="going-further-reactR" class="section level1">
<h1>
<span class="header-section-number">28</span> R + Shiny + React: welcome <code>{reactR}</code><a class="anchor" aria-label="anchor" href="#going-further-reactR"><i class="fas fa-link"></i></a>
</h1>
<p><a href="https://reactjs.org/">React</a> is an open source library designed to quickly develop user interfaces or UI components, on the front end.
It has been developed by <a href="https://github.com/facebook/react">Facebook</a> and the community (more than 1500 contributors)
and made public in May 29 2013. It is currently used worldwide and has around 163k stars on the
Github ranking and widely impacts the mobile market, through the <a href="https://reactnative.dev/">React Native</a> library.<br>
React is also really convenient to develop attractive documentations with <a href="https://v2.docusaurus.io/">docusaurus</a>.
If you ever have built user interfaces with pure JS, you might like React!</p>
<p>Below, we give a short introduction to the React ecosystem and see how we can benefit from it from the
R Shiny side.</p>
<div id="quick-introduction-to-react" class="section level2">
<h2>
<span class="header-section-number">28.1</span> Quick introduction to React<a class="anchor" aria-label="anchor" href="#quick-introduction-to-react"><i class="fas fa-link"></i></a>
</h2>
<p>To understand React there are few prerequisites notably basic HTML/CSS/JS knowledge, especially JS modules (see
section <a href="survival-kit-javascript.html#about-js-modules">10.4.6.1</a>). However, if you managed to reach this chapter, you should not worry too much.</p>
<div id="setup-1" class="section level3">
<h3>
<span class="header-section-number">28.1.1</span> Setup<a class="anchor" aria-label="anchor" href="#setup-1"><i class="fas fa-link"></i></a>
</h3>
<p><code>Node</code> and <code>npm</code> are required. If you are not sure, run:</p>
<pre class="shell"><code>node -v
npm -v</code></pre>
<p>At that stage it is also good to have <a href="https://classic.yarnpkg.com/en/docs/install#mac-stable"><code>yarn</code></a> as we’ll need it for <a href="https://github.com/react-R/reactR">reactR</a>.</p>
<p>If nothing is returned, please refer to section <a href="survival-kit-javascript.html#install-node">10.3.1</a>. To initiate a React <a href="https://create-react-app.dev/">project</a>,
we leverage the <code>npx</code> command:</p>
<pre><code>npx create-react-app &lt;PROJECT_NAME&gt;</code></pre>
<p>Replace <code>&lt;PROJECT_NAME&gt;</code> by the real name of your project. If this seems intimidating,
keep in mind this is the same concept has using the <a href="https://github.com/ThinkR-open/golem">golem</a> <a href="https://github.com/ThinkR-open/golem">package</a>
to initiate the creation of robust shiny projects, except that we work from the terminal.</p>
<p>Once done (the package initialization takes some time),
move to the project folder and launch the demo app:</p>
<pre><code>cd &lt;PROJECT_NAME&gt; &amp;&amp; npm start</code></pre>
<p>If you have yarn, <code>yarn start</code> also works.</p>
<p>You should see something similar to Figure <a href="going-further-reactR.html#fig:basic-react-app">28.1</a>.</p>
<div class="figure">
<span id="fig:basic-react-app"></span>
<img src="images/going-further/basic-react-app.png" alt="npm start opens the react app" width="100%"><p class="caption">
FIGURE 28.1: npm start opens the react app
</p>
</div>
</div>
<div id="basics-1" class="section level3">
<h3>
<span class="header-section-number">28.1.2</span> Basics<a class="anchor" aria-label="anchor" href="#basics-1"><i class="fas fa-link"></i></a>
</h3>
<p>We are now all set up to start learning the basics of React. Among all created files,
notice the <code>/src/app.js</code> file. Inside the <code>App</code> function, we remove all the content inside
the <code>return</code> statement to put a simple <code>&lt;h1&gt;Hello, world!&lt;/h1&gt;</code> HTML title. We also clean the imports
as we don’t need any CSS and logo anymore. We obtain:</p>
<div class="sourceCode" id="cb682"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb682-1"><a href="going-further-reactR.html#cb682-1"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb682-2"><a href="going-further-reactR.html#cb682-2"></a>  <span class="cf">return</span> (</span>
<span id="cb682-3"><a href="going-further-reactR.html#cb682-3"></a>    <span class="kw">&lt;h1&gt;</span>Hello, world!<span class="kw">&lt;/h1&gt;</span></span>
<span id="cb682-4"><a href="going-further-reactR.html#cb682-4"></a>  )<span class="op">;</span></span>
<span id="cb682-5"><a href="going-further-reactR.html#cb682-5"></a><span class="op">}</span></span>
<span id="cb682-6"><a href="going-further-reactR.html#cb682-6"></a></span>
<span id="cb682-7"><a href="going-further-reactR.html#cb682-7"></a><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span> <span class="co">// don't remove, this is needed by index.js</span></span></code></pre></div>
<p>Once done, we run <code>npm build</code> (or <code>yarn build</code>), to rebuild the JS code and <code>npm start</code> to
restart the server and preview the app. In practice, once the server is launched, there is
no need to restart it whenever the code is updated. A simple save will refresh the interface!</p>
<p>The code you see above is a React component. The definition is rather simple: it is a function that returns
a moreless complex piece of UI. How are components rendered by React?</p>
<p>So far, we didn’t have a look at the <code>/src/index.js</code> script. Inside we find:</p>
<div class="sourceCode" id="cb683"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb683-1"><a href="going-further-reactR.html#cb683-1"></a><span class="va">ReactDOM</span>.<span class="at">render</span>(</span>
<span id="cb683-2"><a href="going-further-reactR.html#cb683-2"></a>  App<span class="op">,</span></span>
<span id="cb683-3"><a href="going-further-reactR.html#cb683-3"></a>  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">'root'</span>)</span>
<span id="cb683-4"><a href="going-further-reactR.html#cb683-4"></a>)<span class="op">;</span></span></code></pre></div>
<p><strong>Note</strong>: recent version of <code>npx create-react-app</code> have <code>&lt;React.StrictMode&gt;&lt;App /&gt;&lt;/React.StrictMode&gt;</code> instead
of <code>App</code>, which does the same thing. You may also find <code>&lt;App /&gt;</code>. In practice, we rarely modify this part.</p>
<p>In short, this inserts the <code>App</code> component inside the element having <code>root</code> as id in the main
HTML page. This HTML skeleton may be found in the <code>public/index.html</code> folder. You may guess that at the end
of the day, our app will be composed of multiple bricks and called <code>ReactDOM.render</code> on the top level component.</p>
<div id="about-jsx" class="section level4">
<h4>
<span class="header-section-number">28.1.2.1</span> About JSX<a class="anchor" aria-label="anchor" href="#about-jsx"><i class="fas fa-link"></i></a>
</h4>
<p>We just wrote our first React component. Didn’t you notice something weird in that code?
JS and HTML are mixed, in what we called JSX, that is a syntax extension to JS. JSX makes the code
less verbose, for instance:</p>
<div class="sourceCode" id="cb684"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb684-1"><a href="going-further-reactR.html#cb684-1"></a><span class="va">React</span>.<span class="at">createElement</span>(</span>
<span id="cb684-2"><a href="going-further-reactR.html#cb684-2"></a>  <span class="st">'h1'</span><span class="op">,</span></span>
<span id="cb684-3"><a href="going-further-reactR.html#cb684-3"></a>  <span class="st">'Hello, world!'</span></span>
<span id="cb684-4"><a href="going-further-reactR.html#cb684-4"></a>)<span class="op">;</span></span></code></pre></div>
<p>does exactly the same thing as above but when the code becomes more complex, it is nearly
impossible to read.</p>
<p>Let’s see how to pass variables into JSX. We want to show <code>Hello, &lt;Your Name&gt;</code>, we store
the name in a variable and modify the <code>app.js</code> code accordingly:</p>
<div class="sourceCode" id="cb685"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb685-1"><a href="going-further-reactR.html#cb685-1"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb685-2"><a href="going-further-reactR.html#cb685-2"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">"David"</span><span class="op">;</span></span>
<span id="cb685-3"><a href="going-further-reactR.html#cb685-3"></a>  <span class="cf">return</span> (</span>
<span id="cb685-4"><a href="going-further-reactR.html#cb685-4"></a>    <span class="kw">&lt;h1&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb685-5"><a href="going-further-reactR.html#cb685-5"></a>  )<span class="op">;</span></span>
<span id="cb685-6"><a href="going-further-reactR.html#cb685-6"></a><span class="op">}</span></span></code></pre></div>
<p>Expressions are passed within curly brackets <code>{expression}</code> and you may even call functions inside.</p>
<p>Tag attributes also require curly brackets. Let’s modify the title tag to give it a color and
a size.</p>
<div class="sourceCode" id="cb686"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb686-1"><a href="going-further-reactR.html#cb686-1"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb686-2"><a href="going-further-reactR.html#cb686-2"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">"David"</span><span class="op">;</span></span>
<span id="cb686-3"><a href="going-further-reactR.html#cb686-3"></a>  <span class="cf">return</span> (</span>
<span id="cb686-4"><a href="going-further-reactR.html#cb686-4"></a>    <span class="kw">&lt;h1</span> <span class="ot">style</span><span class="op">=</span><span class="va">{</span>color<span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> fontSize<span class="op">:</span> <span class="dv">40</span><span class="va">}</span><span class="kw">&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb686-5"><a href="going-further-reactR.html#cb686-5"></a>  )<span class="op">;</span></span>
<span id="cb686-6"><a href="going-further-reactR.html#cb686-6"></a><span class="op">}</span></span></code></pre></div>
<p>Try to save. Why does this fail? We can’t pass multiple object properties inside a single <code>{}</code>.
We need either double brackets like <code>{{object properties: values, ...}}</code> or to store the object in
a variable before:</p>
<div class="sourceCode" id="cb687"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb687-1"><a href="going-further-reactR.html#cb687-1"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb687-2"><a href="going-further-reactR.html#cb687-2"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">"David"</span><span class="op">;</span></span>
<span id="cb687-3"><a href="going-further-reactR.html#cb687-3"></a>  <span class="cf">return</span> (</span>
<span id="cb687-4"><a href="going-further-reactR.html#cb687-4"></a>    <span class="kw">&lt;h1</span> <span class="ot">style</span><span class="op">=</span><span class="va">{</span><span class="op">{</span><span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">40</span><span class="op">}</span><span class="va">}</span><span class="kw">&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb687-5"><a href="going-further-reactR.html#cb687-5"></a>  )<span class="op">;</span></span>
<span id="cb687-6"><a href="going-further-reactR.html#cb687-6"></a><span class="op">}</span></span>
<span id="cb687-7"><a href="going-further-reactR.html#cb687-7"></a></span>
<span id="cb687-8"><a href="going-further-reactR.html#cb687-8"></a><span class="co">// OR</span></span>
<span id="cb687-9"><a href="going-further-reactR.html#cb687-9"></a></span>
<span id="cb687-10"><a href="going-further-reactR.html#cb687-10"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb687-11"><a href="going-further-reactR.html#cb687-11"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">"David"</span><span class="op">;</span></span>
<span id="cb687-12"><a href="going-further-reactR.html#cb687-12"></a>  <span class="kw">const</span> myStyle <span class="op">=</span> <span class="op">{</span></span>
<span id="cb687-13"><a href="going-further-reactR.html#cb687-13"></a>    <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> </span>
<span id="cb687-14"><a href="going-further-reactR.html#cb687-14"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">40</span></span>
<span id="cb687-15"><a href="going-further-reactR.html#cb687-15"></a>  <span class="op">}</span></span>
<span id="cb687-16"><a href="going-further-reactR.html#cb687-16"></a>  <span class="cf">return</span> (</span>
<span id="cb687-17"><a href="going-further-reactR.html#cb687-17"></a>    <span class="kw">&lt;h1</span> <span class="ot">style</span><span class="op">=</span><span class="va">{</span>myStyle<span class="va">}</span><span class="kw">&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb687-18"><a href="going-further-reactR.html#cb687-18"></a>  )<span class="op">;</span></span>
<span id="cb687-19"><a href="going-further-reactR.html#cb687-19"></a><span class="op">}</span></span></code></pre></div>
<p>Notice that we write CSS properties following the camelCase syntax, <code>font-size</code> being equivalent to <code>fontSize</code>.</p>
</div>
<div id="combining-components" class="section level4">
<h4>
<span class="header-section-number">28.1.2.2</span> Combining components<a class="anchor" aria-label="anchor" href="#combining-components"><i class="fas fa-link"></i></a>
</h4>
<p>The whole interest is to combine multiple components to create reusable pieces. We edit the above code
to create a <code>SayHello</code> component. Notice the <code>props</code> parameter. It is a way to pass configuration from the
parent component. In that case, we want to display the person name, that is <code>props.name</code>. In the meantime,
we edit the <code>App</code> parent component and call <code>SayHello</code> three times, passing a different name like <code>&lt;SayHello name="David" /&gt;</code> (this is the reason why we recover <code>props.name</code> in the lower level component):</p>
<div class="sourceCode" id="cb688"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb688-1"><a href="going-further-reactR.html#cb688-1"></a><span class="kw">function</span> <span class="at">SayHello</span>(props) <span class="op">{</span></span>
<span id="cb688-2"><a href="going-further-reactR.html#cb688-2"></a>  <span class="cf">return</span> (</span>
<span id="cb688-3"><a href="going-further-reactR.html#cb688-3"></a>    <span class="kw">&lt;h1&gt;</span>Hello, <span class="va">{props</span>.<span class="at">name</span><span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb688-4"><a href="going-further-reactR.html#cb688-4"></a>  )<span class="op">;</span></span>
<span id="cb688-5"><a href="going-further-reactR.html#cb688-5"></a><span class="op">}</span></span>
<span id="cb688-6"><a href="going-further-reactR.html#cb688-6"></a></span>
<span id="cb688-7"><a href="going-further-reactR.html#cb688-7"></a></span>
<span id="cb688-8"><a href="going-further-reactR.html#cb688-8"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb688-9"><a href="going-further-reactR.html#cb688-9"></a>  <span class="cf">return</span>(</span>
<span id="cb688-10"><a href="going-further-reactR.html#cb688-10"></a>  <span class="kw">&lt;&gt;</span></span>
<span id="cb688-11"><a href="going-further-reactR.html#cb688-11"></a>    <span class="fu">&lt;SayHello</span> <span class="ot">name</span><span class="op">=</span><span class="st">"David"</span> <span class="fu">/&gt;</span></span>
<span id="cb688-12"><a href="going-further-reactR.html#cb688-12"></a>    <span class="fu">&lt;SayHello</span> <span class="ot">name</span><span class="op">=</span><span class="st">"Lisa"</span> <span class="fu">/&gt;</span></span>
<span id="cb688-13"><a href="going-further-reactR.html#cb688-13"></a>    <span class="fu">&lt;SayHello</span> <span class="ot">name</span><span class="op">=</span><span class="st">"Simon"</span> <span class="fu">/&gt;</span></span>
<span id="cb688-14"><a href="going-further-reactR.html#cb688-14"></a>  <span class="kw">&lt;/&gt;</span></span>
<span id="cb688-15"><a href="going-further-reactR.html#cb688-15"></a>  )<span class="op">;</span></span>
<span id="cb688-16"><a href="going-further-reactR.html#cb688-16"></a><span class="op">}</span></span></code></pre></div>
<p>Notice the enclosing <code>&lt;&gt;...&lt;/&gt;</code>. This is called a React fragment and useful if we don’t want to
insert any extra <code>&lt;div&gt;</code> in the DOM.</p>
<p>We could be even more efficient by leveraging the lists capabilities. We create an array
of names and apply the <code>map</code> method to return the corresponding <code>&lt;SayHello /&gt;</code> sub-component:</p>
<div class="sourceCode" id="cb689"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb689-1"><a href="going-further-reactR.html#cb689-1"></a><span class="kw">const</span> names <span class="op">=</span> [<span class="st">"David"</span><span class="op">,</span> <span class="st">"Lisa"</span><span class="op">,</span> <span class="st">"Simon"</span>]<span class="op">;</span></span>
<span id="cb689-2"><a href="going-further-reactR.html#cb689-2"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb689-3"><a href="going-further-reactR.html#cb689-3"></a>  <span class="kw">const</span> sayHelloToAll <span class="op">=</span> <span class="va">names</span>.<span class="at">map</span>((name) <span class="kw">=&gt; </span><span class="fu">&lt;SayHello</span> <span class="ot">key</span><span class="op">=</span><span class="va">{</span>name<span class="va">}</span> <span class="ot">name</span><span class="op">=</span><span class="va">{</span>name<span class="va">}</span> <span class="fu">/&gt;</span>)<span class="op">;</span> </span>
<span id="cb689-4"><a href="going-further-reactR.html#cb689-4"></a>  <span class="cf">return</span>(sayHelloToAll)<span class="op">;</span></span>
<span id="cb689-5"><a href="going-further-reactR.html#cb689-5"></a><span class="op">}</span></span></code></pre></div>
<p>By convention, all elements inside a <code>map</code> require keys.</p>
<p>Props are <strong>read-only</strong> and must not be modified withing their own component.
How do we update components?</p>
</div>
<div id="component-state" class="section level4">
<h4>
<span class="header-section-number">28.1.2.3</span> Component state<a class="anchor" aria-label="anchor" href="#component-state"><i class="fas fa-link"></i></a>
</h4>
<p>A component state is private and controlled by this same component. Since React 16.8 and the introduction of <strong>hooks</strong>, this is not necessary to convert the component function to a <a href="https://reactjs.org/docs/components-and-props.html#function-and-class-components">class</a>.
The easiest example to illustrate hooks capabilities is the button. Each time, we click on a button,
we want to keep the current number of clicks in a state, like the <code><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">shiny::actionButton</a></code>. We start by
importing the <code>useState</code> function from <code>react</code> and create a new <code>ActionButton</code> component.
Inside, we set the state with <code>useState</code> that create the state variable <code>count</code> as well as the function to
update it, namely <code>setCount</code>. This way to create 2 variables at once is called array destructuring.
We set the initial number of counts to 0:</p>
<div class="sourceCode" id="cb690"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb690-1"><a href="going-further-reactR.html#cb690-1"></a><span class="im">import</span> <span class="op">{</span>useState<span class="op">}</span> <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb690-2"><a href="going-further-reactR.html#cb690-2"></a></span>
<span id="cb690-3"><a href="going-further-reactR.html#cb690-3"></a><span class="kw">function</span> <span class="at">ActionButton</span>() <span class="op">{</span></span>
<span id="cb690-4"><a href="going-further-reactR.html#cb690-4"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="at">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb690-5"><a href="going-further-reactR.html#cb690-5"></a><span class="op">}</span></span></code></pre></div>
<p>Next step is to create the button skeleton. We provide an <code>onClick</code> property that updates
the button state.Inside, we write an anonymous function which calls <code>setCount</code> and increment
the count value by 1. At this point, you may replace the <code>app.js</code> content by:</p>
<div class="sourceCode" id="cb691"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb691-1"><a href="going-further-reactR.html#cb691-1"></a><span class="im">import</span> <span class="op">{</span>useState<span class="op">}</span> <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb691-2"><a href="going-further-reactR.html#cb691-2"></a></span>
<span id="cb691-3"><a href="going-further-reactR.html#cb691-3"></a><span class="kw">function</span> <span class="at">ActionButton</span>() <span class="op">{</span></span>
<span id="cb691-4"><a href="going-further-reactR.html#cb691-4"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="at">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb691-5"><a href="going-further-reactR.html#cb691-5"></a>  <span class="cf">return</span>(</span>
<span id="cb691-6"><a href="going-further-reactR.html#cb691-6"></a>    <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setCount</span>(count <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb691-7"><a href="going-further-reactR.html#cb691-7"></a>      Number of clicks: <span class="va">{</span>count<span class="va">}</span></span>
<span id="cb691-8"><a href="going-further-reactR.html#cb691-8"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb691-9"><a href="going-further-reactR.html#cb691-9"></a>  )<span class="op">;</span></span>
<span id="cb691-10"><a href="going-further-reactR.html#cb691-10"></a><span class="op">}</span></span>
<span id="cb691-11"><a href="going-further-reactR.html#cb691-11"></a></span>
<span id="cb691-12"><a href="going-further-reactR.html#cb691-12"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb691-13"><a href="going-further-reactR.html#cb691-13"></a>  <span class="cf">return</span> (</span>
<span id="cb691-14"><a href="going-further-reactR.html#cb691-14"></a>    <span class="fu">&lt;ActionButton</span> <span class="fu">/&gt;</span></span>
<span id="cb691-15"><a href="going-further-reactR.html#cb691-15"></a>  )<span class="op">;</span></span>
<span id="cb691-16"><a href="going-further-reactR.html#cb691-16"></a><span class="op">}</span></span>
<span id="cb691-17"><a href="going-further-reactR.html#cb691-17"></a></span>
<span id="cb691-18"><a href="going-further-reactR.html#cb691-18"></a><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></span></code></pre></div>
<p>We may improve the previous app and add a reset button within the <code>ActionButton</code> component that
sets the count back to 0:</p>
<div class="sourceCode" id="cb692"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb692-1"><a href="going-further-reactR.html#cb692-1"></a><span class="kw">function</span> <span class="at">ActionButton</span>() <span class="op">{</span></span>
<span id="cb692-2"><a href="going-further-reactR.html#cb692-2"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="at">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb692-3"><a href="going-further-reactR.html#cb692-3"></a>  <span class="cf">return</span>(</span>
<span id="cb692-4"><a href="going-further-reactR.html#cb692-4"></a>    <span class="kw">&lt;&gt;</span></span>
<span id="cb692-5"><a href="going-further-reactR.html#cb692-5"></a>    <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setCount</span>(count <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb692-6"><a href="going-further-reactR.html#cb692-6"></a>      Number of clicks: <span class="va">{</span>count<span class="va">}</span></span>
<span id="cb692-7"><a href="going-further-reactR.html#cb692-7"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb692-8"><a href="going-further-reactR.html#cb692-8"></a>    <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setCount</span>(<span class="dv">0</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb692-9"><a href="going-further-reactR.html#cb692-9"></a>      Reset</span>
<span id="cb692-10"><a href="going-further-reactR.html#cb692-10"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb692-11"><a href="going-further-reactR.html#cb692-11"></a>    <span class="kw">&lt;/&gt;</span></span>
<span id="cb692-12"><a href="going-further-reactR.html#cb692-12"></a>  )<span class="op">;</span></span>
<span id="cb692-13"><a href="going-further-reactR.html#cb692-13"></a><span class="op">}</span></span></code></pre></div>
<p>It would make more sense to only show the reset button once the button has been clicked,
at least once. We define the <code>isResetVisible</code> variable which is <code>true</code> whenever the
count is higher than 0 and <code>false</code> if the count is 0. We store the reset button in a variable
and only return something if <code>isResetVisible</code> is <code>true</code>:</p>
<div class="sourceCode" id="cb693"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb693-1"><a href="going-further-reactR.html#cb693-1"></a><span class="kw">function</span> <span class="at">ActionButton</span>() <span class="op">{</span></span>
<span id="cb693-2"><a href="going-further-reactR.html#cb693-2"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="at">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb693-3"><a href="going-further-reactR.html#cb693-3"></a>  <span class="kw">const</span> isResetVisible <span class="op">=</span> count <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="dt">true </span><span class="op">:</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb693-4"><a href="going-further-reactR.html#cb693-4"></a>  <span class="kw">let</span> resetButton<span class="op">;</span></span>
<span id="cb693-5"><a href="going-further-reactR.html#cb693-5"></a>  <span class="cf">if</span> (isResetVisible) <span class="op">{</span></span>
<span id="cb693-6"><a href="going-further-reactR.html#cb693-6"></a>    resetButton <span class="op">= </span><span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setCount</span>(<span class="dv">0</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb693-7"><a href="going-further-reactR.html#cb693-7"></a>      Reset</span>
<span id="cb693-8"><a href="going-further-reactR.html#cb693-8"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb693-9"><a href="going-further-reactR.html#cb693-9"></a>  <span class="op">}</span></span>
<span id="cb693-10"><a href="going-further-reactR.html#cb693-10"></a>  <span class="cf">return</span> (</span>
<span id="cb693-11"><a href="going-further-reactR.html#cb693-11"></a>    <span class="kw">&lt;&gt;</span></span>
<span id="cb693-12"><a href="going-further-reactR.html#cb693-12"></a>      <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setCount</span>(count <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb693-13"><a href="going-further-reactR.html#cb693-13"></a>        Number of clicks: <span class="va">{</span>count<span class="va">}</span></span>
<span id="cb693-14"><a href="going-further-reactR.html#cb693-14"></a>      <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb693-15"><a href="going-further-reactR.html#cb693-15"></a>      <span class="va">{</span>resetButton<span class="va">}</span></span>
<span id="cb693-16"><a href="going-further-reactR.html#cb693-16"></a>    <span class="kw">&lt;/&gt;</span></span>
<span id="cb693-17"><a href="going-further-reactR.html#cb693-17"></a>  )<span class="op">;</span></span>
<span id="cb693-18"><a href="going-further-reactR.html#cb693-18"></a><span class="op">}</span></span></code></pre></div>
<p>Now that you get a better understanding of how React works, let’s see how to use it with
Shiny.</p>
</div>
</div>
</div>
<div id="introduction-to-reactr" class="section level2">
<h2>
<span class="header-section-number">28.2</span> Introduction to <code>{reactR}</code><a class="anchor" aria-label="anchor" href="#introduction-to-reactr"><i class="fas fa-link"></i></a>
</h2>
<div id="scaffold-inputs" class="section level3">
<h3>
<span class="header-section-number">28.2.1</span> Scaffold inputs<a class="anchor" aria-label="anchor" href="#scaffold-inputs"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="toward-custom-components" class="section level3">
<h3>
<span class="header-section-number">28.2.2</span> Toward custom components<a class="anchor" aria-label="anchor" href="#toward-custom-components"><i class="fas fa-link"></i></a>
</h3>
<p>Creating custom components in Shiny is not that easy. If we assume we want to create
a custom text container which color, size and many CSS properties can change dynamically.
This is a bit different from the approach shown in Chapter <a href="beautify-with-bootstraplib.html#beautify-with-bootstraplib">8</a> since
the <a href="https://rstudio.github.io/bslib/">bslib</a> gives access to Bootstrap <a href="https://rstudio.github.io/bslib/articles/bs4-variables.html">variables</a> but not
basic CSS properties like the color of a <code>span</code> element.</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="mobile-going-further.html"><span class="header-section-number">27</span> Going further</a></div>
<div class="next"><a href="references.html">References</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#going-further-reactR"><span class="header-section-number">28</span> R + Shiny + React: welcome {reactR}</a></li>
<li>
<a class="nav-link" href="#quick-introduction-to-react"><span class="header-section-number">28.1</span> Quick introduction to React</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#setup-1"><span class="header-section-number">28.1.1</span> Setup</a></li>
<li><a class="nav-link" href="#basics-1"><span class="header-section-number">28.1.2</span> Basics</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#introduction-to-reactr"><span class="header-section-number">28.2</span> Introduction to {reactR}</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#scaffold-inputs"><span class="header-section-number">28.2.1</span> Scaffold inputs</a></li>
<li><a class="nav-link" href="#toward-custom-components"><span class="header-section-number">28.2.2</span> Toward custom components</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/blob/master/going-further-reactR.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/edit/master/going-further-reactR.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Outstanding User Interfaces with Shiny</strong>" was written by David Granjon. It was last built on 2021-02-01.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
