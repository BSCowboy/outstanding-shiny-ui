<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 27 R + Shiny + React: welcome {reactR} | Outstanding User Interfaces with Shiny</title>
<meta name="author" content="David Granjon">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.4/tabs.js"></script><script src="libs/bs3compat-0.2.4/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/core-js-2.5.3/shim.min.js"></script><script src="libs/react-16.12.0/react.min.js"></script><script src="libs/react-16.12.0/react-dom.min.js"></script><script src="libs/reactwidget-1.0.0/react-tools.js"></script><link href="libs/font-awesome-5.13.0/css/all.min.css" rel="stylesheet">
<link href="libs/font-awesome-5.13.0/css/v4-shims.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Outstanding User Interfaces with Shiny</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="foreword.html">Foreword</a></li>
<li class="book-part">Introduction</li>
<li><a class="" href="web-intro.html"><span class="header-section-number">1</span> Shiny and the Web</a></li>
<li><a class="" href="web-dependencies.html"><span class="header-section-number">2</span> Discover Shiny dependencies</a></li>
<li class="book-part">From R to HTML: discover and master {htmltools}:</li>
<li><a class="" href="htmltools-overview.html"><span class="header-section-number">3</span> htmltools overview</a></li>
<li><a class="" href="htmltools-dependencies.html"><span class="header-section-number">4</span> Dependency utilities</a></li>
<li class="book-part">Beautify with CSS and Sass</li>
<li><a class="" href="beautify-css.html"><span class="header-section-number">5</span> CSS for Shiny</a></li>
<li><a class="" href="beautify-sass.html"><span class="header-section-number">6</span> Introduction to SASS</a></li>
<li><a class="" href="beautify-with-fresh.html"><span class="header-section-number">7</span> Beautify with fresh</a></li>
<li><a class="" href="beautify-with-bootstraplib.html"><span class="header-section-number">8</span> Beautify with {bslib}</a></li>
<li class="book-part">Unleash interactivity with JavaScript</li>
<li><a class="" href="survival-kit-javascript.html"><span class="header-section-number">9</span> JavaScript for Shiny</a></li>
<li><a class="" href="shiny-intro.html"><span class="header-section-number">10</span> Shiny’s internal: session and websockets</a></li>
<li><a class="" href="shiny-input-system.html"><span class="header-section-number">11</span> Shiny’s input system</a></li>
<li><a class="" href="shiny-input-lifecycle.html"><span class="header-section-number">12</span> Shiny inputs lifecycles</a></li>
<li><a class="" href="shiny-input-gems.html"><span class="header-section-number">13</span> Hidden gems about inputs</a></li>
<li><a class="" href="shiny-custom-handler.html"><span class="header-section-number">14</span> Dynamically manage content with handlers</a></li>
<li class="book-part">Practice 1: a dashboard template</li>
<li><a class="" href="custom-templates-selection.html"><span class="header-section-number">15</span> Template selection</a></li>
<li><a class="" href="custom-templates-dependencies.html"><span class="header-section-number">16</span> Define dependencies</a></li>
<li><a class="" href="custom-templates-skeleton.html"><span class="header-section-number">17</span> Template skeleton</a></li>
<li><a class="" href="custom-templates-testing.html"><span class="header-section-number">18</span> Testing and validating templates elements</a></li>
<li><a class="" href="custom-templates-inputs.html"><span class="header-section-number">19</span> Develop custom input widgets</a></li>
<li><a class="" href="custom-templates-interactivity.html"><span class="header-section-number">20</span> Adding more interactivity</a></li>
<li class="book-part">Toward a better workflow</li>
<li><a class="" href="workflow-charpente.html"><span class="header-section-number">21</span> Introduction to {charpente}</a></li>
<li class="book-part">Case study 2: Mobile development with Shiny</li>
<li><a class="" href="mobile-shiny-intro.html"><span class="header-section-number">22</span> Introduction</a></li>
<li><a class="" href="mobile-shinyMobile.html"><span class="header-section-number">23</span> Reconstruct {shinyMobile}</a></li>
<li><a class="" href="mobile-pwa.html"><span class="header-section-number">24</span> {shinyMobile} and PWA</a></li>
<li><a class="" href="mobile-widgets.html"><span class="header-section-number">25</span> Design widgets</a></li>
<li><a class="" href="mobile-going-further.html"><span class="header-section-number">26</span> Going further</a></li>
<li class="book-part">Going further</li>
<li><a class="active" href="going-further-reactR.html"><span class="header-section-number">27</span> R + Shiny + React: welcome {reactR}</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/DivadNojnarg/outstanding-shiny-ui">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="going-further-reactR" class="section level1">
<h1>
<span class="header-section-number">27</span> R + Shiny + React: welcome <code>{reactR}</code><a class="anchor" aria-label="anchor" href="#going-further-reactR"><i class="fas fa-link"></i></a>
</h1>
<p><a href="https://reactjs.org/">React</a> is an open source library designed to quickly develop user interfaces or UI components, on the front end.
It has been developed by <a href="https://github.com/facebook/react">Facebook</a> and the community (more than 1500 contributors)
and made public in May 29 2013. It is currently used worldwide and has around 163k stars on the
Github ranking and widely impacts the mobile market, through the <a href="https://reactnative.dev/">React Native</a> library.<br>
React is also really convenient to develop attractive documentations with <a href="https://v2.docusaurus.io/">docusaurus</a>.
If you ever have built user interfaces with pure JS, you might like React!</p>
<p>Below, we give a short introduction to the React ecosystem and see how we can benefit from it from the
R Shiny side.</p>
<div id="quick-introduction-to-react" class="section level2">
<h2>
<span class="header-section-number">27.1</span> Quick introduction to React<a class="anchor" aria-label="anchor" href="#quick-introduction-to-react"><i class="fas fa-link"></i></a>
</h2>
<p>To understand React there are few prerequisites notably basic HTML/CSS/JS knowledge, especially JS modules (see
section <a href="survival-kit-javascript.html#about-js-modules">9.4.6.1</a>). However, if you managed to reach this chapter, you should not worry too much.</p>
<div id="setup-1" class="section level3">
<h3>
<span class="header-section-number">27.1.1</span> Setup<a class="anchor" aria-label="anchor" href="#setup-1"><i class="fas fa-link"></i></a>
</h3>
<p><code>Node</code> and <code>npm</code> are required. If you are not sure, run:</p>
<pre class="shell"><code>node -v
npm -v</code></pre>
<p>At that stage it is also good to have <a href="https://classic.yarnpkg.com/en/docs/install#mac-stable"><code>yarn</code></a> as we’ll need it for <a href="https://github.com/react-R/reactR">reactR</a>.</p>
<p>If nothing is returned, please refer to section <a href="survival-kit-javascript.html#install-node">9.3.1</a>. To initiate a React <a href="https://create-react-app.dev/">project</a>,
we leverage the <code>npx</code> command:</p>
<pre><code>npx create-react-app &lt;PROJECT_NAME&gt;</code></pre>
<p>Replace <code>&lt;PROJECT_NAME&gt;</code> by the real name of your project. If this seems intimidating,
keep in mind this is the same concept has using the <a href="https://github.com/ThinkR-open/golem">golem</a> <a href="https://github.com/ThinkR-open/golem">package</a>
to initiate the creation of robust shiny projects, except that we work from the terminal.</p>
<p>Once done (the package initialization takes some time),
move to the project folder and launch the demo app:</p>
<pre><code>cd &lt;PROJECT_NAME&gt; &amp;&amp; npm start</code></pre>
<p>If you have yarn, <code>yarn start</code> also works.</p>
<p>You should see something similar to Figure <a href="going-further-reactR.html#fig:basic-react-app">27.1</a>.</p>
<div class="figure">
<span id="fig:basic-react-app"></span>
<img src="images/going-further/basic-react-app.png" alt="npm start opens the react app" width="100%"><p class="caption">
FIGURE 27.1: npm start opens the react app
</p>
</div>
</div>
<div id="basics-1" class="section level3">
<h3>
<span class="header-section-number">27.1.2</span> Basics<a class="anchor" aria-label="anchor" href="#basics-1"><i class="fas fa-link"></i></a>
</h3>
<p>We are now all set up to start learning the basics of React. Among all created files,
notice the <code>/src/app.js</code> file. Inside the <code>App</code> function, we remove all the content inside
the <code>return</code> statement to put a simple <code>&lt;h1&gt;Hello, world!&lt;/h1&gt;</code> HTML title. We also clean the imports
as we don’t need any CSS and logo anymore. We obtain:</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb610-1"><a href="going-further-reactR.html#cb610-1"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb610-2"><a href="going-further-reactR.html#cb610-2"></a>  <span class="cf">return</span> (</span>
<span id="cb610-3"><a href="going-further-reactR.html#cb610-3"></a>    <span class="kw">&lt;h1&gt;</span>Hello, world!<span class="kw">&lt;/h1&gt;</span></span>
<span id="cb610-4"><a href="going-further-reactR.html#cb610-4"></a>  )<span class="op">;</span></span>
<span id="cb610-5"><a href="going-further-reactR.html#cb610-5"></a><span class="op">}</span></span>
<span id="cb610-6"><a href="going-further-reactR.html#cb610-6"></a></span>
<span id="cb610-7"><a href="going-further-reactR.html#cb610-7"></a><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span> <span class="co">// don't remove, this is needed by index.js</span></span></code></pre></div>
<p>Once done, we run <code>npm build</code> (or <code>yarn build</code>), to rebuild the JS code and <code>npm start</code> to
restart the server and preview the app. In practice, once the server is launched, there is
no need to restart it whenever the code is updated. A simple save will refresh the interface!</p>
<p>The code you see above is a React component. The definition is rather simple: it is a function that returns
a moreless complex piece of UI. How are components rendered by React?</p>
<p>So far, we didn’t have a look at the <code>/src/index.js</code> script. Inside we find:</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb611-1"><a href="going-further-reactR.html#cb611-1"></a><span class="va">ReactDOM</span>.<span class="at">render</span>(</span>
<span id="cb611-2"><a href="going-further-reactR.html#cb611-2"></a>  App<span class="op">,</span></span>
<span id="cb611-3"><a href="going-further-reactR.html#cb611-3"></a>  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">'root'</span>)</span>
<span id="cb611-4"><a href="going-further-reactR.html#cb611-4"></a>)<span class="op">;</span></span></code></pre></div>
<p><strong>Note</strong>: recent version of <code>npx create-react-app</code> have <code>&lt;React.StrictMode&gt;&lt;App /&gt;&lt;/React.StrictMode&gt;</code> instead
of <code>App</code>, which does the same thing. You may also find <code>&lt;App /&gt;</code>. In practice, we rarely modify this part.</p>
<p>In short, this inserts the <code>App</code> component inside the element having <code>root</code> as id in the main
HTML page. This HTML skeleton may be found in the <code>public/index.html</code> folder. You may guess that at the end
of the day, our app will be composed of multiple bricks and called <code>ReactDOM.render</code> on the top level component.</p>
<div id="about-jsx" class="section level4">
<h4>
<span class="header-section-number">27.1.2.1</span> About JSX<a class="anchor" aria-label="anchor" href="#about-jsx"><i class="fas fa-link"></i></a>
</h4>
<p>We just wrote our first React component. Didn’t you notice something weird in that code?
JS and HTML are mixed, in what we called JSX, that is a syntax extension to JS. JSX makes the code
less verbose, for instance:</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb612-1"><a href="going-further-reactR.html#cb612-1"></a><span class="va">React</span>.<span class="at">createElement</span>(</span>
<span id="cb612-2"><a href="going-further-reactR.html#cb612-2"></a>  <span class="st">'h1'</span><span class="op">,</span></span>
<span id="cb612-3"><a href="going-further-reactR.html#cb612-3"></a>  <span class="st">'Hello, world!'</span></span>
<span id="cb612-4"><a href="going-further-reactR.html#cb612-4"></a>)<span class="op">;</span></span></code></pre></div>
<p>does exactly the same thing as above but when the code becomes more complex, it is nearly
impossible to read.</p>
<p>Let’s see how to pass variables into JSX. We want to show <code>Hello, &lt;Your Name&gt;</code>, we store
the name in a variable and modify the <code>app.js</code> code accordingly:</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb613-1"><a href="going-further-reactR.html#cb613-1"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb613-2"><a href="going-further-reactR.html#cb613-2"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">"David"</span><span class="op">;</span></span>
<span id="cb613-3"><a href="going-further-reactR.html#cb613-3"></a>  <span class="cf">return</span> (</span>
<span id="cb613-4"><a href="going-further-reactR.html#cb613-4"></a>    <span class="kw">&lt;h1&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb613-5"><a href="going-further-reactR.html#cb613-5"></a>  )<span class="op">;</span></span>
<span id="cb613-6"><a href="going-further-reactR.html#cb613-6"></a><span class="op">}</span></span></code></pre></div>
<p>Expressions are passed within curly brackets <code>{expression}</code> and you may even call functions inside.</p>
<p>Tag attributes also require curly brackets. Let’s modify the title tag to give it a color and
a size.</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb614-1"><a href="going-further-reactR.html#cb614-1"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb614-2"><a href="going-further-reactR.html#cb614-2"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">"David"</span><span class="op">;</span></span>
<span id="cb614-3"><a href="going-further-reactR.html#cb614-3"></a>  <span class="cf">return</span> (</span>
<span id="cb614-4"><a href="going-further-reactR.html#cb614-4"></a>    <span class="kw">&lt;h1</span> <span class="ot">style</span><span class="op">=</span><span class="va">{</span>color<span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> fontSize<span class="op">:</span> <span class="dv">40</span><span class="va">}</span><span class="kw">&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb614-5"><a href="going-further-reactR.html#cb614-5"></a>  )<span class="op">;</span></span>
<span id="cb614-6"><a href="going-further-reactR.html#cb614-6"></a><span class="op">}</span></span></code></pre></div>
<p>Try to save. Why does this fail? We can’t pass multiple object properties inside a single <code>{}</code>.
We need either double brackets like <code>{{object properties: values, ...}}</code> or to store the object in
a variable before:</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb615-1"><a href="going-further-reactR.html#cb615-1"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb615-2"><a href="going-further-reactR.html#cb615-2"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">"David"</span><span class="op">;</span></span>
<span id="cb615-3"><a href="going-further-reactR.html#cb615-3"></a>  <span class="cf">return</span> (</span>
<span id="cb615-4"><a href="going-further-reactR.html#cb615-4"></a>    <span class="kw">&lt;h1</span> <span class="ot">style</span><span class="op">=</span><span class="va">{</span><span class="op">{</span><span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">40</span><span class="op">}</span><span class="va">}</span><span class="kw">&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb615-5"><a href="going-further-reactR.html#cb615-5"></a>  )<span class="op">;</span></span>
<span id="cb615-6"><a href="going-further-reactR.html#cb615-6"></a><span class="op">}</span></span>
<span id="cb615-7"><a href="going-further-reactR.html#cb615-7"></a></span>
<span id="cb615-8"><a href="going-further-reactR.html#cb615-8"></a><span class="co">// OR</span></span>
<span id="cb615-9"><a href="going-further-reactR.html#cb615-9"></a></span>
<span id="cb615-10"><a href="going-further-reactR.html#cb615-10"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb615-11"><a href="going-further-reactR.html#cb615-11"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">"David"</span><span class="op">;</span></span>
<span id="cb615-12"><a href="going-further-reactR.html#cb615-12"></a>  <span class="kw">const</span> myStyle <span class="op">=</span> <span class="op">{</span></span>
<span id="cb615-13"><a href="going-further-reactR.html#cb615-13"></a>    <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> </span>
<span id="cb615-14"><a href="going-further-reactR.html#cb615-14"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">40</span></span>
<span id="cb615-15"><a href="going-further-reactR.html#cb615-15"></a>  <span class="op">}</span></span>
<span id="cb615-16"><a href="going-further-reactR.html#cb615-16"></a>  <span class="cf">return</span> (</span>
<span id="cb615-17"><a href="going-further-reactR.html#cb615-17"></a>    <span class="kw">&lt;h1</span> <span class="ot">style</span><span class="op">=</span><span class="va">{</span>myStyle<span class="va">}</span><span class="kw">&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb615-18"><a href="going-further-reactR.html#cb615-18"></a>  )<span class="op">;</span></span>
<span id="cb615-19"><a href="going-further-reactR.html#cb615-19"></a><span class="op">}</span></span></code></pre></div>
<p>Notice that we write CSS properties following the camelCase syntax, <code>font-size</code> being equivalent to <code>fontSize</code>.</p>
</div>
<div id="combining-components" class="section level4">
<h4>
<span class="header-section-number">27.1.2.2</span> Combining components<a class="anchor" aria-label="anchor" href="#combining-components"><i class="fas fa-link"></i></a>
</h4>
<p>The whole interest is to combine multiple components to create reusable pieces. We edit the above code
to create a <code>SayHello</code> component. Notice the <code>props</code> parameter. It is a way to pass configuration from the
parent component. In that case, we want to display the person name, that is <code>props.name</code>. In the meantime,
we edit the <code>App</code> parent component and call <code>SayHello</code> three times, passing a different name like <code>&lt;SayHello name="David" /&gt;</code> (this is the reason why we recover <code>props.name</code> in the lower level component):</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb616-1"><a href="going-further-reactR.html#cb616-1"></a><span class="kw">function</span> <span class="at">SayHello</span>(props) <span class="op">{</span></span>
<span id="cb616-2"><a href="going-further-reactR.html#cb616-2"></a>  <span class="cf">return</span> (</span>
<span id="cb616-3"><a href="going-further-reactR.html#cb616-3"></a>    <span class="kw">&lt;h1&gt;</span>Hello, <span class="va">{props</span>.<span class="at">name</span><span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb616-4"><a href="going-further-reactR.html#cb616-4"></a>  )<span class="op">;</span></span>
<span id="cb616-5"><a href="going-further-reactR.html#cb616-5"></a><span class="op">}</span></span>
<span id="cb616-6"><a href="going-further-reactR.html#cb616-6"></a></span>
<span id="cb616-7"><a href="going-further-reactR.html#cb616-7"></a></span>
<span id="cb616-8"><a href="going-further-reactR.html#cb616-8"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb616-9"><a href="going-further-reactR.html#cb616-9"></a>  <span class="cf">return</span>(</span>
<span id="cb616-10"><a href="going-further-reactR.html#cb616-10"></a>  <span class="kw">&lt;&gt;</span></span>
<span id="cb616-11"><a href="going-further-reactR.html#cb616-11"></a>    <span class="fu">&lt;SayHello</span> <span class="ot">name</span><span class="op">=</span><span class="st">"David"</span> <span class="fu">/&gt;</span></span>
<span id="cb616-12"><a href="going-further-reactR.html#cb616-12"></a>    <span class="fu">&lt;SayHello</span> <span class="ot">name</span><span class="op">=</span><span class="st">"Lisa"</span> <span class="fu">/&gt;</span></span>
<span id="cb616-13"><a href="going-further-reactR.html#cb616-13"></a>    <span class="fu">&lt;SayHello</span> <span class="ot">name</span><span class="op">=</span><span class="st">"Simon"</span> <span class="fu">/&gt;</span></span>
<span id="cb616-14"><a href="going-further-reactR.html#cb616-14"></a>  <span class="kw">&lt;/&gt;</span></span>
<span id="cb616-15"><a href="going-further-reactR.html#cb616-15"></a>  )<span class="op">;</span></span>
<span id="cb616-16"><a href="going-further-reactR.html#cb616-16"></a><span class="op">}</span></span></code></pre></div>
<p>Notice the enclosing <code>&lt;&gt;...&lt;/&gt;</code>. This is called a React fragment and useful if we don’t want to
insert any extra <code>&lt;div&gt;</code> in the DOM.</p>
<p>We could be even more efficient by leveraging the lists capabilities. We create an array
of names and apply the <code>map</code> method to return the corresponding <code>&lt;SayHello /&gt;</code> sub-component:</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb617-1"><a href="going-further-reactR.html#cb617-1"></a><span class="kw">const</span> names <span class="op">=</span> [<span class="st">"David"</span><span class="op">,</span> <span class="st">"Lisa"</span><span class="op">,</span> <span class="st">"Simon"</span>]<span class="op">;</span></span>
<span id="cb617-2"><a href="going-further-reactR.html#cb617-2"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb617-3"><a href="going-further-reactR.html#cb617-3"></a>  <span class="kw">const</span> sayHelloToAll <span class="op">=</span> <span class="va">names</span>.<span class="at">map</span>((name) <span class="kw">=&gt; </span><span class="fu">&lt;SayHello</span> <span class="ot">key</span><span class="op">=</span><span class="va">{</span>name<span class="va">}</span> <span class="ot">name</span><span class="op">=</span><span class="va">{</span>name<span class="va">}</span> <span class="fu">/&gt;</span>)<span class="op">;</span> </span>
<span id="cb617-4"><a href="going-further-reactR.html#cb617-4"></a>  <span class="cf">return</span>(sayHelloToAll)<span class="op">;</span></span>
<span id="cb617-5"><a href="going-further-reactR.html#cb617-5"></a><span class="op">}</span></span></code></pre></div>
<p>By convention, all elements inside a <code>map</code> require keys.</p>
<p>Props are <strong>read-only</strong> and must not be modified withing their own component.
How do we update components?</p>
</div>
<div id="component-state" class="section level4">
<h4>
<span class="header-section-number">27.1.2.3</span> Component state<a class="anchor" aria-label="anchor" href="#component-state"><i class="fas fa-link"></i></a>
</h4>
<p>A component state is private and controlled by this same component. Since React 16.8 and the introduction of <strong>hooks</strong>, this is not necessary to convert the component function to a <a href="https://reactjs.org/docs/components-and-props.html#function-and-class-components">class</a>.
The easiest example to illustrate hooks capabilities is the button. Each time, we click on a button,
we want to keep the current number of clicks in a state, like the <code><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">shiny::actionButton</a></code>. We start by
importing the <code>useState</code> function from <code>react</code> and create a new <code>ActionButton</code> component.
Inside, we set the state with <code>useState</code> that create the state variable <code>count</code> as well as the function to
update it, namely <code>setCount</code>. This way to create 2 variables at once is called array destructuring.
We set the initial number of counts to 0:</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb618-1"><a href="going-further-reactR.html#cb618-1"></a><span class="im">import</span> <span class="op">{</span>useState<span class="op">}</span> <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb618-2"><a href="going-further-reactR.html#cb618-2"></a></span>
<span id="cb618-3"><a href="going-further-reactR.html#cb618-3"></a><span class="kw">function</span> <span class="at">ActionButton</span>() <span class="op">{</span></span>
<span id="cb618-4"><a href="going-further-reactR.html#cb618-4"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="at">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb618-5"><a href="going-further-reactR.html#cb618-5"></a><span class="op">}</span></span></code></pre></div>
<p>Next step is to create the button skeleton. We provide an <code>onClick</code> property that updates
the button state.Inside, we write an anonymous function which calls <code>setCount</code> and increment
the count value by 1. At this point, you may replace the <code>app.js</code> content by:</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb619-1"><a href="going-further-reactR.html#cb619-1"></a><span class="im">import</span> <span class="op">{</span>useState<span class="op">}</span> <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb619-2"><a href="going-further-reactR.html#cb619-2"></a></span>
<span id="cb619-3"><a href="going-further-reactR.html#cb619-3"></a><span class="kw">function</span> <span class="at">ActionButton</span>() <span class="op">{</span></span>
<span id="cb619-4"><a href="going-further-reactR.html#cb619-4"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="at">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb619-5"><a href="going-further-reactR.html#cb619-5"></a>  <span class="cf">return</span>(</span>
<span id="cb619-6"><a href="going-further-reactR.html#cb619-6"></a>    <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setCount</span>(count <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb619-7"><a href="going-further-reactR.html#cb619-7"></a>      Number of clicks: <span class="va">{</span>count<span class="va">}</span></span>
<span id="cb619-8"><a href="going-further-reactR.html#cb619-8"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb619-9"><a href="going-further-reactR.html#cb619-9"></a>  )<span class="op">;</span></span>
<span id="cb619-10"><a href="going-further-reactR.html#cb619-10"></a><span class="op">}</span></span>
<span id="cb619-11"><a href="going-further-reactR.html#cb619-11"></a></span>
<span id="cb619-12"><a href="going-further-reactR.html#cb619-12"></a><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></span>
<span id="cb619-13"><a href="going-further-reactR.html#cb619-13"></a>  <span class="cf">return</span> (</span>
<span id="cb619-14"><a href="going-further-reactR.html#cb619-14"></a>    <span class="fu">&lt;ActionButton</span> <span class="fu">/&gt;</span></span>
<span id="cb619-15"><a href="going-further-reactR.html#cb619-15"></a>  )<span class="op">;</span></span>
<span id="cb619-16"><a href="going-further-reactR.html#cb619-16"></a><span class="op">}</span></span>
<span id="cb619-17"><a href="going-further-reactR.html#cb619-17"></a></span>
<span id="cb619-18"><a href="going-further-reactR.html#cb619-18"></a><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></span></code></pre></div>
<p>We may improve the previous app and add a reset button within the <code>ActionButton</code> component that
sets the count back to 0:</p>
<div class="sourceCode" id="cb620"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb620-1"><a href="going-further-reactR.html#cb620-1"></a><span class="kw">function</span> <span class="at">ActionButton</span>() <span class="op">{</span></span>
<span id="cb620-2"><a href="going-further-reactR.html#cb620-2"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="at">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb620-3"><a href="going-further-reactR.html#cb620-3"></a>  <span class="cf">return</span>(</span>
<span id="cb620-4"><a href="going-further-reactR.html#cb620-4"></a>    <span class="kw">&lt;&gt;</span></span>
<span id="cb620-5"><a href="going-further-reactR.html#cb620-5"></a>    <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setCount</span>(count <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb620-6"><a href="going-further-reactR.html#cb620-6"></a>      Number of clicks: <span class="va">{</span>count<span class="va">}</span></span>
<span id="cb620-7"><a href="going-further-reactR.html#cb620-7"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb620-8"><a href="going-further-reactR.html#cb620-8"></a>    <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setCount</span>(<span class="dv">0</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb620-9"><a href="going-further-reactR.html#cb620-9"></a>      Reset</span>
<span id="cb620-10"><a href="going-further-reactR.html#cb620-10"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb620-11"><a href="going-further-reactR.html#cb620-11"></a>    <span class="kw">&lt;/&gt;</span></span>
<span id="cb620-12"><a href="going-further-reactR.html#cb620-12"></a>  )<span class="op">;</span></span>
<span id="cb620-13"><a href="going-further-reactR.html#cb620-13"></a><span class="op">}</span></span></code></pre></div>
<p>It would make more sense to only show the reset button once the button has been clicked,
at least once. We define the <code>isResetVisible</code> variable which is <code>true</code> whenever the
count is higher than 0 and <code>false</code> if the count is 0. We store the reset button in a variable
and only return something if <code>isResetVisible</code> is <code>true</code>:</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb621-1"><a href="going-further-reactR.html#cb621-1"></a><span class="kw">function</span> <span class="at">ActionButton</span>() <span class="op">{</span></span>
<span id="cb621-2"><a href="going-further-reactR.html#cb621-2"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="at">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb621-3"><a href="going-further-reactR.html#cb621-3"></a>  <span class="kw">const</span> isResetVisible <span class="op">=</span> count <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="dt">true </span><span class="op">:</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb621-4"><a href="going-further-reactR.html#cb621-4"></a>  <span class="kw">let</span> resetButton<span class="op">;</span></span>
<span id="cb621-5"><a href="going-further-reactR.html#cb621-5"></a>  <span class="cf">if</span> (isResetVisible) <span class="op">{</span></span>
<span id="cb621-6"><a href="going-further-reactR.html#cb621-6"></a>    resetButton <span class="op">= </span><span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setCount</span>(<span class="dv">0</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb621-7"><a href="going-further-reactR.html#cb621-7"></a>      Reset</span>
<span id="cb621-8"><a href="going-further-reactR.html#cb621-8"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb621-9"><a href="going-further-reactR.html#cb621-9"></a>  <span class="op">}</span></span>
<span id="cb621-10"><a href="going-further-reactR.html#cb621-10"></a>  <span class="cf">return</span> (</span>
<span id="cb621-11"><a href="going-further-reactR.html#cb621-11"></a>    <span class="kw">&lt;&gt;</span></span>
<span id="cb621-12"><a href="going-further-reactR.html#cb621-12"></a>      <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setCount</span>(count <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb621-13"><a href="going-further-reactR.html#cb621-13"></a>        Number of clicks: <span class="va">{</span>count<span class="va">}</span></span>
<span id="cb621-14"><a href="going-further-reactR.html#cb621-14"></a>      <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb621-15"><a href="going-further-reactR.html#cb621-15"></a>      <span class="va">{</span>resetButton<span class="va">}</span></span>
<span id="cb621-16"><a href="going-further-reactR.html#cb621-16"></a>    <span class="kw">&lt;/&gt;</span></span>
<span id="cb621-17"><a href="going-further-reactR.html#cb621-17"></a>  )<span class="op">;</span></span>
<span id="cb621-18"><a href="going-further-reactR.html#cb621-18"></a><span class="op">}</span></span></code></pre></div>
<p>Now that you get a better understanding of how React works, let’s see how to use it with
Shiny.</p>
</div>
</div>
</div>
<div id="introduction-to-reactr" class="section level2">
<h2>
<span class="header-section-number">27.2</span> Introduction to <code>{reactR}</code><a class="anchor" aria-label="anchor" href="#introduction-to-reactr"><i class="fas fa-link"></i></a>
</h2>
<p>The React ecosystem is rich and provides many plug and play boilerplate. For instance,
<code>{reactable}</code> is an HTML widget developed on top of the <a href="https://github.com/tannerlinsley/react-table"><code>react-table</code></a> library. What about the modern React Argon design <a href="https://demos.creative-tim.com/argon-design-system-react/?_ga=2.179634850.760978196.1612189904-282783983.1612189904#/">system</a>, shown Figure <a href="going-further-reactR.html#fig:argon-design-react">27.2</a>.</p>
<div class="figure">
<span id="fig:argon-design-react"></span>
<img src="images/going-further/argon-design-react.png" alt="Argon design template with React" width="100%"><p class="caption">
FIGURE 27.2: Argon design template with React
</p>
</div>
<p>In this part, we see how to leverage <a href="https://github.com/react-R/reactR">reactR</a> to bring Argon design React to Shiny.</p>
<p>To install <a href="https://github.com/react-R/reactR">reactR</a>:</p>
<div class="sourceCode" id="cb622"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"reactR"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"react-R/reactR"</span><span class="op">)</span></code></pre></div>
<div id="scaffold-inputs" class="section level3">
<h3>
<span class="header-section-number">27.2.1</span> Scaffold inputs<a class="anchor" aria-label="anchor" href="#scaffold-inputs"><i class="fas fa-link"></i></a>
</h3>
<div id="setup-2" class="section level4">
<h4>
<span class="header-section-number">27.2.1.1</span> Setup<a class="anchor" aria-label="anchor" href="#setup-2"><i class="fas fa-link"></i></a>
</h4>
<p><a href="https://github.com/react-R/reactR">reactR</a> exposes the <code>scaffoldReactShinyInput</code> that creates the necessary pieces of code
to get started with the input development (see Figure <a href="going-further-reactR.html#fig:reactR-init-input">27.3</a>):</p>
<ul>
<li>An <code>&lt;input_name&gt;.R</code> file containing the input skeleton as well as its related update function.
It also creates a custom HTML dependency pointing to the input JS logic.</li>
<li>A <code>jsx</code> file with a boilerplate to start developing the input JS logic.</li>
<li>A <code>package.json</code> file containing dependencies.</li>
</ul>
<p>Besides, providing an optional dependency with a name and version taken from npm installs
all necessary dependencies in the <code>package.json</code> file.</p>
<p>In our case, we want to build on top of Argon from <a href="https://www.npmjs.com/package/argon-design-system-react">here</a>:</p>
<div class="sourceCode" id="cb623"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"mypkg"</span><span class="op">)</span>
<span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/create_package.html">create_package</a></span><span class="op">(</span><span class="va">path</span>, rstudio <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/scaffoldReactShinyInput.html">scaffoldReactShinyInput</a></span><span class="op">(</span><span class="st">"argon_action_button"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"argon-design-system-react"</span>, version <span class="op">=</span> <span class="st">"1.1.0"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure">
<span id="fig:reactR-init-input"></span>
<img src="images/going-further/reactR-init-input.png" alt="Package initialization with {reactR}" width="100%"><p class="caption">
FIGURE 27.3: Package initialization with {reactR}
</p>
</div>
<p>Note that <a href="https://github.com/react-R/reactR">reactR</a> provides <code>webpack</code> as JS manager. To build the JS code we go to the RStudio
terminal tab (or any terminal) and run at the package root:</p>
<pre><code>yarn install
yarn run webpack</code></pre>
<p>This installs all dependencies listed in the <code>package.json</code> file and create a <code>package-lock.json</code> file. If you ever used <a href="https://rstudio.github.io/renv">renv</a>, this is very similar and guarantees isolation of your package. All dependencies are stored in the <code>node_modules</code> folder.</p>
<p><strong>Note</strong>: I encountered few cases where the <code>yarn install</code> failed. In that case, you may
try <code>npm i argon-design-system-react</code> and also check your VPN settings.</p>
<p>The <code>run webpack</code> command triggers compiles the JS in production ready code. Should you need to customize the build pipeline, the webpack configuration is located in <code>webpack.config.js</code>. On the R side, the generated JS file is referenced in an HTML dependencies, located in the <code>&lt;input_name&gt;.R</code> file.</p>
</div>
<div id="implement-the-input-js-logic" class="section level4">
<h4>
<span class="header-section-number">27.2.1.2</span> Implement the input JS logic<a class="anchor" aria-label="anchor" href="#implement-the-input-js-logic"><i class="fas fa-link"></i></a>
</h4>
<p>It’s time to develop the logic. The Argon documentation provides a <a href="https://demos.creative-tim.com/argon-design-system-react/?_ga=2.179634850.760978196.1612189904-282783983.1612189904#/documentation/buttons">boilerplate</a>, which we slightly simplified, as show below:</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb625-1"><a href="going-further-reactR.html#cb625-1"></a><span class="im">import</span> <span class="op">{</span> reactShinyInput <span class="op">}</span> <span class="im">from</span> <span class="st">'reactR'</span><span class="op">;</span></span>
<span id="cb625-2"><a href="going-further-reactR.html#cb625-2"></a><span class="co">// reactstrap components</span></span>
<span id="cb625-3"><a href="going-further-reactR.html#cb625-3"></a><span class="im">import</span> <span class="op">{</span> Button <span class="op">}</span> <span class="im">from</span> <span class="st">"reactstrap"</span><span class="op">;</span></span>
<span id="cb625-4"><a href="going-further-reactR.html#cb625-4"></a></span>
<span id="cb625-5"><a href="going-further-reactR.html#cb625-5"></a><span class="kw">function</span> <span class="at">ArgonButton</span>() <span class="op">{</span></span>
<span id="cb625-6"><a href="going-further-reactR.html#cb625-6"></a>  <span class="cf">return</span> (</span>
<span id="cb625-7"><a href="going-further-reactR.html#cb625-7"></a>    <span class="fu">&lt;Button</span> <span class="ot">color</span><span class="op">=</span><span class="st">"primary"</span> <span class="ot">type</span><span class="op">=</span><span class="st">"button"</span><span class="fu">&gt;</span></span>
<span id="cb625-8"><a href="going-further-reactR.html#cb625-8"></a>      Button</span>
<span id="cb625-9"><a href="going-further-reactR.html#cb625-9"></a>    <span class="fu">&lt;/Button&gt;</span></span>
<span id="cb625-10"><a href="going-further-reactR.html#cb625-10"></a>  )<span class="op">;</span></span>
<span id="cb625-11"><a href="going-further-reactR.html#cb625-11"></a><span class="op">}</span></span>
<span id="cb625-12"><a href="going-further-reactR.html#cb625-12"></a></span>
<span id="cb625-13"><a href="going-further-reactR.html#cb625-13"></a><span class="at">reactShinyInput</span>(<span class="st">'.argon_action_button'</span><span class="op">,</span> <span class="st">'mypkg.argon_action_button'</span><span class="op">,</span> ArgonButton)<span class="op">;</span></span></code></pre></div>
<p>Notice the first two lines where we import the <code>reactShinyInput</code> function from the <a href="https://github.com/react-R/reactR">reactR</a> JS core and <a href="https://reactstrap.github.io/"><code>reactstrap</code></a>, a React powered Bootstrap 4 library. <code>reactShinyInput</code> provides
a wrapper to automatically bind the input element. This is extremely convenient as it allows to solely focus on the component logic rather than binding it to the shiny system. It takes three parameters:</p>
<ul>
<li>The element class which is obtained from the R side by <code>createReactShinyInput</code>.</li>
<li>The input binding name which is useful to store a reference in the <code>Shiny.InputBindings</code> registry.</li>
<li>The React component function.</li>
<li>There is an optional fourth parameter allowing to pass custom options like
rate <a href="https://github.com/react-R/reactR/blob/master/srcjs/input.js#L137">policies</a>.</li>
</ul>
<p>Overall, <a href="https://github.com/react-R/reactR/blob/master/srcjs/input.js#L72"><code>reactShinyInput</code></a> extends the <code>Shiny.InputBinding</code> class by providing extra methods like:</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb626-1"><a href="going-further-reactR.html#cb626-1"></a><span class="at">getInputConfiguration</span>(el) <span class="op">{</span></span>
<span id="cb626-2"><a href="going-further-reactR.html#cb626-2"></a>  <span class="cf">return</span> <span class="at">$</span>(el).<span class="at">data</span>(<span class="st">'configuration'</span>)<span class="op">;</span></span>
<span id="cb626-3"><a href="going-further-reactR.html#cb626-3"></a><span class="op">}</span></span>
<span id="cb626-4"><a href="going-further-reactR.html#cb626-4"></a><span class="at">setInputConfiguration</span>(el<span class="op">,</span> configuration) <span class="op">{</span></span>
<span id="cb626-5"><a href="going-further-reactR.html#cb626-5"></a>  <span class="at">$</span>(el).<span class="at">data</span>(<span class="st">'configuration'</span><span class="op">,</span> configuration)<span class="op">;</span></span>
<span id="cb626-6"><a href="going-further-reactR.html#cb626-6"></a><span class="op">}</span></span></code></pre></div>
<p><code>getInputConfiguration</code> and <code>setInputConfiguration</code>, respectively get and set the user provided configuration,
passed in the <code>createReactShinyInput</code> R side function. Under the hood, in addition to ship the <a href="https://github.com/react-R/reactR">reactR</a>, React, ReactTools HTML dependencies (and any user defined custom dependency), <code>createReactShinyInput</code> does generate
three tag elements:</p>
<ul>
<li>The first tag is the element placeholder containing the unique id. React will insert
the component inside this target with <code>ReactDOM.render</code>.</li>
<li>The second tag is a script containing the value passed as JSON.</li>
<li>The second tag is a script containing the configuration, also passed as JSON.</li>
</ul>
<div class="sourceCode" id="cb627"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/createReactShinyInput.html">createReactShinyInput</a></span><span class="op">(</span>
  inputId <span class="op">=</span> <span class="st">"plop"</span>, 
  class <span class="op">=</span> <span class="st">"myinput"</span>, 
  dependencies <span class="op">=</span> <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/findDependencies.html">findDependencies</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/icon.html">icon</a></span><span class="op">(</span><span class="st">"bicycle"</span><span class="op">)</span><span class="op">)</span>, 
  default <span class="op">=</span> <span class="fl">0</span>, 
  configuration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span>, b <span class="op">=</span> <span class="st">"test"</span><span class="op">)</span>, 
  container <span class="op">=</span> <span class="va">div</span>
<span class="op">)</span></code></pre></div>
<div id="plop" class="myinput"></div>
<script id="plop_value" type="application/json">0</script><script id="plop_configuration" type="application/json">{"a":1,"b":"test"}</script><p>The configuration and values are processed in the <code>initialize</code> method, which is a great place since it is
called before the input is bound:</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb628-1"><a href="going-further-reactR.html#cb628-1"></a><span class="at">$</span>(el).<span class="at">data</span>(<span class="st">'value'</span><span class="op">,</span> <span class="va">JSON</span>.<span class="at">parse</span>(<span class="at">$</span>(el).<span class="at">next</span>().<span class="at">text</span>()))<span class="op">;</span></span>
<span id="cb628-2"><a href="going-further-reactR.html#cb628-2"></a><span class="at">$</span>(el).<span class="at">data</span>(<span class="st">'configuration'</span><span class="op">,</span> <span class="va">JSON</span>.<span class="at">parse</span>(<span class="at">$</span>(el).<span class="at">next</span>().<span class="at">next</span>().<span class="at">text</span>()))<span class="op">;</span></span></code></pre></div>
<p>They are stored in the corresponding data attributes. The most important part is the <code>render</code> method that
creates the React element , based upon its configuration, value and renders it in the DOM:</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb629-1"><a href="going-further-reactR.html#cb629-1"></a><span class="at">render</span>(el) <span class="op">{</span></span>
<span id="cb629-2"><a href="going-further-reactR.html#cb629-2"></a>  <span class="kw">const</span> element <span class="op">=</span> <span class="va">React</span>.<span class="at">createElement</span>(component<span class="op">,</span> <span class="op">{</span></span>
<span id="cb629-3"><a href="going-further-reactR.html#cb629-3"></a>    <span class="dt">configuration</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getInputConfiguration</span>(el)<span class="op">,</span></span>
<span id="cb629-4"><a href="going-further-reactR.html#cb629-4"></a>    <span class="dt">value</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getValue</span>(el)<span class="op">,</span></span>
<span id="cb629-5"><a href="going-further-reactR.html#cb629-5"></a>    <span class="dt">setValue</span><span class="op">:</span> <span class="kw">this</span>.<span class="va">setValue</span>.<span class="at">bind</span>(<span class="kw">this</span><span class="op">,</span> el)<span class="op">,</span></span>
<span id="cb629-6"><a href="going-further-reactR.html#cb629-6"></a>    <span class="dt">el</span><span class="op">:</span> el</span>
<span id="cb629-7"><a href="going-further-reactR.html#cb629-7"></a>  <span class="op">}</span>)<span class="op">;</span></span>
<span id="cb629-8"><a href="going-further-reactR.html#cb629-8"></a>  <span class="va">ReactDOM</span>.<span class="at">render</span>(element<span class="op">,</span> el)<span class="op">;</span></span>
<span id="cb629-9"><a href="going-further-reactR.html#cb629-9"></a><span class="op">}</span></span></code></pre></div>
<p>The <code>render</code> method is called once inside <code>subscribe</code> and also each time the element is updated
with <code>receiveMessage</code>.</p>
<p>Interestingly, <code>setValue</code> is made available to the React component. For the action button case, it is called each time the <code>onClick</code> event is triggered, that is each time the user clicks on the button. This is the only way to update its value since it is not accessible to the user through <code>update_argon_action_button</code>. Other inputs like <code>textInput</code> have the <code>onChange</code> event, triggered each time the text field is updated. The value may also be updated
by the user with <code>updateTextInput</code>. Consequently, there is no general rule and the situation may
vary from an input to another!</p>
<p>For now, let’s just erase the <code>{creatR}</code> boilerplate (<code>argon_action_button.jsx</code>) with the above code an recompile with <code>yarn run webpack</code>. We also have to tell Shiny we want to
use Bootstrap 4 instead of Bootstrap 3, through the <code><a href="https://rstudio.github.io/bslib//reference/bs_theme.html">bslib::bs_theme</a></code> function:</p>
<div class="sourceCode" id="cb630"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/document.html">document</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/load_all.html">load_all</a></span><span class="op">(</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">mypkg</span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/bslib//reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"4"</span><span class="op">)</span>,
  <span class="fu">argon_action_button</span><span class="op">(</span><span class="st">"plop"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>The button is looking good but not really like in the Argon design system. Indeed, we forgot to import
the argon CSS assets. Add this code to the <code>argon_action_button.jsx</code>:</p>
<pre><code>import "argon-design-system-react/src/assets/css/argon-design-system-react.min.css";</code></pre>
<p>We have to tell webpack how to load the CSS by adding a missing rule to the provided
<code>webpack.config.js</code>:</p>
<div class="sourceCode" id="cb632"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb632-1"><a href="going-further-reactR.html#cb632-1"></a>rules<span class="op">:</span> [</span>
<span id="cb632-2"><a href="going-further-reactR.html#cb632-2"></a>  <span class="op">{</span></span>
<span id="cb632-3"><a href="going-further-reactR.html#cb632-3"></a>      <span class="dt">test</span><span class="op">:</span> <span class="ss">/</span><span class="sc">\.</span><span class="ss">jsx</span><span class="sc">?$</span><span class="ss">/</span><span class="op">,</span></span>
<span id="cb632-4"><a href="going-further-reactR.html#cb632-4"></a>      <span class="dt">loader</span><span class="op">:</span> <span class="st">'babel-loader'</span><span class="op">,</span></span>
<span id="cb632-5"><a href="going-further-reactR.html#cb632-5"></a>      <span class="dt">options</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb632-6"><a href="going-further-reactR.html#cb632-6"></a>          <span class="dt">presets</span><span class="op">:</span> [<span class="st">'@babel/preset-env'</span><span class="op">,</span> <span class="st">'@babel/preset-react'</span>]</span>
<span id="cb632-7"><a href="going-further-reactR.html#cb632-7"></a>      <span class="op">}</span></span>
<span id="cb632-8"><a href="going-further-reactR.html#cb632-8"></a>  <span class="op">},</span></span>
<span id="cb632-9"><a href="going-further-reactR.html#cb632-9"></a>  <span class="co">// For CSS so that import "path/style.css"; works</span></span>
<span id="cb632-10"><a href="going-further-reactR.html#cb632-10"></a>  <span class="op">{</span></span>
<span id="cb632-11"><a href="going-further-reactR.html#cb632-11"></a>      <span class="dt">test</span><span class="op">:</span> <span class="ss">/</span><span class="sc">\.</span><span class="ss">css</span><span class="sc">$</span><span class="ss">/</span><span class="op">,</span></span>
<span id="cb632-12"><a href="going-further-reactR.html#cb632-12"></a>      <span class="dt">use</span><span class="op">:</span> [<span class="st">'style-loader'</span><span class="op">,</span> <span class="st">'css-loader'</span>]</span>
<span id="cb632-13"><a href="going-further-reactR.html#cb632-13"></a>  <span class="op">}</span></span>
<span id="cb632-14"><a href="going-further-reactR.html#cb632-14"></a>]</span></code></pre></div>
<p>It is possible that you don’t have the corresponding node modules. In that case,
you can install them with:</p>
<pre><code>npm install style-loader css-loader --save-dev</code></pre>
<p>which will also update the <code>package.json</code> file.</p>
<p>Once updated, we recompile the code. The next part of this tutorial consists in making the button interactive.
We edit the <code>argon_action_button.jsx</code> code to add three input parameters in the
<code>ArgonButton</code> component:</p>
<ul>
<li>
<strong>value</strong> is the button count. The initial value is provided by the <code>default</code> slot on the R side (see below).</li>
<li>
<strong>configuration</strong> contains various user provided properties like the color status, outline style, …</li>
<li>
<strong>setValue</strong> is a way to increment the button value. Letting <code>setValue(value + 1)</code>,
ensures to increment the button value by 1 unit each click.</li>
</ul>
<div class="sourceCode" id="cb634"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb634-1"><a href="going-further-reactR.html#cb634-1"></a><span class="im">import</span> <span class="op">{</span> reactShinyInput <span class="op">}</span> <span class="im">from</span> <span class="st">'reactR'</span><span class="op">;</span></span>
<span id="cb634-2"><a href="going-further-reactR.html#cb634-2"></a><span class="co">// reactstrap components</span></span>
<span id="cb634-3"><a href="going-further-reactR.html#cb634-3"></a><span class="im">import</span> <span class="op">{</span> Button <span class="op">}</span> <span class="im">from</span> <span class="st">"reactstrap"</span><span class="op">;</span></span>
<span id="cb634-4"><a href="going-further-reactR.html#cb634-4"></a><span class="co">// Import argon CSS</span></span>
<span id="cb634-5"><a href="going-further-reactR.html#cb634-5"></a><span class="im">import</span> <span class="st">"argon-design-system-react/src/assets/css/argon-design-system-react.min.css"</span><span class="op">;</span></span>
<span id="cb634-6"><a href="going-further-reactR.html#cb634-6"></a></span>
<span id="cb634-7"><a href="going-further-reactR.html#cb634-7"></a><span class="kw">function</span> <span class="at">ArgonButton</span>(<span class="op">{</span>configuration<span class="op">,</span> value<span class="op">,</span> setValue<span class="op">}</span>) <span class="op">{</span></span>
<span id="cb634-8"><a href="going-further-reactR.html#cb634-8"></a>  <span class="cf">return</span> (</span>
<span id="cb634-9"><a href="going-further-reactR.html#cb634-9"></a>    <span class="fu">&lt;Button</span> <span class="ot">color</span><span class="op">=</span><span class="va">{configuration</span>.<span class="at">status</span><span class="va">}</span> <span class="ot">type</span><span class="op">=</span><span class="st">"button"</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setValue</span>(value <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb634-10"><a href="going-further-reactR.html#cb634-10"></a>      <span class="va">{configuration</span>.<span class="at">label</span><span class="va">}</span></span>
<span id="cb634-11"><a href="going-further-reactR.html#cb634-11"></a>    <span class="fu">&lt;/Button&gt;</span></span>
<span id="cb634-12"><a href="going-further-reactR.html#cb634-12"></a>  )<span class="op">;</span></span>
<span id="cb634-13"><a href="going-further-reactR.html#cb634-13"></a><span class="op">}</span></span>
<span id="cb634-14"><a href="going-further-reactR.html#cb634-14"></a></span>
<span id="cb634-15"><a href="going-further-reactR.html#cb634-15"></a><span class="at">reactShinyInput</span>(<span class="st">'.argon_action_button'</span><span class="op">,</span> <span class="st">'mypkg.argon_action_button'</span><span class="op">,</span> ArgonButton)<span class="op">;</span></span></code></pre></div>
<p>On the R side, we remove the <code>default</code> parameter from the external API but keep it internally to
set the initial value to 0, like for <code><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">shiny::actionButton</a></code>. Status and label are stored
in the configuration named list. Be careful! Names matter since they are recovered on the JS side
with <code>configuration.prop_name</code>:</p>
<div class="sourceCode" id="cb635"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">argon_action_button</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputId</span>, <span class="va">label</span>, <span class="va">status</span> <span class="op">=</span> <span class="st">"primary"</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/createReactShinyInput.html">createReactShinyInput</a></span><span class="op">(</span>
    <span class="va">inputId</span>,
    <span class="st">"argon_action_button"</span>,
    <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency</a></span><span class="op">(</span>
      name <span class="op">=</span> <span class="st">"argon_action_button-input"</span>,
      version <span class="op">=</span> <span class="st">"1.0.0"</span>,
      src <span class="op">=</span> <span class="st">"www/mypkg/argon_action_button"</span>,
      package <span class="op">=</span> <span class="st">"mypkg"</span>,
      script <span class="op">=</span> <span class="st">"argon_action_button.js"</span>
    <span class="op">)</span>,
    default <span class="op">=</span> <span class="fl">0</span>,
    configuration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      label <span class="op">=</span> <span class="va">label</span>,
      status <span class="op">=</span> <span class="va">status</span>
    <span class="op">)</span>,
    <span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">tags</a></span><span class="op">$</span><span class="va">div</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Once everything is up to date, we rebuild the JS, reload/document the package and run the app demo:</p>
<div class="sourceCode" id="cb636"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/bslib//reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"4"</span><span class="op">)</span>,
  <span class="fu">argon_action_button</span><span class="op">(</span><span class="st">"plop"</span>, <span class="st">"Click me!"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">plop</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>We may also modify the update input boilerplate since we don’t change the button value:</p>
<div class="sourceCode" id="cb637"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">update_argon_action_button</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">session</span>, <span class="va">inputId</span>, <span class="va">configuration</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">message</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">configuration</span><span class="op">)</span><span class="op">)</span> <span class="va">message</span><span class="op">$</span><span class="va">configuration</span> <span class="op">&lt;-</span> <span class="va">configuration</span>
  <span class="va">session</span><span class="op">$</span><span class="fu">sendInputMessage</span><span class="op">(</span><span class="va">inputId</span>, <span class="va">message</span><span class="op">)</span>;
<span class="op">}</span>

<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/document.html">document</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/load_all.html">load_all</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/bslib//reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"4"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span><span class="op">(</span>
    <span class="fu">argon_action_button</span><span class="op">(</span><span class="st">"plop"</span>, <span class="st">"Click me!"</span><span class="op">)</span>,
    <span class="fu">argon_action_button</span><span class="op">(</span><span class="st">"update"</span>, <span class="st">"Update button 1"</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">plop</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">update</span>, <span class="op">{</span>
    <span class="fu">update_argon_action_button</span><span class="op">(</span>
      <span class="va">session</span>, <span class="st">"plop"</span>, 
      configuration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        label <span class="op">=</span> <span class="st">"New text"</span>, 
        status <span class="op">=</span> <span class="st">"success"</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span>, ignoreInit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
</div>
<div id="exercise-1" class="section level4">
<h4>
<span class="header-section-number">27.2.1.3</span> Exercise<a class="anchor" aria-label="anchor" href="#exercise-1"><i class="fas fa-link"></i></a>
</h4>
<ol style="list-style-type: decimal">
<li>Add a <code>size</code>, <code>outline</code> and <code>icon</code> (from fontawesome) parameters to the <code>ArgonButton</code> component in the corresponding R script.
Hint: the <code>icon</code> parameter is the trickiest one. You might find helpful to capture its HTML dependency with <code><a href="https://rdrr.io/pkg/htmltools/man/htmlDependencies.html">htmltools::htmlDependencies(iconTag)</a></code> so as to properly render it. In HTML <code><a href="https://rdrr.io/pkg/shiny/man/icon.html">icon("bicycle")</a></code> produces <code>&lt;i class="fa fa-bicycle" role="presentation" aria-label="bicycle icon"&gt;&lt;/i&gt;</code>. However, in React we want <code>&lt;i className="fa fa-bicycle /&gt;</code>. Therefore, you will have to extract the icon class and send it to JS in the configuration list.</li>
<li>Implement the logic on the JS side. Hint: you may use the below code:</li>
</ol>
<div class="sourceCode" id="cb638"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb638-1"><a href="going-further-reactR.html#cb638-1"></a><span class="im">import</span> <span class="op">{</span> reactShinyInput <span class="op">}</span> <span class="im">from</span> <span class="st">'reactR'</span><span class="op">;</span></span>
<span id="cb638-2"><a href="going-further-reactR.html#cb638-2"></a><span class="co">// reactstrap components</span></span>
<span id="cb638-3"><a href="going-further-reactR.html#cb638-3"></a><span class="im">import</span> <span class="op">{</span> Button <span class="op">}</span> <span class="im">from</span> <span class="st">"reactstrap"</span><span class="op">;</span></span>
<span id="cb638-4"><a href="going-further-reactR.html#cb638-4"></a><span class="co">// import argon CSS</span></span>
<span id="cb638-5"><a href="going-further-reactR.html#cb638-5"></a><span class="im">import</span> <span class="st">"argon-design-system-react/src/assets/css/argon-design-system-react.min.css"</span><span class="op">;</span></span>
<span id="cb638-6"><a href="going-further-reactR.html#cb638-6"></a></span>
<span id="cb638-7"><a href="going-further-reactR.html#cb638-7"></a><span class="kw">function</span> <span class="at">ArgonButton</span>(<span class="op">{</span>configuration<span class="op">,</span> value<span class="op">,</span> setValue<span class="op">}</span>) <span class="op">{</span></span>
<span id="cb638-8"><a href="going-further-reactR.html#cb638-8"></a>  <span class="kw">let</span> iconTag<span class="op">,</span> btnCl<span class="op">,</span> innerTag<span class="op">;</span></span>
<span id="cb638-9"><a href="going-further-reactR.html#cb638-9"></a>  <span class="cf">if</span> (...) <span class="op">{</span></span>
<span id="cb638-10"><a href="going-further-reactR.html#cb638-10"></a>    btnCl <span class="op">=</span> <span class="st">"btn-icon"</span><span class="op">;</span></span>
<span id="cb638-11"><a href="going-further-reactR.html#cb638-11"></a>    innerTag <span class="op">= </span><span class="kw">&lt;&gt;</span></span>
<span id="cb638-12"><a href="going-further-reactR.html#cb638-12"></a>      <span class="kw">&lt;span</span> <span class="ot">className</span><span class="op">=</span><span class="st">"btn-inner--icon"</span><span class="kw">&gt;</span></span>
<span id="cb638-13"><a href="going-further-reactR.html#cb638-13"></a>        <span class="kw">&lt;i</span> <span class="ot">className</span><span class="op">=</span><span class="er">...</span> <span class="kw">/&gt;</span></span>
<span id="cb638-14"><a href="going-further-reactR.html#cb638-14"></a>      <span class="kw">&lt;/span&gt;</span></span>
<span id="cb638-15"><a href="going-further-reactR.html#cb638-15"></a>      <span class="kw">&lt;span</span> <span class="ot">className</span><span class="op">=</span><span class="st">"btn-inner--text"</span><span class="kw">&gt;</span>...<span class="kw">&lt;/span&gt;</span></span>
<span id="cb638-16"><a href="going-further-reactR.html#cb638-16"></a>    <span class="kw">&lt;/&gt;</span><span class="op">;</span></span>
<span id="cb638-17"><a href="going-further-reactR.html#cb638-17"></a>  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb638-18"><a href="going-further-reactR.html#cb638-18"></a>    innerTag <span class="op">=</span> <span class="va">configuration</span>.<span class="at">label</span><span class="op">;</span></span>
<span id="cb638-19"><a href="going-further-reactR.html#cb638-19"></a>  <span class="op">}</span></span>
<span id="cb638-20"><a href="going-further-reactR.html#cb638-20"></a></span>
<span id="cb638-21"><a href="going-further-reactR.html#cb638-21"></a>  <span class="kw">let</span> outlined<span class="op">;</span></span>
<span id="cb638-22"><a href="going-further-reactR.html#cb638-22"></a>  <span class="cf">if</span> (...) <span class="op">{</span></span>
<span id="cb638-23"><a href="going-further-reactR.html#cb638-23"></a>    outlined <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb638-24"><a href="going-further-reactR.html#cb638-24"></a>  <span class="op">}</span></span>
<span id="cb638-25"><a href="going-further-reactR.html#cb638-25"></a></span>
<span id="cb638-26"><a href="going-further-reactR.html#cb638-26"></a>  <span class="cf">return</span> (</span>
<span id="cb638-27"><a href="going-further-reactR.html#cb638-27"></a>    <span class="fu">&lt;Button</span></span>
<span id="cb638-28"><a href="going-further-reactR.html#cb638-28"></a>      <span class="ot">color</span><span class="op">=</span><span class="va">{configuration</span>.<span class="at">status</span><span class="va">}</span></span>
<span id="cb638-29"><a href="going-further-reactR.html#cb638-29"></a>      <span class="ot">type</span><span class="op">=</span><span class="st">"button"</span></span>
<span id="cb638-30"><a href="going-further-reactR.html#cb638-30"></a>      <span class="ot">className</span><span class="op">=</span><span class="er">...</span></span>
<span id="cb638-31"><a href="going-further-reactR.html#cb638-31"></a>      <span class="er">outline=...</span></span>
<span id="cb638-32"><a href="going-further-reactR.html#cb638-32"></a>      <span class="er">size=...</span></span>
<span id="cb638-33"><a href="going-further-reactR.html#cb638-33"></a>      <span class="er">onClick=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setValue</span>(value <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb638-34"><a href="going-further-reactR.html#cb638-34"></a>      <span class="va">{</span>innerTag<span class="va">}</span></span>
<span id="cb638-35"><a href="going-further-reactR.html#cb638-35"></a>    <span class="fu">&lt;/Button&gt;</span></span>
<span id="cb638-36"><a href="going-further-reactR.html#cb638-36"></a>  )<span class="op">;</span></span>
<span id="cb638-37"><a href="going-further-reactR.html#cb638-37"></a><span class="op">}</span></span>
<span id="cb638-38"><a href="going-further-reactR.html#cb638-38"></a></span>
<span id="cb638-39"><a href="going-further-reactR.html#cb638-39"></a><span class="at">reactShinyInput</span>(<span class="st">'.argon_action_button'</span><span class="op">,</span> <span class="st">'mypkg.argon_action_button'</span><span class="op">,</span> ArgonButton)<span class="op">;</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Try your code with:</li>
</ol>
<div class="sourceCode" id="cb639"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">mypkg</span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/bslib//reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"4"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span><span class="op">(</span>
    <span class="fu">argon_action_button</span><span class="op">(</span><span class="st">"plop"</span>, <span class="st">"Click me!"</span>, size <span class="op">=</span> <span class="st">"lg"</span>, outline <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
    <span class="fu">argon_action_button</span><span class="op">(</span><span class="st">"update"</span>, <span class="st">"Update button 1"</span>, icon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/icon.html">icon</a></span><span class="op">(</span><span class="st">"bicycle"</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">plop</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">update</span>, <span class="op">{</span>
    <span class="fu">update_argon_action_button</span><span class="op">(</span>
      <span class="va">session</span>, <span class="st">"plop"</span>, 
      configuration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        label <span class="op">=</span> <span class="st">"New text"</span>, 
        status <span class="op">=</span> <span class="st">"success"</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span>, ignoreInit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>You should get the result shown Figure <a href="going-further-reactR.html#fig:react-action-button">27.4</a>.</p>
<div class="figure">
<span id="fig:react-action-button"></span>
<img src="images/going-further/react-action-button.png" alt="Argon Action button with React" width="100%"><p class="caption">
FIGURE 27.4: Argon Action button with React
</p>
</div>
</div>
<div id="example-2-a-slider-input" class="section level4">
<h4>
<span class="header-section-number">27.2.1.4</span> Example 2: a slider input<a class="anchor" aria-label="anchor" href="#example-2-a-slider-input"><i class="fas fa-link"></i></a>
</h4>
<p>Below we propose a preliminary implementation of the Argon slider input. The <a href="https://demos.creative-tim.com/argon-design-system-react/?_ga=2.179634850.760978196.1612189904-282783983.1612189904#/documentation/forms">documentation</a> provides a JSX skeleton:</p>
<div class="sourceCode" id="cb640"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb640-1"><a href="going-further-reactR.html#cb640-1"></a><span class="op">{</span><span class="co">/* Simple slider */</span><span class="op">}</span></span>
<span id="cb640-2"><a href="going-further-reactR.html#cb640-2"></a><span class="kw">&lt;div</span> <span class="ot">className</span><span class="op">=</span><span class="st">"input-slider-container"</span><span class="kw">&gt;</span></span>
<span id="cb640-3"><a href="going-further-reactR.html#cb640-3"></a>  <span class="kw">&lt;div</span> <span class="ot">className</span><span class="op">=</span><span class="st">"slider"</span> <span class="ot">ref</span><span class="op">=</span><span class="st">"slider1"</span> <span class="kw">/&gt;</span></span>
<span id="cb640-4"><a href="going-further-reactR.html#cb640-4"></a>  <span class="fu">&lt;Row</span> <span class="ot">className</span><span class="op">=</span><span class="st">"mt-3 d-none"</span><span class="fu">&gt;</span></span>
<span id="cb640-5"><a href="going-further-reactR.html#cb640-5"></a>    <span class="fu">&lt;Col</span> <span class="ot">xs</span><span class="op">=</span><span class="st">"6"</span><span class="fu">&gt;</span></span>
<span id="cb640-6"><a href="going-further-reactR.html#cb640-6"></a>      <span class="kw">&lt;span</span> <span class="ot">className</span><span class="op">=</span><span class="st">"range-slider-value"</span><span class="kw">&gt;</span></span>
<span id="cb640-7"><a href="going-further-reactR.html#cb640-7"></a>        <span class="va">{</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">simpleValue</span><span class="va">}</span></span>
<span id="cb640-8"><a href="going-further-reactR.html#cb640-8"></a>      <span class="kw">&lt;/span&gt;</span></span>
<span id="cb640-9"><a href="going-further-reactR.html#cb640-9"></a>    <span class="fu">&lt;/Col&gt;</span></span>
<span id="cb640-10"><a href="going-further-reactR.html#cb640-10"></a>  <span class="fu">&lt;/Row&gt;</span></span>
<span id="cb640-11"><a href="going-further-reactR.html#cb640-11"></a><span class="kw">&lt;/div&gt;</span></span></code></pre></div>
<p>The slider JS API is actually taken from the well known <a href="https://refreshless.com/nouislider/">noUiSlider</a> library and is already available in the package node modules. Still in the same package as the action button input, we can call:</p>
<div class="sourceCode" id="cb641"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/scaffoldReactShinyInput.html">scaffoldReactShinyInput</a></span><span class="op">(</span><span class="st">"argon_slider"</span>, edit <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>It creates a new <code>srcjs/argon_slider.jsx</code> script. As Argon uses the pure JS API for noUIslider,
this would be too much work for us mainly because the provided <code>reactShinyInput</code> JS helper does not have a proper initialization method to create the slider instance. We would have to change it as per below:</p>
<div class="sourceCode" id="cb642"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb642-1"><a href="going-further-reactR.html#cb642-1"></a><span class="at">initialize</span>(el) <span class="op">{</span></span>
<span id="cb642-2"><a href="going-further-reactR.html#cb642-2"></a>  <span class="co">// Unchanged compared to reactR</span></span>
<span id="cb642-3"><a href="going-further-reactR.html#cb642-3"></a>  <span class="at">$</span>(el).<span class="at">data</span>(<span class="st">'value'</span><span class="op">,</span> <span class="va">JSON</span>.<span class="at">parse</span>(<span class="at">$</span>(el).<span class="at">next</span>().<span class="at">text</span>()))<span class="op">;</span></span>
<span id="cb642-4"><a href="going-further-reactR.html#cb642-4"></a>  <span class="at">$</span>(el).<span class="at">data</span>(<span class="st">'configuration'</span><span class="op">,</span> <span class="va">JSON</span>.<span class="at">parse</span>(<span class="at">$</span>(el).<span class="at">next</span>().<span class="at">next</span>().<span class="at">text</span>()))<span class="op">;</span></span>
<span id="cb642-5"><a href="going-further-reactR.html#cb642-5"></a>  </span>
<span id="cb642-6"><a href="going-further-reactR.html#cb642-6"></a>  <span class="co">// Create the slider instance </span></span>
<span id="cb642-7"><a href="going-further-reactR.html#cb642-7"></a>  self <span class="op">=</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb642-8"><a href="going-further-reactR.html#cb642-8"></a>  <span class="va">Slider</span>.<span class="at">create</span>(<span class="at">$</span>(el).<span class="at">attr</span>(id)<span class="op">,</span> <span class="op">{</span></span>
<span id="cb642-9"><a href="going-further-reactR.html#cb642-9"></a>    <span class="dt">start</span><span class="op">:</span> <span class="va">self</span>.<span class="at">getInputValue</span>(el)<span class="op">,</span></span>
<span id="cb642-10"><a href="going-further-reactR.html#cb642-10"></a>    <span class="dt">connect</span><span class="op">:</span> [<span class="kw">true</span><span class="op">,</span> <span class="kw">false</span>]<span class="op">,</span></span>
<span id="cb642-11"><a href="going-further-reactR.html#cb642-11"></a>    <span class="dt">step</span><span class="op">:</span> <span class="va">self</span>.<span class="at">getInputConfiguration</span>(el).<span class="at">step</span><span class="op">,</span></span>
<span id="cb642-12"><a href="going-further-reactR.html#cb642-12"></a>    <span class="dt">range</span><span class="op">:</span> <span class="op">{</span> </span>
<span id="cb642-13"><a href="going-further-reactR.html#cb642-13"></a>      <span class="dt">min</span><span class="op">:</span> <span class="va">self</span>.<span class="at">getInputConfiguration</span>(el).<span class="at">min</span><span class="op">,</span> </span>
<span id="cb642-14"><a href="going-further-reactR.html#cb642-14"></a>      <span class="dt">max</span><span class="op">:</span> <span class="va">self</span>.<span class="at">getInputConfiguration</span>(el).<span class="at">max</span> </span>
<span id="cb642-15"><a href="going-further-reactR.html#cb642-15"></a>    <span class="op">}</span></span>
<span id="cb642-16"><a href="going-further-reactR.html#cb642-16"></a>  <span class="op">}</span>)<span class="op">;</span></span>
<span id="cb642-17"><a href="going-further-reactR.html#cb642-17"></a><span class="op">}</span></span></code></pre></div>
<p>as well as updating methods like <code>setInputValue</code>, <code>setInputConfiguration</code>. Fortunately,
there is already a <a href="https://mmarkelov.github.io/react-nouislider/">nouislider-react</a> API, which will
makes our job much easier than shown above. To add the new dependency we run:</p>
<pre><code>yarn add nouislider-react</code></pre>
<p>and replace the import statement inside our JSX file to rely on <code>nouislider-react</code>.
The <code>Nouislider</code> component markup is fairly intuitive. We set the min and max as well as the current value:</p>
<div class="sourceCode" id="cb644"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb644-1"><a href="going-further-reactR.html#cb644-1"></a><span class="im">import</span> <span class="op">{</span> reactShinyInput <span class="op">}</span> <span class="im">from</span> <span class="st">'reactR'</span><span class="op">;</span></span>
<span id="cb644-2"><a href="going-further-reactR.html#cb644-2"></a><span class="im">import</span> Nouislider <span class="im">from</span> <span class="st">"nouislider-react"</span><span class="op">;</span></span>
<span id="cb644-3"><a href="going-further-reactR.html#cb644-3"></a></span>
<span id="cb644-4"><a href="going-further-reactR.html#cb644-4"></a><span class="kw">function</span> <span class="at">ArgonSlider</span>(<span class="op">{</span>configuration<span class="op">,</span> value<span class="op">,</span> setValue<span class="op">}</span>) <span class="op">{</span></span>
<span id="cb644-5"><a href="going-further-reactR.html#cb644-5"></a>  <span class="kw">const</span> rangeOpts <span class="op">=</span> <span class="op">{</span></span>
<span id="cb644-6"><a href="going-further-reactR.html#cb644-6"></a>    <span class="dt">min</span><span class="op">:</span> <span class="va">configuration</span>.<span class="at">min</span><span class="op">,</span></span>
<span id="cb644-7"><a href="going-further-reactR.html#cb644-7"></a>    <span class="dt">max</span><span class="op">:</span> <span class="va">configuration</span>.<span class="at">max</span></span>
<span id="cb644-8"><a href="going-further-reactR.html#cb644-8"></a>  <span class="op">};</span></span>
<span id="cb644-9"><a href="going-further-reactR.html#cb644-9"></a>  <span class="cf">return</span>(</span>
<span id="cb644-10"><a href="going-further-reactR.html#cb644-10"></a>    <span class="fu">&lt;Nouislider</span></span>
<span id="cb644-11"><a href="going-further-reactR.html#cb644-11"></a>      <span class="ot">range</span><span class="op">=</span><span class="va">{</span>rangeOpts<span class="va">}</span></span>
<span id="cb644-12"><a href="going-further-reactR.html#cb644-12"></a>      <span class="ot">start</span><span class="op">=</span><span class="va">{</span>value<span class="va">}</span></span>
<span id="cb644-13"><a href="going-further-reactR.html#cb644-13"></a>      <span class="ot">connect</span><span class="op">=</span><span class="va">{</span>[<span class="kw">true</span><span class="op">,</span> <span class="kw">false</span>]<span class="va">}</span></span>
<span id="cb644-14"><a href="going-further-reactR.html#cb644-14"></a>    <span class="fu">/&gt;</span></span>
<span id="cb644-15"><a href="going-further-reactR.html#cb644-15"></a>  )<span class="op">;</span></span>
<span id="cb644-16"><a href="going-further-reactR.html#cb644-16"></a><span class="op">}</span></span>
<span id="cb644-17"><a href="going-further-reactR.html#cb644-17"></a></span>
<span id="cb644-18"><a href="going-further-reactR.html#cb644-18"></a><span class="at">reactShinyInput</span>(<span class="st">'.argon_slider'</span><span class="op">,</span> <span class="st">'mypkg.argon_slider'</span><span class="op">,</span> ArgonSlider)<span class="op">;</span></span></code></pre></div>
<p>The <code>connect</code> property makes the slider bar background filled with the theme color. Figure <a href="going-further-reactR.html#fig:react-argon-slider">27.5</a> shows what happens when this parameter is disabled.</p>
<p>At that stage, we modified the <code>webpack.config.js</code> file so that there are multiple entry
points (to compile the action button and the slider) and combined the output in a more generic name:</p>
<div class="sourceCode" id="cb645"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb645-1"><a href="going-further-reactR.html#cb645-1"></a>entry<span class="op">:</span> [</span>
<span id="cb645-2"><a href="going-further-reactR.html#cb645-2"></a>  <span class="va">path</span>.<span class="at">join</span>(__dirname<span class="op">,</span> <span class="st">'srcjs'</span><span class="op">,</span> <span class="st">'argon_action_button.jsx'</span>)<span class="op">,</span></span>
<span id="cb645-3"><a href="going-further-reactR.html#cb645-3"></a>  <span class="va">path</span>.<span class="at">join</span>(__dirname<span class="op">,</span> <span class="st">'srcjs'</span><span class="op">,</span> <span class="st">'argon_slider.jsx'</span>)</span>
<span id="cb645-4"><a href="going-further-reactR.html#cb645-4"></a>]<span class="op">,</span></span>
<span id="cb645-5"><a href="going-further-reactR.html#cb645-5"></a>output<span class="op">:</span> <span class="op">{</span></span>
<span id="cb645-6"><a href="going-further-reactR.html#cb645-6"></a>  <span class="dt">path</span><span class="op">:</span> <span class="va">path</span>.<span class="at">join</span>(__dirname<span class="op">,</span> <span class="st">'inst/www/mypkg/argon'</span>)<span class="op">,</span></span>
<span id="cb645-7"><a href="going-further-reactR.html#cb645-7"></a>  <span class="dt">filename</span><span class="op">:</span> <span class="st">'argon.js'</span></span>
<span id="cb645-8"><a href="going-further-reactR.html#cb645-8"></a><span class="op">}</span></span></code></pre></div>
<p>This means we have to update the HTML dependency on the R side, for instance for
the <code>argon_slider_input.R</code>:</p>
<div class="sourceCode" id="cb646"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">argon_slider_input</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputId</span>, <span class="va">value</span>, <span class="va">default</span> <span class="op">=</span> <span class="va">value</span>, <span class="va">min</span>, <span class="va">max</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/createReactShinyInput.html">createReactShinyInput</a></span><span class="op">(</span>
    <span class="va">inputId</span>,
    <span class="st">"argon_slider"</span>,
    <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency</a></span><span class="op">(</span>
      name <span class="op">=</span> <span class="st">"argon"</span>,
      version <span class="op">=</span> <span class="st">"1.0.0"</span>,
      src <span class="op">=</span> <span class="st">"www/mypkg/argon"</span>,
      package <span class="op">=</span> <span class="st">"mypkg"</span>,
      script <span class="op">=</span> <span class="st">"argon.js"</span>
    <span class="op">)</span>,
    <span class="va">default</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      min <span class="op">=</span> <span class="va">min</span>,
      max <span class="op">=</span> <span class="va">max</span>
    <span class="op">)</span>,
    <span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">tags</a></span><span class="op">$</span><span class="va">div</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>We can run the app below:</p>
<div class="sourceCode" id="cb647"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/bslib//reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"4"</span><span class="op">)</span>,
  <span class="fu">argon_slider_input</span><span class="op">(</span><span class="st">"plop"</span>, <span class="fl">10</span>, min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">plop</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>As shown on Figure <a href="going-further-reactR.html#fig:react-argon-slider">27.5</a>, the slider is properly displayed and the value
is recovered from the server. However, nothing happens when the range is dragged.
The reason is quite simple: we did not set the <code>setValue</code> inside our JSX code yet.</p>
<div class="figure">
<span id="fig:react-argon-slider"></span>
<img src="images/going-further/react-argon-slider.png" alt="Slider input with Argon React" width="100%"><p class="caption">
FIGURE 27.5: Slider input with Argon React
</p>
</div>
<p>The slider API provides many <a href="https://refreshless.com/nouislider/events-callbacks/">events</a> but not all
are suitable for us. Ideally, we would like an update:</p>
<ul>
<li>Each time the range is released after dragging.</li>
<li>Each time the range is moved by arrow key (keyboard).</li>
</ul>
<p>This seems like a perfect shot for the <code>onChange</code> prop. Let’s add it to the <code>ArgonSlider</code> component:</p>
<div class="sourceCode" id="cb648"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb648-1"><a href="going-further-reactR.html#cb648-1"></a><span class="kw">function</span> <span class="at">ArgonSlider</span>(<span class="op">{</span>configuration<span class="op">,</span> value<span class="op">,</span> setValue<span class="op">,</span> el<span class="op">}</span>) <span class="op">{</span></span>
<span id="cb648-2"><a href="going-further-reactR.html#cb648-2"></a>  <span class="kw">const</span> rangeOpts <span class="op">=</span> <span class="op">{</span></span>
<span id="cb648-3"><a href="going-further-reactR.html#cb648-3"></a>    <span class="dt">min</span><span class="op">:</span> <span class="va">configuration</span>.<span class="at">min</span><span class="op">,</span></span>
<span id="cb648-4"><a href="going-further-reactR.html#cb648-4"></a>    <span class="dt">max</span><span class="op">:</span> <span class="va">configuration</span>.<span class="at">max</span></span>
<span id="cb648-5"><a href="going-further-reactR.html#cb648-5"></a>  <span class="op">};</span></span>
<span id="cb648-6"><a href="going-further-reactR.html#cb648-6"></a></span>
<span id="cb648-7"><a href="going-further-reactR.html#cb648-7"></a>  <span class="cf">return</span>(</span>
<span id="cb648-8"><a href="going-further-reactR.html#cb648-8"></a>    <span class="fu">&lt;Nouislider</span></span>
<span id="cb648-9"><a href="going-further-reactR.html#cb648-9"></a>      <span class="ot">range</span><span class="op">=</span><span class="va">{</span>rangeOpts<span class="va">}</span></span>
<span id="cb648-10"><a href="going-further-reactR.html#cb648-10"></a>      <span class="ot">start</span><span class="op">=</span><span class="va">{</span>[value]<span class="va">}</span></span>
<span id="cb648-11"><a href="going-further-reactR.html#cb648-11"></a>      <span class="ot">connect</span><span class="op">=</span><span class="va">{</span>[<span class="kw">true</span><span class="op">,</span> <span class="kw">false</span>]<span class="va">}</span></span>
<span id="cb648-12"><a href="going-further-reactR.html#cb648-12"></a>      <span class="ot">onChange</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="at">setValue</span>()<span class="va">}</span></span>
<span id="cb648-13"><a href="going-further-reactR.html#cb648-13"></a>    <span class="fu">/&gt;</span></span>
<span id="cb648-14"><a href="going-further-reactR.html#cb648-14"></a>  )<span class="op">;</span></span>
<span id="cb648-15"><a href="going-further-reactR.html#cb648-15"></a><span class="op">}</span></span></code></pre></div>
<p>What value should we pass to <code>setValue</code>? This is quite easy to recover the slider value
directly within the React component. We pass a parameter to the function, which will recover the
latest value:</p>
<div class="sourceCode" id="cb649"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb649-1"><a href="going-further-reactR.html#cb649-1"></a>value <span class="kw">=&gt;</span> <span class="at">setValue</span>(<span class="at">parseFloat</span>(value))</span></code></pre></div>
<p>The trick is to convert the value to a number since we recover a string by default. You may
use <code>parseInt</code> or <code>parseFloat</code>, depending whether you want a integer or the exact value.
Right now, the slider cannot be moved with the keyboard. Adding the <code>keyboardSupport</code> prop
make it possible. This may correspond to a parameter provided in the <code>argon_slider_input</code> configuration.
The <code>tooltips</code> parameter enhances the user experience by showing the current value, on top of the slider, while
<code>pips</code> add a simple grid. Not mentioned in the documentation, we add some CSS properties (top and bottom margins) to improve the display. Importantly, as the update slider function passes a named list to JS, any
missing property is dropped, which can lead to undefined values on the JS side and unexpected behavior.
Therefore, it is good to put default values whenever necessary to avoid this kind of issue. For instance,
assume you passed <code>orientation = "horizontal"</code> upon slider creation and forgot to
put that parameter in the update list, you can do the following in the JSX code:</p>
<div class="sourceCode" id="cb650"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb650-1"><a href="going-further-reactR.html#cb650-1"></a><span class="cf">if</span> (<span class="va">configuration</span>.<span class="at">orientation</span> <span class="op">===</span> <span class="kw">undefined</span>) <span class="op">{</span></span>
<span id="cb650-2"><a href="going-further-reactR.html#cb650-2"></a>  <span class="va">configuration</span>.<span class="at">orientation</span> <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">;</span></span>
<span id="cb650-3"><a href="going-further-reactR.html#cb650-3"></a><span class="op">}</span></span></code></pre></div>
<p>The whole component code may be found below:</p>
<div class="sourceCode" id="cb651"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb651-1"><a href="going-further-reactR.html#cb651-1"></a><span class="kw">function</span> <span class="at">ArgonSlider</span>(<span class="op">{</span>configuration<span class="op">,</span> value<span class="op">,</span> setValue<span class="op">,</span> el<span class="op">}</span>) <span class="op">{</span></span>
<span id="cb651-2"><a href="going-further-reactR.html#cb651-2"></a>  <span class="kw">const</span> rangeOpts <span class="op">=</span> <span class="op">{</span></span>
<span id="cb651-3"><a href="going-further-reactR.html#cb651-3"></a>    <span class="dt">min</span><span class="op">:</span> <span class="va">configuration</span>.<span class="at">min</span><span class="op">,</span></span>
<span id="cb651-4"><a href="going-further-reactR.html#cb651-4"></a>    <span class="dt">max</span><span class="op">:</span> <span class="va">configuration</span>.<span class="at">max</span></span>
<span id="cb651-5"><a href="going-further-reactR.html#cb651-5"></a>  <span class="op">};</span></span>
<span id="cb651-6"><a href="going-further-reactR.html#cb651-6"></a>  </span>
<span id="cb651-7"><a href="going-further-reactR.html#cb651-7"></a>  <span class="co">// Better margins</span></span>
<span id="cb651-8"><a href="going-further-reactR.html#cb651-8"></a>  <span class="kw">const</span> sliderStyle <span class="op">=</span> <span class="op">{</span><span class="dt">marginTop</span><span class="op">:</span> <span class="st">"50px"</span><span class="op">,</span> <span class="dt">marginBottom</span><span class="op">:</span> <span class="st">"50px"</span><span class="op">};</span></span>
<span id="cb651-9"><a href="going-further-reactR.html#cb651-9"></a>  </span>
<span id="cb651-10"><a href="going-further-reactR.html#cb651-10"></a>  <span class="co">// Grid</span></span>
<span id="cb651-11"><a href="going-further-reactR.html#cb651-11"></a>  <span class="kw">const</span> pipOpts <span class="op">=</span> <span class="op">{</span></span>
<span id="cb651-12"><a href="going-further-reactR.html#cb651-12"></a>    <span class="dt">mode</span><span class="op">:</span> <span class="st">'range'</span><span class="op">,</span></span>
<span id="cb651-13"><a href="going-further-reactR.html#cb651-13"></a>    <span class="dt">density</span><span class="op">:</span> <span class="dv">3</span></span>
<span id="cb651-14"><a href="going-further-reactR.html#cb651-14"></a>  <span class="op">};</span></span>
<span id="cb651-15"><a href="going-further-reactR.html#cb651-15"></a>  </span>
<span id="cb651-16"><a href="going-further-reactR.html#cb651-16"></a>  <span class="cf">return</span>(</span>
<span id="cb651-17"><a href="going-further-reactR.html#cb651-17"></a>    <span class="fu">&lt;Nouislider</span></span>
<span id="cb651-18"><a href="going-further-reactR.html#cb651-18"></a>      <span class="ot">style</span><span class="op">=</span><span class="va">{</span>sliderStyle<span class="va">}</span></span>
<span id="cb651-19"><a href="going-further-reactR.html#cb651-19"></a>      <span class="ot">range</span><span class="op">=</span><span class="va">{</span>rangeOpts<span class="va">}</span></span>
<span id="cb651-20"><a href="going-further-reactR.html#cb651-20"></a>      <span class="ot">start</span><span class="op">=</span><span class="va">{</span>[value]<span class="va">}</span></span>
<span id="cb651-21"><a href="going-further-reactR.html#cb651-21"></a>      <span class="ot">connect</span><span class="op">=</span><span class="va">{</span>[<span class="kw">true</span><span class="op">,</span> <span class="kw">false</span>]<span class="va">}</span></span>
<span id="cb651-22"><a href="going-further-reactR.html#cb651-22"></a>      <span class="ot">onChange</span><span class="op">=</span><span class="va">{</span>value <span class="kw">=&gt;</span> <span class="at">setValue</span>(<span class="at">parseFloat</span>(value))<span class="va">}</span></span>
<span id="cb651-23"><a href="going-further-reactR.html#cb651-23"></a>      <span class="ot">keyboardSupport</span><span class="op">=</span><span class="va">{configuration</span>.<span class="at">keyboard</span><span class="va">}</span></span>
<span id="cb651-24"><a href="going-further-reactR.html#cb651-24"></a>      <span class="ot">tooltips</span><span class="op">=</span><span class="va">{configuration</span>.<span class="at">tooltips</span><span class="va">}</span></span>
<span id="cb651-25"><a href="going-further-reactR.html#cb651-25"></a>      <span class="ot">pips</span><span class="op">=</span><span class="va">{</span>pipOpts<span class="va">}</span></span>
<span id="cb651-26"><a href="going-further-reactR.html#cb651-26"></a>    <span class="fu">/&gt;</span></span>
<span id="cb651-27"><a href="going-further-reactR.html#cb651-27"></a>  )<span class="op">;</span></span>
<span id="cb651-28"><a href="going-further-reactR.html#cb651-28"></a><span class="op">}</span></span></code></pre></div>
<p>The <code>argon_slider_input</code> is given by:</p>
<div class="sourceCode" id="cb652"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">argon_slider_input</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputId</span>, <span class="va">value</span>, <span class="va">default</span> <span class="op">=</span> <span class="va">value</span>, <span class="va">min</span>, <span class="va">max</span>, <span class="va">keyboard</span> <span class="op">=</span> <span class="cn">TRUE</span>,
                               <span class="va">tooltips</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/createReactShinyInput.html">createReactShinyInput</a></span><span class="op">(</span>
    <span class="va">inputId</span>,
    <span class="st">"argon_slider"</span>,
    <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency</a></span><span class="op">(</span>
      name <span class="op">=</span> <span class="st">"argon"</span>,
      version <span class="op">=</span> <span class="st">"1.0.0"</span>,
      src <span class="op">=</span> <span class="st">"www/mypkg/argon"</span>,
      package <span class="op">=</span> <span class="st">"mypkg"</span>,
      script <span class="op">=</span> <span class="st">"argon.js"</span>
    <span class="op">)</span>,
    <span class="va">default</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      min <span class="op">=</span> <span class="va">min</span>,
      max <span class="op">=</span> <span class="va">max</span>,
      keyboardSupport <span class="op">=</span> <span class="va">keyboard</span>,
      tooltips <span class="op">=</span> <span class="va">tooltips</span>
    <span class="op">)</span>,
    <span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">tags</a></span><span class="op">$</span><span class="va">div</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>There are many more parameters that can be added to the following <a href="https://refreshless.com/nouislider/slider-options/">API</a>. We leave it as an
exercise for the reader.</p>
<p>Finally, let’s see how <code>update_argon_slider_input</code> works:</p>
<div class="sourceCode" id="cb653"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/bslib//reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"4"</span><span class="op">)</span>,
  <span class="fu">argon_slider_input</span><span class="op">(</span><span class="st">"plop"</span>, <span class="fl">10</span>, min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">br</a></span><span class="op">(</span><span class="op">)</span>,
  <span class="fu">argon_action_button</span><span class="op">(</span><span class="st">"update"</span>, <span class="st">"Update button 1"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">plop</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">update</span>, <span class="op">{</span>
    <span class="fu">update_argon_slider_input</span><span class="op">(</span>
      <span class="va">session</span>, <span class="st">"plop"</span>,
      value <span class="op">=</span> <span class="fl">100</span>,
      configuration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        min <span class="op">=</span> <span class="fl">0</span>,
        max <span class="op">=</span> <span class="fl">200</span>,
        tooltips <span class="op">=</span> <span class="cn">FALSE</span>,
        keyboardSupport <span class="op">=</span> <span class="cn">FALSE</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span>, ignoreInit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>The <code>keyboardSupport</code> option does not seem changed, neither is the <code>tooltips</code> option. Actually,
only that <a href="https://refreshless.com/nouislider/more/#section-update">list</a> may be modified. Let’s address this below.
The <code>nouiSlider</code> React API provides internal access to the slider instance from within the
<a href="https://github.com/mmarkelov/react-nouislider#using-with-ref">component</a>. To make it work, we have to leverage the React Hook feature:</p>
<ul>
<li>Create a Hook hosting the component reference and a method to update it with <code>React.useState</code>.</li>
<li>Update the instance option each time the component is re-rendered by Shiny.</li>
</ul>
<div class="sourceCode" id="cb654"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb654-1"><a href="going-further-reactR.html#cb654-1"></a><span class="kw">const</span> [ref<span class="op">,</span> setRef] <span class="op">=</span> <span class="va">React</span>.<span class="at">useState</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb654-2"><a href="going-further-reactR.html#cb654-2"></a></span>
<span id="cb654-3"><a href="going-further-reactR.html#cb654-3"></a><span class="kw">const</span> setConfiguration <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb654-4"><a href="going-further-reactR.html#cb654-4"></a>  <span class="cf">if</span> (ref <span class="op">&amp;&amp;</span> <span class="va">ref</span>.<span class="at">noUiSlider</span>) <span class="op">{</span></span>
<span id="cb654-5"><a href="going-further-reactR.html#cb654-5"></a>    <span class="va">ref</span>.<span class="va">noUiSlider</span>.<span class="at">updateOptions</span>(configuration)<span class="op">;</span></span>
<span id="cb654-6"><a href="going-further-reactR.html#cb654-6"></a>  <span class="op">}</span></span>
<span id="cb654-7"><a href="going-further-reactR.html#cb654-7"></a><span class="op">};</span></span>
<span id="cb654-8"><a href="going-further-reactR.html#cb654-8"></a></span>
<span id="cb654-9"><a href="going-further-reactR.html#cb654-9"></a><span class="at">setConfiguration</span>()<span class="op">;</span></span></code></pre></div>
<p>We must specify the <code>instanceRef</code> property which will capture the slider reference when available and update
the local ref:</p>
<div class="sourceCode" id="cb655"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb655-1"><a href="going-further-reactR.html#cb655-1"></a><span class="fu">&lt;Nouislider</span></span>
<span id="cb655-2"><a href="going-further-reactR.html#cb655-2"></a>  <span class="ot">style</span><span class="op">=</span><span class="va">{</span>sliderStyle<span class="va">}</span></span>
<span id="cb655-3"><a href="going-further-reactR.html#cb655-3"></a>  <span class="ot">keyboardSupport</span><span class="op">=</span><span class="va">{configuration</span>.<span class="at">keyboard</span><span class="va">}</span></span>
<span id="cb655-4"><a href="going-further-reactR.html#cb655-4"></a>  <span class="ot">connect</span><span class="op">=</span><span class="va">{</span>[<span class="kw">true</span><span class="op">,</span> <span class="kw">false</span>]<span class="va">}</span></span>
<span id="cb655-5"><a href="going-further-reactR.html#cb655-5"></a>  <span class="ot">range</span><span class="op">=</span><span class="va">{</span>rangeOpts<span class="va">}</span></span>
<span id="cb655-6"><a href="going-further-reactR.html#cb655-6"></a>  <span class="ot">start</span><span class="op">=</span><span class="va">{</span>[value]<span class="va">}</span></span>
<span id="cb655-7"><a href="going-further-reactR.html#cb655-7"></a>  <span class="ot">onChange</span><span class="op">=</span><span class="va">{</span>value <span class="kw">=&gt;</span> <span class="at">setValue</span>(<span class="at">parseFloat</span>(value))<span class="va">}</span></span>
<span id="cb655-8"><a href="going-further-reactR.html#cb655-8"></a>  <span class="ot">tooltips</span><span class="op">=</span><span class="va">{configuration</span>.<span class="at">tooltips</span><span class="va">}</span></span>
<span id="cb655-9"><a href="going-further-reactR.html#cb655-9"></a>  <span class="ot">pips</span><span class="op">=</span><span class="va">{</span>pipOpts<span class="va">}</span></span>
<span id="cb655-10"><a href="going-further-reactR.html#cb655-10"></a>  <span class="ot">instanceRef</span><span class="op">=</span><span class="va">{</span></span>
<span id="cb655-11"><a href="going-further-reactR.html#cb655-11"></a>    instance <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb655-12"><a href="going-further-reactR.html#cb655-12"></a>      <span class="cf">if</span> (instance <span class="op">&amp;&amp;</span> <span class="op">!</span>ref) <span class="op">{</span></span>
<span id="cb655-13"><a href="going-further-reactR.html#cb655-13"></a>        <span class="at">setRef</span>(instance)<span class="op">;</span></span>
<span id="cb655-14"><a href="going-further-reactR.html#cb655-14"></a>      <span class="op">}</span></span>
<span id="cb655-15"><a href="going-further-reactR.html#cb655-15"></a>    <span class="op">}</span></span>
<span id="cb655-16"><a href="going-further-reactR.html#cb655-16"></a>  <span class="va">}</span></span>
<span id="cb655-17"><a href="going-further-reactR.html#cb655-17"></a><span class="fu">/&gt;</span></span></code></pre></div>
<p>We recompile the code and run the previous example. While the tooltip is gone,
the keyboard interaction is still there. This is not surprising as <code>updateOptions</code> does
not handle all settings. The final result is displayed Figure <a href="going-further-reactR.html#fig:react-argon-slider-final">27.6</a>.</p>
<div class="figure">
<span id="fig:react-argon-slider-final"></span>
<img src="images/going-further/react-argon-slider-final.png" alt="Slider input with Argon React with more options" width="100%"><p class="caption">
FIGURE 27.6: Slider input with Argon React with more options
</p>
</div>
</div>
<div id="exercise-2-a-range-slider" class="section level4">
<h4>
<span class="header-section-number">27.2.1.5</span> Exercise 2: a range slider<a class="anchor" aria-label="anchor" href="#exercise-2-a-range-slider"><i class="fas fa-link"></i></a>
</h4>
<p>Based on the above example, improve the previous slider widget to handle
the range slider case, that is enable the user to pass a vector of initial values.</p>
</div>
</div>
<div id="toward-custom-components" class="section level3">
<h3>
<span class="header-section-number">27.2.2</span> Toward custom components<a class="anchor" aria-label="anchor" href="#toward-custom-components"><i class="fas fa-link"></i></a>
</h3>
<p>Creating custom components in Shiny is not that easy. If we assume we want to create
a custom text container which color, size and many CSS properties can change dynamically.
This is a bit different from the approach shown in Chapter <a href="beautify-with-bootstraplib.html#beautify-with-bootstraplib">8</a> since
the <a href="https://rstudio.github.io/bslib/">bslib</a> gives access to Bootstrap <a href="https://rstudio.github.io/bslib/articles/bs4-variables.html">variables</a> but not basic CSS properties like the color of a <code>span</code> element.</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="mobile-going-further.html"><span class="header-section-number">26</span> Going further</a></div>
<div class="next"><a href="references.html">References</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#going-further-reactR"><span class="header-section-number">27</span> R + Shiny + React: welcome {reactR}</a></li>
<li>
<a class="nav-link" href="#quick-introduction-to-react"><span class="header-section-number">27.1</span> Quick introduction to React</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#setup-1"><span class="header-section-number">27.1.1</span> Setup</a></li>
<li><a class="nav-link" href="#basics-1"><span class="header-section-number">27.1.2</span> Basics</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#introduction-to-reactr"><span class="header-section-number">27.2</span> Introduction to {reactR}</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#scaffold-inputs"><span class="header-section-number">27.2.1</span> Scaffold inputs</a></li>
<li><a class="nav-link" href="#toward-custom-components"><span class="header-section-number">27.2.2</span> Toward custom components</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/blob/master/going-further-reactR.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/edit/master/going-further-reactR.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Outstanding User Interfaces with Shiny</strong>" was written by David Granjon. It was last built on 2021-02-12.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
