<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 13 Testing and validating templates elements | Outstanding User Interfaces with Shiny</title>
  <meta name="description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 13 Testing and validating templates elements | Outstanding User Interfaces with Shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 13 Testing and validating templates elements | Outstanding User Interfaces with Shiny" />
  
  <meta name="twitter:description" content="This book will serve as content for the 2020 erum workshop." />
  

<meta name="author" content="David Granjon" />


<meta name="date" content="2020-05-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="custom-templates-skeleton.html"/>
<link rel="next" href="custom-templates-inputs.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Outstanding User Interfaces with Shiny</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#is-this-book-for-me"><i class="fa fa-check"></i>Is this book for me?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#related-content"><i class="fa fa-check"></i>Related content</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#packages"><i class="fa fa-check"></i>Packages</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#preliminary-exercices"><i class="fa fa-check"></i>Preliminary exercices</a></li>
</ul></li>
<li class="part"><span><b>Survival Kit</b></span></li>
<li class="chapter" data-level="2" data-path="survival-kit-html.html"><a href="survival-kit-html.html"><i class="fa fa-check"></i><b>2</b> HTML</a><ul>
<li class="chapter" data-level="2.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-basics"><i class="fa fa-check"></i><b>2.1</b> HTML Basics</a></li>
<li class="chapter" data-level="2.2" data-path="survival-kit-html.html"><a href="survival-kit-html.html#tag-attributes"><i class="fa fa-check"></i><b>2.2</b> Tag attributes</a></li>
<li class="chapter" data-level="2.3" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-page-skeleton"><i class="fa fa-check"></i><b>2.3</b> HTML page: skeleton</a></li>
<li class="chapter" data-level="2.4" data-path="survival-kit-html.html"><a href="survival-kit-html.html#about-the-document-object-model-dom"><i class="fa fa-check"></i><b>2.4</b> About the Document Object Model (DOM)</a><ul>
<li class="chapter" data-level="2.4.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#visualizing-the-dom-the-html-inspector"><i class="fa fa-check"></i><b>2.4.1</b> Visualizing the DOM: the HTML inspector</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="survival-kit-html.html"><a href="survival-kit-html.html#preliminary-introduction-to-css-and-javascript"><i class="fa fa-check"></i><b>2.5</b> Preliminary introduction to CSS and JavaScript</a><ul>
<li class="chapter" data-level="2.5.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-and-css"><i class="fa fa-check"></i><b>2.5.1</b> HTML and CSS</a></li>
<li class="chapter" data-level="2.5.2" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-and-javascript"><i class="fa fa-check"></i><b>2.5.2</b> HTML and JavaScript</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html"><i class="fa fa-check"></i><b>3</b> JavaScript</a><ul>
<li class="chapter" data-level="3.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#setup"><i class="fa fa-check"></i><b>3.2</b> Setup</a><ul>
<li class="chapter" data-level="3.2.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#node"><i class="fa fa-check"></i><b>3.2.1</b> Node</a></li>
<li class="chapter" data-level="3.2.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#choose-a-good-ide"><i class="fa fa-check"></i><b>3.2.2</b> Choose a good IDE</a></li>
<li class="chapter" data-level="3.2.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#first-script"><i class="fa fa-check"></i><b>3.2.3</b> First Script</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#programming-with-js-basis"><i class="fa fa-check"></i><b>3.3</b> Programming with JS: basis</a><ul>
<li class="chapter" data-level="3.3.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#js-types"><i class="fa fa-check"></i><b>3.3.1</b> JS types</a></li>
<li class="chapter" data-level="3.3.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#variables"><i class="fa fa-check"></i><b>3.3.2</b> Variables</a></li>
<li class="chapter" data-level="3.3.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#conditions"><i class="fa fa-check"></i><b>3.3.3</b> Conditions</a></li>
<li class="chapter" data-level="3.3.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#objects"><i class="fa fa-check"></i><b>3.3.4</b> Objects</a></li>
<li class="chapter" data-level="3.3.5" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#iterations"><i class="fa fa-check"></i><b>3.3.5</b> Iterations</a></li>
<li class="chapter" data-level="3.3.6" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#functions"><i class="fa fa-check"></i><b>3.3.6</b> Functions</a></li>
<li class="chapter" data-level="3.3.7" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#event-listeners"><i class="fa fa-check"></i><b>3.3.7</b> Event listeners</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#jquery"><i class="fa fa-check"></i><b>3.4</b> jQuery</a><ul>
<li class="chapter" data-level="3.4.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#introduction-1"><i class="fa fa-check"></i><b>3.4.1</b> Introduction</a></li>
<li class="chapter" data-level="3.4.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#syntax"><i class="fa fa-check"></i><b>3.4.2</b> Syntax</a></li>
<li class="chapter" data-level="3.4.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#useful-functions"><i class="fa fa-check"></i><b>3.4.3</b> Useful functions</a></li>
<li class="chapter" data-level="3.4.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#chaining-jquery-methods"><i class="fa fa-check"></i><b>3.4.4</b> Chaining jQuery methods</a></li>
<li class="chapter" data-level="3.4.5" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#iterations-1"><i class="fa fa-check"></i><b>3.4.5</b> Iterations</a></li>
<li class="chapter" data-level="3.4.6" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#good-practice"><i class="fa fa-check"></i><b>3.4.6</b> Good practice</a></li>
<li class="chapter" data-level="3.4.7" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#events"><i class="fa fa-check"></i><b>3.4.7</b> Events</a></li>
<li class="chapter" data-level="3.4.8" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#extending-objects"><i class="fa fa-check"></i><b>3.4.8</b> Extending objects</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Shiny: What’s under the Hood?</b></span></li>
<li class="chapter" data-level="4" data-path="shiny-intro.html"><a href="shiny-intro.html"><i class="fa fa-check"></i><b>4</b> Introduction</a><ul>
<li class="chapter" data-level="4.1" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-html-css-and-javascript"><i class="fa fa-check"></i><b>4.1</b> Shiny, HTML, CSS and JavaScript</a></li>
<li class="chapter" data-level="4.2" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-websocket"><i class="fa fa-check"></i><b>4.2</b> Websocket: R/JS bidirectional communication</a></li>
<li class="chapter" data-level="4.3" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-session"><i class="fa fa-check"></i><b>4.3</b> The Shiny session object</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="shiny-input-system.html"><a href="shiny-input-system.html"><i class="fa fa-check"></i><b>5</b> Shiny’s input system</a><ul>
<li class="chapter" data-level="5.1" data-path="shiny-input-system.html"><a href="shiny-input-system.html#shiny-javascript-sources"><i class="fa fa-check"></i><b>5.1</b> Shiny JavaScript sources</a></li>
<li class="chapter" data-level="5.2" data-path="shiny-input-system.html"><a href="shiny-input-system.html#the-shiny-javascript-object"><i class="fa fa-check"></i><b>5.2</b> The Shiny JavaScript object</a></li>
<li class="chapter" data-level="5.3" data-path="shiny-input-system.html"><a href="shiny-input-system.html#initialization"><i class="fa fa-check"></i><b>5.3</b> Initialization</a></li>
<li class="chapter" data-level="5.4" data-path="shiny-input-system.html"><a href="shiny-input-system.html#input-bindings"><i class="fa fa-check"></i><b>5.4</b> Input bindings</a><ul>
<li class="chapter" data-level="5.4.1" data-path="shiny-input-system.html"><a href="shiny-input-system.html#input-structure"><i class="fa fa-check"></i><b>5.4.1</b> Input structure</a></li>
<li class="chapter" data-level="5.4.2" data-path="shiny-input-system.html"><a href="shiny-input-system.html#binding-shiny-inputs"><i class="fa fa-check"></i><b>5.4.2</b> Binding Shiny inputs</a></li>
<li class="chapter" data-level="5.4.3" data-path="shiny-input-system.html"><a href="shiny-input-system.html#binding-other-elements"><i class="fa fa-check"></i><b>5.4.3</b> Binding other elements</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="shiny-input-system.html"><a href="shiny-input-system.html#utilities-to-quickly-define-new-inputs"><i class="fa fa-check"></i><b>5.5</b> Utilities to quickly define new inputs</a></li>
<li class="chapter" data-level="5.6" data-path="shiny-input-system.html"><a href="shiny-input-system.html#miscellaneous"><i class="fa fa-check"></i><b>5.6</b> Miscellaneous</a><ul>
<li class="chapter" data-level="5.6.1" data-path="shiny-input-system.html"><a href="shiny-input-system.html#get-access-to-initial-values"><i class="fa fa-check"></i><b>5.6.1</b> Get access to initial values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="shiny-custom-handler.html"><a href="shiny-custom-handler.html"><i class="fa fa-check"></i><b>6</b> Custom handlers: from R to JavaScript</a></li>
<li class="part"><span><b>htmltools</b></span></li>
<li class="chapter" data-level="7" data-path="htmltools-overview.html"><a href="htmltools-overview.html"><i class="fa fa-check"></i><b>7</b> htmltools overview</a><ul>
<li class="chapter" data-level="7.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#html-tags"><i class="fa fa-check"></i><b>7.1</b> HTML Tags</a></li>
<li class="chapter" data-level="7.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#notations"><i class="fa fa-check"></i><b>7.2</b> Notations</a></li>
<li class="chapter" data-level="7.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#adding-new-tags"><i class="fa fa-check"></i><b>7.3</b> Adding new tags</a></li>
<li class="chapter" data-level="7.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#alternative-way-to-write-tags"><i class="fa fa-check"></i><b>7.4</b> Alternative way to write tags</a></li>
<li class="chapter" data-level="7.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#playing-with-tags"><i class="fa fa-check"></i><b>7.5</b> Playing with tags</a><ul>
<li class="chapter" data-level="7.5.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#tags-structure"><i class="fa fa-check"></i><b>7.5.1</b> Tags structure</a></li>
<li class="chapter" data-level="7.5.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#useful-functions-for-tags"><i class="fa fa-check"></i><b>7.5.2</b> Useful functions for tags</a></li>
<li class="chapter" data-level="7.5.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#other-interesting-functions"><i class="fa fa-check"></i><b>7.5.3</b> Other interesting functions</a></li>
<li class="chapter" data-level="7.5.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#conditionally-set-attributes"><i class="fa fa-check"></i><b>7.5.4</b> Conditionally set attributes</a></li>
<li class="chapter" data-level="7.5.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#using"><i class="fa fa-check"></i><b>7.5.5</b> Using %&gt;%</a></li>
<li class="chapter" data-level="7.5.6" data-path="htmltools-overview.html"><a href="htmltools-overview.html#programmatically-create-children-elements"><i class="fa fa-check"></i><b>7.5.6</b> Programmatically create children elements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html"><i class="fa fa-check"></i><b>8</b> Dependency utilities</a><ul>
<li class="chapter" data-level="8.1" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-dirty-approach"><i class="fa fa-check"></i><b>8.1</b> The dirty approach</a></li>
<li class="chapter" data-level="8.2" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-clean-approach"><i class="fa fa-check"></i><b>8.2</b> The clean approach</a></li>
<li class="chapter" data-level="8.3" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#another-example-importing-html-dependencies-from-other-packages"><i class="fa fa-check"></i><b>8.3</b> Another example: Importing HTML dependencies from other packages</a></li>
<li class="chapter" data-level="8.4" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#suppress-dependencies"><i class="fa fa-check"></i><b>8.4</b> Suppress dependencies</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html"><i class="fa fa-check"></i><b>9</b> Other tools</a><ul>
<li class="chapter" data-level="9.1" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html#css"><i class="fa fa-check"></i><b>9.1</b> CSS</a></li>
</ul></li>
<li class="part"><span><b>Practice</b></span></li>
<li class="chapter" data-level="10" data-path="custom-templates-selection.html"><a href="custom-templates-selection.html"><i class="fa fa-check"></i><b>10</b> Template selection</a></li>
<li class="chapter" data-level="11" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html"><i class="fa fa-check"></i><b>11</b> Define dependencies</a><ul>
<li class="chapter" data-level="11.1" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#discover-the-project"><i class="fa fa-check"></i><b>11.1</b> Discover the project</a></li>
<li class="chapter" data-level="11.2" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#identify-mandatory-dependencies"><i class="fa fa-check"></i><b>11.2</b> Identify mandatory dependencies</a></li>
<li class="chapter" data-level="11.3" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#bundle-dependencies"><i class="fa fa-check"></i><b>11.3</b> Bundle dependencies</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html"><i class="fa fa-check"></i><b>12</b> Template skeleton</a><ul>
<li class="chapter" data-level="12.1" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#identify-template-elements"><i class="fa fa-check"></i><b>12.1</b> Identify template elements</a></li>
<li class="chapter" data-level="12.2" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#design-the-page-layout"><i class="fa fa-check"></i><b>12.2</b> Design the page layout</a><ul>
<li class="chapter" data-level="12.2.1" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-page-wrapper"><i class="fa fa-check"></i><b>12.2.1</b> The page wrapper</a></li>
<li class="chapter" data-level="12.2.2" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-body-content"><i class="fa fa-check"></i><b>12.2.2</b> The body content</a></li>
<li class="chapter" data-level="12.2.3" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-footer"><i class="fa fa-check"></i><b>12.2.3</b> The footer</a></li>
<li class="chapter" data-level="12.2.4" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-navbar-or-header"><i class="fa fa-check"></i><b>12.2.4</b> The navbar (or header)</a></li>
<li class="chapter" data-level="12.2.5" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#card-containers"><i class="fa fa-check"></i><b>12.2.5</b> Card containers</a></li>
<li class="chapter" data-level="12.2.6" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#ribbons-card-components"><i class="fa fa-check"></i><b>12.2.6</b> Ribbons: card components</a></li>
<li class="chapter" data-level="12.2.7" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#icons"><i class="fa fa-check"></i><b>12.2.7</b> Icons</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#exercises"><i class="fa fa-check"></i><b>12.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html"><i class="fa fa-check"></i><b>13</b> Testing and validating templates elements</a><ul>
<li class="chapter" data-level="13.1" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#validate-template-functions"><i class="fa fa-check"></i><b>13.1</b> Validate template functions</a><ul>
<li class="chapter" data-level="13.1.1" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#create-your-own-validations"><i class="fa fa-check"></i><b>13.1.1</b> Create your own validations</a></li>
<li class="chapter" data-level="13.1.2" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#existing-utils-functions"><i class="fa fa-check"></i><b>13.1.2</b> Existing utils functions</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#testing-templates-elements"><i class="fa fa-check"></i><b>13.2</b> Testing templates elements</a></li>
<li class="chapter" data-level="13.3" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#testing-javascript"><i class="fa fa-check"></i><b>13.3</b> Testing JavaScript</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html"><i class="fa fa-check"></i><b>14</b> Develop custom input widgets</a><ul>
<li class="chapter" data-level="14.1" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#tabler-action-button"><i class="fa fa-check"></i><b>14.1</b> Tabler action button</a><ul>
<li class="chapter" data-level="14.1.1" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#reminders-about-the-action-button"><i class="fa fa-check"></i><b>14.1.1</b> Reminders about the action button</a></li>
<li class="chapter" data-level="14.1.2" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#application-to-tabler"><i class="fa fa-check"></i><b>14.1.2</b> Application to Tabler</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#toggle-switch"><i class="fa fa-check"></i><b>14.2</b> Toggle Switch</a></li>
<li class="chapter" data-level="14.3" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#navbar-menu-input"><i class="fa fa-check"></i><b>14.3</b> Navbar menu input</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html"><i class="fa fa-check"></i><b>15</b> Adding more interactivity</a><ul>
<li class="chapter" data-level="15.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#custom-progress-bars"><i class="fa fa-check"></i><b>15.1</b> Custom progress bars</a></li>
<li class="chapter" data-level="15.2" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#user-feedback-toasts"><i class="fa fa-check"></i><b>15.2</b> User feedback: toasts</a><ul>
<li class="chapter" data-level="15.2.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#toast-skeleton"><i class="fa fa-check"></i><b>15.2.1</b> Toast skeleton</a></li>
<li class="chapter" data-level="15.2.2" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#the-toast-api"><i class="fa fa-check"></i><b>15.2.2</b> The toast API</a></li>
<li class="chapter" data-level="15.2.3" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#r-implementation"><i class="fa fa-check"></i><b>15.2.3</b> R implementation</a></li>
<li class="chapter" data-level="15.2.4" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#wrap-up"><i class="fa fa-check"></i><b>15.2.4</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#transform-an-element-in-a-custom-action-button"><i class="fa fa-check"></i><b>15.3</b> Transform an element in a custom action button</a></li>
<li class="chapter" data-level="15.4" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#tab-events"><i class="fa fa-check"></i><b>15.4</b> Tab events</a><ul>
<li class="chapter" data-level="15.4.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#insert-tabs"><i class="fa fa-check"></i><b>15.4.1</b> Insert/Remove tabs in tabsetpanel</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#exercises-1"><i class="fa fa-check"></i><b>15.5</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>Beautify with CSS and SASS</b></span></li>
<li class="chapter" data-level="16" data-path="beautify-with-fresh.html"><a href="beautify-with-fresh.html"><i class="fa fa-check"></i><b>16</b> Beautify with fresh</a><ul>
<li class="chapter" data-level="16.1" data-path="beautify-with-fresh.html"><a href="beautify-with-fresh.html#fresh-the-big-picture"><i class="fa fa-check"></i><b>16.1</b> {fresh}, the big picture</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Outstanding User Interfaces with Shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="custom-templates-testing" class="section level1">
<h1><span class="header-section-number">Chapter 13</span> Testing and validating templates elements</h1>
<p>Until now, we have been building the template boilerplates, that is the main skeleton functions (page, navbar, navbar menu, …) as well as some components such as cards, ribbons, progress bars. We also exposed some techniques to substantially give more interactivity to the template, leveraging our freshly adquired JavaScript skills. Does this mean we are ready to make the template public? Not yet since some essentials steps are missing:</p>
<ul>
<li>Input validation is a crucial step toward success. Briefly, it consists in checking user inputs so that your functions fail safely and elegantly by providing meaningful error messages or warnings. This concept has already been covered in R for Data Science, Advanced R and a lot of other resources. Hence, I am not trying to reinvent the wheel and we will rely on already existing patterns, whose effectiveness is no longer to be demonstrated. Welcome to the defensive programming world!</li>
<li>On the other hand, testing components allows to check if a functions does what it is supposed to do. Consequently, it is a proof of robustness, and increases reproducibility. It significantly reduces the mental load when it comes to start code refactoring, thereby making you feel slightly less guilty about creating breaking changes since, most of the time, your tests will be able to capture those error.</li>
</ul>
<div id="validate-template-functions" class="section level2">
<h2><span class="header-section-number">13.1</span> Validate template functions</h2>
<div id="create-your-own-validations" class="section level3">
<h3><span class="header-section-number">13.1.1</span> Create your own validations</h3>
<p>Below, we will show some examples to validate user inputs. We first consider the <code>tabler_card</code> element from Chapter <a href="custom-templates-skeleton.html#custom-templates-skeleton">12</a>.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" data-line-number="1">tabler_card &lt;-<span class="st"> </span><span class="cf">function</span>(..., <span class="dt">title =</span> <span class="ot">NULL</span>, <span class="dt">status =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="dv">6</span>, <span class="dt">stacked =</span> <span class="ot">FALSE</span>, <span class="dt">padding =</span> <span class="ot">NULL</span>) {</a>
<a class="sourceLine" id="cb179-2" data-line-number="2">  </a>
<a class="sourceLine" id="cb179-3" data-line-number="3">  card_cl &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb179-4" data-line-number="4">    <span class="st">&quot;card&quot;</span>, </a>
<a class="sourceLine" id="cb179-5" data-line-number="5">    <span class="cf">if</span> (stacked) <span class="st">&quot; card-stacked&quot;</span>,</a>
<a class="sourceLine" id="cb179-6" data-line-number="6">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(padding)) <span class="kw">paste0</span>(<span class="st">&quot; card-&quot;</span>, padding)</a>
<a class="sourceLine" id="cb179-7" data-line-number="7">  )</a>
<a class="sourceLine" id="cb179-8" data-line-number="8">  </a>
<a class="sourceLine" id="cb179-9" data-line-number="9">  <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb179-10" data-line-number="10">    <span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;col-md-&quot;</span>, width),</a>
<a class="sourceLine" id="cb179-11" data-line-number="11">    <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb179-12" data-line-number="12">      <span class="dt">class =</span> card_cl,</a>
<a class="sourceLine" id="cb179-13" data-line-number="13">      <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(status)) {</a>
<a class="sourceLine" id="cb179-14" data-line-number="14">        <span class="kw">div</span>(<span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;card-status-top bg-&quot;</span>, status))</a>
<a class="sourceLine" id="cb179-15" data-line-number="15">      },</a>
<a class="sourceLine" id="cb179-16" data-line-number="16">      <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb179-17" data-line-number="17">        <span class="dt">class =</span> <span class="st">&quot;card-body&quot;</span>,</a>
<a class="sourceLine" id="cb179-18" data-line-number="18">        <span class="co"># we could have a smaller title like h4 or h5...</span></a>
<a class="sourceLine" id="cb179-19" data-line-number="19">        <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(title)) {</a>
<a class="sourceLine" id="cb179-20" data-line-number="20">          <span class="kw">h3</span>(<span class="dt">class =</span> <span class="st">&quot;card-title&quot;</span>, title)</a>
<a class="sourceLine" id="cb179-21" data-line-number="21">        },</a>
<a class="sourceLine" id="cb179-22" data-line-number="22">        ...</a>
<a class="sourceLine" id="cb179-23" data-line-number="23">      )</a>
<a class="sourceLine" id="cb179-24" data-line-number="24">    )</a>
<a class="sourceLine" id="cb179-25" data-line-number="25">  )</a>
<a class="sourceLine" id="cb179-26" data-line-number="26">  </a>
<a class="sourceLine" id="cb179-27" data-line-number="27">}</a></code></pre></div>
<p>The first thing is to think about what to validate. Here, I see at least 3 test:</p>
<ul>
<li>checking the status value</li>
<li>checking the width value</li>
<li>checking the padding value</li>
</ul>
<p>Writing validation tests requires knowledge about the underlying mechanisms. In our case, we must know the Bootstrap 4 grid rules and valid color statuses. The Bootstrap 4 <a href="https://getbootstrap.com/docs/4.0/layout/grid/">grid</a> ranges from 1 to 12. In other words, a card having a width of 12 will take the full page wherease, we may align 3 cards or width 4. Valid <a href="https://getbootstrap.com/docs/4.0/utilities/colors/">statuses</a> are primary, secondary, success, info, danger, warning, light and dark.</p>
<p>It is therefore pretty straightforward to validate the card width: it must be numeric and between 1 and 12. Moreover, since the template has other containers including the width parameter, we will create a function</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" data-line-number="1">validate_width &lt;-<span class="st"> </span><span class="cf">function</span>(width) {</a>
<a class="sourceLine" id="cb180-2" data-line-number="2">  <span class="cf">if</span> (<span class="kw">is.numeric</span>(width)) {</a>
<a class="sourceLine" id="cb180-3" data-line-number="3">    <span class="cf">if</span> (width <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">||</span><span class="st"> </span>width <span class="op">&gt;</span><span class="st"> </span><span class="dv">12</span>) {</a>
<a class="sourceLine" id="cb180-4" data-line-number="4">      <span class="kw">stop</span>(<span class="st">&quot;width must belong to [1, 12], as per Bootstrap 4 grid documentation. See more at https://getbootstrap.com/docs/4.0/layout/grid/&quot;</span>)</a>
<a class="sourceLine" id="cb180-5" data-line-number="5">    }</a>
<a class="sourceLine" id="cb180-6" data-line-number="6">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb180-7" data-line-number="7">    <span class="kw">stop</span>(<span class="st">&quot;width must be numeric&quot;</span>)</a>
<a class="sourceLine" id="cb180-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb180-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb180-10" data-line-number="10"></a>
<a class="sourceLine" id="cb180-11" data-line-number="11"><span class="co"># validate_width(-1)</span></a>
<a class="sourceLine" id="cb180-12" data-line-number="12"><span class="co"># validate_width(13)</span></a>
<a class="sourceLine" id="cb180-13" data-line-number="13"><span class="co"># validate_width(&quot;string&quot;)</span></a></code></pre></div>
<p>To check the status parameter, we save the valid statuses in a vector and take the <code>validStatuses</code> function from shinydashboard <a href="https://github.com/rstudio/shinydashboard/blob/master/R/utils.R">utils</a>. It also make sense to create a function since this parameter is widely used among template components. Contrary to the shinydashboard function, our custom <code>valid_status</code> does not fail if the status is NULL since it is not a mandatory parameter.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" data-line-number="1">valid_statuses &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb181-2" data-line-number="2">  <span class="st">&quot;primary&quot;</span>, </a>
<a class="sourceLine" id="cb181-3" data-line-number="3">  <span class="st">&quot;secondary&quot;</span>,</a>
<a class="sourceLine" id="cb181-4" data-line-number="4">  <span class="st">&quot;success&quot;</span>, </a>
<a class="sourceLine" id="cb181-5" data-line-number="5">  <span class="st">&quot;info&quot;</span>, </a>
<a class="sourceLine" id="cb181-6" data-line-number="6">  <span class="st">&quot;warning&quot;</span>, </a>
<a class="sourceLine" id="cb181-7" data-line-number="7">  <span class="st">&quot;danger&quot;</span>,</a>
<a class="sourceLine" id="cb181-8" data-line-number="8">  <span class="st">&quot;light&quot;</span>,</a>
<a class="sourceLine" id="cb181-9" data-line-number="9">  <span class="st">&quot;dark&quot;</span></a>
<a class="sourceLine" id="cb181-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb181-11" data-line-number="11"></a>
<a class="sourceLine" id="cb181-12" data-line-number="12">validate_status &lt;-<span class="st"> </span><span class="cf">function</span>(status) {</a>
<a class="sourceLine" id="cb181-13" data-line-number="13"></a>
<a class="sourceLine" id="cb181-14" data-line-number="14">  <span class="cf">if</span> (<span class="kw">is.null</span>(status)) {</a>
<a class="sourceLine" id="cb181-15" data-line-number="15">    <span class="kw">return</span>(<span class="ot">TRUE</span>) </a>
<a class="sourceLine" id="cb181-16" data-line-number="16">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb181-17" data-line-number="17">    <span class="cf">if</span> (status <span class="op">%in%</span><span class="st"> </span>valid_statuses) {</a>
<a class="sourceLine" id="cb181-18" data-line-number="18">      <span class="kw">return</span>(<span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb181-19" data-line-number="19">    }</a>
<a class="sourceLine" id="cb181-20" data-line-number="20">  }</a>
<a class="sourceLine" id="cb181-21" data-line-number="21"></a>
<a class="sourceLine" id="cb181-22" data-line-number="22">  <span class="kw">stop</span>(<span class="st">&quot;Invalid status: &quot;</span>, status, <span class="st">&quot;. Valid statuses are: &quot;</span>,</a>
<a class="sourceLine" id="cb181-23" data-line-number="23">       <span class="kw">paste</span>(valid_statuses, <span class="dt">collapse =</span> <span class="st">&quot;, &quot;</span>), <span class="st">&quot;.&quot;</span>)</a>
<a class="sourceLine" id="cb181-24" data-line-number="24">}</a></code></pre></div>
<p>We finish by the padding validation. According to the tabler documentation, there are three possible choices, namely <code>sm</code>, <code>md</code> or <code>lg</code>.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" data-line-number="1">valid_paddings &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;sm&quot;</span>, <span class="st">&quot;md&quot;</span>, <span class="st">&quot;lg&quot;</span>)</a>
<a class="sourceLine" id="cb182-2" data-line-number="2"></a>
<a class="sourceLine" id="cb182-3" data-line-number="3">validate_padding &lt;-<span class="st"> </span><span class="cf">function</span>(padding) {</a>
<a class="sourceLine" id="cb182-4" data-line-number="4">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(padding)) {</a>
<a class="sourceLine" id="cb182-5" data-line-number="5">    <span class="cf">if</span> (<span class="op">!</span>(padding <span class="op">%in%</span><span class="st"> </span>valid_paddings)) {</a>
<a class="sourceLine" id="cb182-6" data-line-number="6">      <span class="kw">stop</span>(<span class="st">&quot;Invalid status: &quot;</span>, padding, <span class="st">&quot;. Valid choices are: &quot;</span>,</a>
<a class="sourceLine" id="cb182-7" data-line-number="7">       <span class="kw">paste</span>(valid_paddings, <span class="dt">collapse =</span> <span class="st">&quot;, &quot;</span>), <span class="st">&quot;.&quot;</span>)</a>
<a class="sourceLine" id="cb182-8" data-line-number="8">    }</a>
<a class="sourceLine" id="cb182-9" data-line-number="9">  }</a>
<a class="sourceLine" id="cb182-10" data-line-number="10">}</a></code></pre></div>
<p>We apply all these validation to our card element.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb183-1" data-line-number="1">tabler_card &lt;-<span class="st"> </span><span class="cf">function</span>(..., <span class="dt">title =</span> <span class="ot">NULL</span>, <span class="dt">status =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="dv">6</span>, <span class="dt">stacked =</span> <span class="ot">FALSE</span>, <span class="dt">padding =</span> <span class="ot">NULL</span>) {</a>
<a class="sourceLine" id="cb183-2" data-line-number="2">  </a>
<a class="sourceLine" id="cb183-3" data-line-number="3">  <span class="kw">validate_status</span>(status)</a>
<a class="sourceLine" id="cb183-4" data-line-number="4">  <span class="kw">validate_width</span>(width)</a>
<a class="sourceLine" id="cb183-5" data-line-number="5">  <span class="kw">validate_padding</span>(padding)</a>
<a class="sourceLine" id="cb183-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb183-7" data-line-number="7">  card_cl &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb183-8" data-line-number="8">    <span class="st">&quot;card&quot;</span>, </a>
<a class="sourceLine" id="cb183-9" data-line-number="9">    <span class="cf">if</span> (stacked) <span class="st">&quot; card-stacked&quot;</span>,</a>
<a class="sourceLine" id="cb183-10" data-line-number="10">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(padding)) <span class="kw">paste0</span>(<span class="st">&quot; card-&quot;</span>, padding)</a>
<a class="sourceLine" id="cb183-11" data-line-number="11">  )</a>
<a class="sourceLine" id="cb183-12" data-line-number="12">  </a>
<a class="sourceLine" id="cb183-13" data-line-number="13">  <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb183-14" data-line-number="14">    <span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;col-md-&quot;</span>, width),</a>
<a class="sourceLine" id="cb183-15" data-line-number="15">    <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb183-16" data-line-number="16">      <span class="dt">class =</span> card_cl,</a>
<a class="sourceLine" id="cb183-17" data-line-number="17">      <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(status)) {</a>
<a class="sourceLine" id="cb183-18" data-line-number="18">        <span class="kw">div</span>(<span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;card-status-top bg-&quot;</span>, status))</a>
<a class="sourceLine" id="cb183-19" data-line-number="19">      },</a>
<a class="sourceLine" id="cb183-20" data-line-number="20">      <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb183-21" data-line-number="21">        <span class="dt">class =</span> <span class="st">&quot;card-body&quot;</span>,</a>
<a class="sourceLine" id="cb183-22" data-line-number="22">        <span class="co"># we could have a smaller title like h4 or h5...</span></a>
<a class="sourceLine" id="cb183-23" data-line-number="23">        <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(title)) {</a>
<a class="sourceLine" id="cb183-24" data-line-number="24">          <span class="kw">h3</span>(<span class="dt">class =</span> <span class="st">&quot;card-title&quot;</span>, title)</a>
<a class="sourceLine" id="cb183-25" data-line-number="25">        },</a>
<a class="sourceLine" id="cb183-26" data-line-number="26">        ...</a>
<a class="sourceLine" id="cb183-27" data-line-number="27">      )</a>
<a class="sourceLine" id="cb183-28" data-line-number="28">    )</a>
<a class="sourceLine" id="cb183-29" data-line-number="29">  )</a>
<a class="sourceLine" id="cb183-30" data-line-number="30">  </a>
<a class="sourceLine" id="cb183-31" data-line-number="31">}</a></code></pre></div>
<p>As of R 4.0.0, the <code>stopifnot</code> function may be a good alternative to <code>stop</code>.</p>
<p>We recommand to be reasonable and not to validate every single parameter.</p>
</div>
<div id="existing-utils-functions" class="section level3">
<h3><span class="header-section-number">13.1.2</span> Existing utils functions</h3>
<div id="validating-tags" class="section level4">
<h4><span class="header-section-number">13.1.2.1</span> Validating tags</h4>
<p>The problem with the above approach is that it may take time to create all validation functions. Fortunately, packages like {shinydashboard} include really powerful validation functions, especially <code>tagAssert</code>. It is not exported which means you will have to import it in your own project. Below is the code, where I left the documentation describing all parameters.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" data-line-number="1"><span class="co"># Return TRUE if a shiny.tag object has a CSS class, FALSE otherwise.</span></a>
<a class="sourceLine" id="cb184-2" data-line-number="2">hasCssClass &lt;-<span class="st"> </span><span class="cf">function</span>(tag, class) {</a>
<a class="sourceLine" id="cb184-3" data-line-number="3">  <span class="cf">if</span> (<span class="kw">is.null</span>(tag<span class="op">$</span>attribs) <span class="op">||</span><span class="st"> </span><span class="kw">is.null</span>(tag<span class="op">$</span>attribs<span class="op">$</span>class))</a>
<a class="sourceLine" id="cb184-4" data-line-number="4">    <span class="kw">return</span>(<span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb184-5" data-line-number="5"></a>
<a class="sourceLine" id="cb184-6" data-line-number="6">  classes &lt;-<span class="st"> </span><span class="kw">strsplit</span>(tag<span class="op">$</span>attribs<span class="op">$</span>class, <span class="st">&quot; +&quot;</span>)[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb184-7" data-line-number="7">  <span class="kw">return</span>(class <span class="op">%in%</span><span class="st"> </span>classes)</a>
<a class="sourceLine" id="cb184-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb184-9" data-line-number="9"></a>
<a class="sourceLine" id="cb184-10" data-line-number="10">tagAssert &lt;-<span class="st"> </span><span class="cf">function</span>(tag, <span class="dt">type =</span> <span class="ot">NULL</span>, <span class="dt">class =</span> <span class="ot">NULL</span>, <span class="dt">allowUI =</span> <span class="ot">TRUE</span>) {</a>
<a class="sourceLine" id="cb184-11" data-line-number="11">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">inherits</span>(tag, <span class="st">&quot;shiny.tag&quot;</span>)) {</a>
<a class="sourceLine" id="cb184-12" data-line-number="12">    <span class="kw">print</span>(tag)</a>
<a class="sourceLine" id="cb184-13" data-line-number="13">    <span class="kw">stop</span>(<span class="st">&quot;Expected an object with class &#39;shiny.tag&#39;.&quot;</span>)</a>
<a class="sourceLine" id="cb184-14" data-line-number="14">  }</a>
<a class="sourceLine" id="cb184-15" data-line-number="15"></a>
<a class="sourceLine" id="cb184-16" data-line-number="16">  <span class="co"># Skip dynamic output elements</span></a>
<a class="sourceLine" id="cb184-17" data-line-number="17">  <span class="cf">if</span> (allowUI <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb184-18" data-line-number="18"><span class="st">      </span>(<span class="kw">hasCssClass</span>(tag, <span class="st">&quot;shiny-html-output&quot;</span>) <span class="op">||</span></a>
<a class="sourceLine" id="cb184-19" data-line-number="19"><span class="st">       </span><span class="kw">hasCssClass</span>(tag, <span class="st">&quot;shinydashboard-menu-output&quot;</span>))) {</a>
<a class="sourceLine" id="cb184-20" data-line-number="20">    <span class="kw">return</span>()</a>
<a class="sourceLine" id="cb184-21" data-line-number="21">  }</a>
<a class="sourceLine" id="cb184-22" data-line-number="22"></a>
<a class="sourceLine" id="cb184-23" data-line-number="23">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(type) <span class="op">&amp;&amp;</span><span class="st"> </span>tag<span class="op">$</span>name <span class="op">!=</span><span class="st"> </span>type) {</a>
<a class="sourceLine" id="cb184-24" data-line-number="24">    <span class="kw">stop</span>(<span class="st">&quot;Expected tag to be of type &quot;</span>, type)</a>
<a class="sourceLine" id="cb184-25" data-line-number="25">  }</a>
<a class="sourceLine" id="cb184-26" data-line-number="26"></a>
<a class="sourceLine" id="cb184-27" data-line-number="27">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(class)) {</a>
<a class="sourceLine" id="cb184-28" data-line-number="28">    <span class="cf">if</span> (<span class="kw">is.null</span>(tag<span class="op">$</span>attribs<span class="op">$</span>class)) {</a>
<a class="sourceLine" id="cb184-29" data-line-number="29">      <span class="kw">stop</span>(<span class="st">&quot;Expected tag to have class &#39;&quot;</span>, class, <span class="st">&quot;&#39;&quot;</span>)</a>
<a class="sourceLine" id="cb184-30" data-line-number="30"></a>
<a class="sourceLine" id="cb184-31" data-line-number="31">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb184-32" data-line-number="32">      tagClasses &lt;-<span class="st"> </span><span class="kw">strsplit</span>(tag<span class="op">$</span>attribs<span class="op">$</span>class, <span class="st">&quot; &quot;</span>)[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb184-33" data-line-number="33">      <span class="cf">if</span> (<span class="op">!</span>(class <span class="op">%in%</span><span class="st"> </span>tagClasses)) {</a>
<a class="sourceLine" id="cb184-34" data-line-number="34">        <span class="kw">stop</span>(<span class="st">&quot;Expected tag to have class &#39;&quot;</span>, class, <span class="st">&quot;&#39;&quot;</span>)</a>
<a class="sourceLine" id="cb184-35" data-line-number="35">      }</a>
<a class="sourceLine" id="cb184-36" data-line-number="36">    }</a>
<a class="sourceLine" id="cb184-37" data-line-number="37">  }</a>
<a class="sourceLine" id="cb184-38" data-line-number="38">}</a>
<a class="sourceLine" id="cb184-39" data-line-number="39"></a>
<a class="sourceLine" id="cb184-40" data-line-number="40">myTag &lt;-<span class="st"> </span><span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;bg-blue&quot;</span>)</a>
<a class="sourceLine" id="cb184-41" data-line-number="41"></a>
<a class="sourceLine" id="cb184-42" data-line-number="42"><span class="kw">tagAssert</span>(myTag, <span class="dt">type =</span> <span class="st">&quot;div&quot;</span>)</a>
<a class="sourceLine" id="cb184-43" data-line-number="43"><span class="co"># tagAssert(myTag, type = &quot;li&quot;) # will fail</span></a>
<a class="sourceLine" id="cb184-44" data-line-number="44"><span class="kw">tagAssert</span>(myTag, <span class="dt">class =</span> <span class="st">&quot;bg-blue&quot;</span>)</a></code></pre></div>
<p>Importantly, <code>tagAssert</code> will raise an error if the condition is not fulfilled. Another function, <code>tagMatch</code> simply returns TRUE/FALSE. It looks for <code>ìd</code>, <code>class</code>, <code>name</code> and any other tag attribute like <code>data-value</code>.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" data-line-number="1"><span class="co"># This is like a==b, except that if a or b is NULL or an empty vector, it won&#39;t</span></a>
<a class="sourceLine" id="cb185-2" data-line-number="2"><span class="co"># return logical(0). If a AND b are NULL/length-0, this will return TRUE; if</span></a>
<a class="sourceLine" id="cb185-3" data-line-number="3"><span class="co"># just one of them is NULL/length-0, this will FALSE. This is for use in</span></a>
<a class="sourceLine" id="cb185-4" data-line-number="4"><span class="co"># conditionals where `if(logical(0))` would cause an error. Similar to using</span></a>
<a class="sourceLine" id="cb185-5" data-line-number="5"><span class="co"># identical(a,b), but less stringent about types: `equals(1, 1L)` is TRUE, but</span></a>
<a class="sourceLine" id="cb185-6" data-line-number="6"><span class="co"># `identical(1, 1L)` is FALSE.</span></a>
<a class="sourceLine" id="cb185-7" data-line-number="7">equals &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) {</a>
<a class="sourceLine" id="cb185-8" data-line-number="8">  alen &lt;-<span class="st"> </span><span class="kw">length</span>(a)</a>
<a class="sourceLine" id="cb185-9" data-line-number="9">  blen &lt;-<span class="st"> </span><span class="kw">length</span>(b)</a>
<a class="sourceLine" id="cb185-10" data-line-number="10">  <span class="cf">if</span> (alen<span class="op">==</span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>blen<span class="op">==</span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb185-11" data-line-number="11">    <span class="kw">return</span>(<span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb185-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb185-13" data-line-number="13">  <span class="cf">if</span> (alen <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">||</span><span class="st"> </span>blen <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb185-14" data-line-number="14">    <span class="kw">stop</span>(<span class="st">&quot;Can only compare objects of length 0 or 1&quot;</span>)</a>
<a class="sourceLine" id="cb185-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb185-16" data-line-number="16">  <span class="cf">if</span> (alen<span class="op">==</span><span class="dv">0</span> <span class="op">||</span><span class="st"> </span>blen<span class="op">==</span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb185-17" data-line-number="17">    <span class="kw">return</span>(<span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb185-18" data-line-number="18">  }</a>
<a class="sourceLine" id="cb185-19" data-line-number="19"></a>
<a class="sourceLine" id="cb185-20" data-line-number="20">  a <span class="op">==</span><span class="st"> </span>b</a>
<a class="sourceLine" id="cb185-21" data-line-number="21">}</a>
<a class="sourceLine" id="cb185-22" data-line-number="22"></a>
<a class="sourceLine" id="cb185-23" data-line-number="23"></a>
<a class="sourceLine" id="cb185-24" data-line-number="24"><span class="co"># Return TRUE if a tag object matches a specific id, and/or tag name, and/or</span></a>
<a class="sourceLine" id="cb185-25" data-line-number="25"><span class="co"># class, and or other arbitrary tag attributes. Put the args after ... so that</span></a>
<a class="sourceLine" id="cb185-26" data-line-number="26"><span class="co"># caller must use named arguments.</span></a>
<a class="sourceLine" id="cb185-27" data-line-number="27">tagMatches &lt;-<span class="st"> </span><span class="cf">function</span>(item, ..., <span class="dt">id =</span> <span class="ot">NULL</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">class =</span> <span class="ot">NULL</span>) {</a>
<a class="sourceLine" id="cb185-28" data-line-number="28">  dots &lt;-<span class="st"> </span><span class="kw">list</span>(...)</a>
<a class="sourceLine" id="cb185-29" data-line-number="29">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">inherits</span>(item, <span class="st">&quot;shiny.tag&quot;</span>)) {</a>
<a class="sourceLine" id="cb185-30" data-line-number="30">    <span class="kw">return</span>(<span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb185-31" data-line-number="31">  }</a>
<a class="sourceLine" id="cb185-32" data-line-number="32">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(id) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">equals</span>(item<span class="op">$</span>attribs<span class="op">$</span>id, id)) {</a>
<a class="sourceLine" id="cb185-33" data-line-number="33">    <span class="kw">return</span>(<span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb185-34" data-line-number="34">  }</a>
<a class="sourceLine" id="cb185-35" data-line-number="35">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(name) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">equals</span>(item<span class="op">$</span>name, name)) {</a>
<a class="sourceLine" id="cb185-36" data-line-number="36">    <span class="kw">return</span>(<span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb185-37" data-line-number="37">  }</a>
<a class="sourceLine" id="cb185-38" data-line-number="38">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(class)) {</a>
<a class="sourceLine" id="cb185-39" data-line-number="39">    <span class="cf">if</span> (<span class="kw">is.null</span>(item<span class="op">$</span>attribs<span class="op">$</span>class)) {</a>
<a class="sourceLine" id="cb185-40" data-line-number="40">      <span class="kw">return</span>(<span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb185-41" data-line-number="41">    }</a>
<a class="sourceLine" id="cb185-42" data-line-number="42">    classes &lt;-<span class="st"> </span><span class="kw">strsplit</span>(item<span class="op">$</span>attribs<span class="op">$</span>class, <span class="st">&quot; &quot;</span>)[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb185-43" data-line-number="43">    <span class="cf">if</span> (<span class="op">!</span><span class="st"> </span>class <span class="op">%in%</span><span class="st"> </span>classes) {</a>
<a class="sourceLine" id="cb185-44" data-line-number="44">      <span class="kw">return</span>(<span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb185-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb185-46" data-line-number="46">  }</a>
<a class="sourceLine" id="cb185-47" data-line-number="47"></a>
<a class="sourceLine" id="cb185-48" data-line-number="48">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(dots)) {</a>
<a class="sourceLine" id="cb185-49" data-line-number="49">    arg     &lt;-<span class="st"> </span>dots[[i]]</a>
<a class="sourceLine" id="cb185-50" data-line-number="50">    argName &lt;-<span class="st"> </span><span class="kw">names</span>(dots)[[i]]</a>
<a class="sourceLine" id="cb185-51" data-line-number="51">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">equals</span>(item<span class="op">$</span>attribs[[argName]], arg)) {</a>
<a class="sourceLine" id="cb185-52" data-line-number="52">      <span class="kw">return</span>(<span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb185-53" data-line-number="53">    }</a>
<a class="sourceLine" id="cb185-54" data-line-number="54">  }</a>
<a class="sourceLine" id="cb185-55" data-line-number="55"></a>
<a class="sourceLine" id="cb185-56" data-line-number="56">  <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb185-57" data-line-number="57">}</a>
<a class="sourceLine" id="cb185-58" data-line-number="58"></a>
<a class="sourceLine" id="cb185-59" data-line-number="59"><span class="kw">tagMatches</span>(myTag, <span class="dt">id =</span> <span class="st">&quot;d&quot;</span>)</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb187-1" data-line-number="1"><span class="kw">tagMatches</span>(myTag, <span class="dt">class =</span> <span class="st">&quot;bg-blue&quot;</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="validating-css-units" class="section level4">
<h4><span class="header-section-number">13.1.2.2</span> Validating CSS units</h4>
<p>The <code>validateCssUnit</code> belongs to the Shiny exported function. It is useful to validate any parameter involving a CSS unit like <code>width</code> and <code>height</code>.</p>
<p>There is no point to reuse what already exists and these tools will help you to be efficient for validating your template elements.</p>
</div>
</div>
</div>
<div id="testing-templates-elements" class="section level2">
<h2><span class="header-section-number">13.2</span> Testing templates elements</h2>
<p>Imagine if one day, someone or yourself accidentaly remove the width validation function, after a significant refactoring. Later, you receive a new message from github, stating that someome opened a new issue. According to the report, the card is not properly displayed altough no error is thrown. Among the 400 lines of code provided, you hardly notice that the width parameter is set to 13, which is not in line with the Bootstrap 4 documentation, as it should remain between 1 and 12. You lost 10 minutes, so is your end user, which is even worse.</p>
<p>With a proper testing pipeline, this problem could have been avoided. Ironically, writing the corresponding test takes only 2 minutes.</p>
<p>A reference for testing functions is the <a href="https://testthat.r-lib.org/index.html">{testthat}</a> package. In short, a unit test consists in setting expectations about our function and check weither they fail or pass. For instance, with our <code>tabler_card</code> example, the <code>validate_width</code> must fail if the given width is not in the expected bounds or not numeric. We apply the <code>test_that</code> function with a description of the test context, followed by the expectations inside the curly brackets.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" data-line-number="1"><span class="kw">test_that</span>(<span class="st">&quot;validate width works&quot;</span>, {</a>
<a class="sourceLine" id="cb189-2" data-line-number="2">  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="dv">-1</span>))</a>
<a class="sourceLine" id="cb189-3" data-line-number="3">  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="dv">13</span>))</a>
<a class="sourceLine" id="cb189-4" data-line-number="4">  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="st">&quot;hello world&quot;</span>))</a>
<a class="sourceLine" id="cb189-5" data-line-number="5">})</a></code></pre></div>
<p>We then test <code>validate_status</code> and <code>validate_padding</code>.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" data-line-number="1"><span class="kw">test_that</span>(<span class="st">&quot;validate status works&quot;</span>, {</a>
<a class="sourceLine" id="cb190-2" data-line-number="2">  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">status =</span> <span class="st">&quot;toto&quot;</span>))</a>
<a class="sourceLine" id="cb190-3" data-line-number="3">})</a>
<a class="sourceLine" id="cb190-4" data-line-number="4"></a>
<a class="sourceLine" id="cb190-5" data-line-number="5"><span class="kw">test_that</span>(<span class="st">&quot;validate padding works&quot;</span>, {</a>
<a class="sourceLine" id="cb190-6" data-line-number="6">  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="st">&quot;xs&quot;</span>))</a>
<a class="sourceLine" id="cb190-7" data-line-number="7">})</a></code></pre></div>
<p>So far so good. In few lines of code, we substantially increased the robustness of our function without increasing its complexity. Now, let’s try to remove the <code>validate_width</code> step from the <code>tabler_card</code>.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb191-1" data-line-number="1">tabler_card &lt;-<span class="st"> </span><span class="cf">function</span>(..., <span class="dt">title =</span> <span class="ot">NULL</span>, <span class="dt">status =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="dv">6</span>, <span class="dt">stacked =</span> <span class="ot">FALSE</span>, <span class="dt">padding =</span> <span class="ot">NULL</span>) {</a>
<a class="sourceLine" id="cb191-2" data-line-number="2">  </a>
<a class="sourceLine" id="cb191-3" data-line-number="3">  <span class="kw">validate_status</span>(status)</a>
<a class="sourceLine" id="cb191-4" data-line-number="4">  <span class="kw">validate_padding</span>(padding)</a>
<a class="sourceLine" id="cb191-5" data-line-number="5">  </a>
<a class="sourceLine" id="cb191-6" data-line-number="6">  card_cl &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb191-7" data-line-number="7">    <span class="st">&quot;card&quot;</span>, </a>
<a class="sourceLine" id="cb191-8" data-line-number="8">    <span class="cf">if</span> (stacked) <span class="st">&quot; card-stacked&quot;</span>,</a>
<a class="sourceLine" id="cb191-9" data-line-number="9">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(padding)) <span class="kw">paste0</span>(<span class="st">&quot; card-&quot;</span>, padding)</a>
<a class="sourceLine" id="cb191-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb191-11" data-line-number="11">  </a>
<a class="sourceLine" id="cb191-12" data-line-number="12">  <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb191-13" data-line-number="13">    <span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;col-md-&quot;</span>, width),</a>
<a class="sourceLine" id="cb191-14" data-line-number="14">    <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb191-15" data-line-number="15">      <span class="dt">class =</span> card_cl,</a>
<a class="sourceLine" id="cb191-16" data-line-number="16">      <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(status)) {</a>
<a class="sourceLine" id="cb191-17" data-line-number="17">        <span class="kw">div</span>(<span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;card-status-top bg-&quot;</span>, status))</a>
<a class="sourceLine" id="cb191-18" data-line-number="18">      },</a>
<a class="sourceLine" id="cb191-19" data-line-number="19">      <span class="kw">div</span>(</a>
<a class="sourceLine" id="cb191-20" data-line-number="20">        <span class="dt">class =</span> <span class="st">&quot;card-body&quot;</span>,</a>
<a class="sourceLine" id="cb191-21" data-line-number="21">        <span class="co"># we could have a smaller title like h4 or h5...</span></a>
<a class="sourceLine" id="cb191-22" data-line-number="22">        <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(title)) {</a>
<a class="sourceLine" id="cb191-23" data-line-number="23">          <span class="kw">h3</span>(<span class="dt">class =</span> <span class="st">&quot;card-title&quot;</span>, title)</a>
<a class="sourceLine" id="cb191-24" data-line-number="24">        },</a>
<a class="sourceLine" id="cb191-25" data-line-number="25">        ...</a>
<a class="sourceLine" id="cb191-26" data-line-number="26">      )</a>
<a class="sourceLine" id="cb191-27" data-line-number="27">    )</a>
<a class="sourceLine" id="cb191-28" data-line-number="28">  )</a>
<a class="sourceLine" id="cb191-29" data-line-number="29">  </a>
<a class="sourceLine" id="cb191-30" data-line-number="30">}</a>
<a class="sourceLine" id="cb191-31" data-line-number="31"></a>
<a class="sourceLine" id="cb191-32" data-line-number="32"></a>
<a class="sourceLine" id="cb191-33" data-line-number="33"><span class="kw">test_that</span>(<span class="st">&quot;validate width works&quot;</span>, {</a>
<a class="sourceLine" id="cb191-34" data-line-number="34">  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="dv">-1</span>))</a>
<a class="sourceLine" id="cb191-35" data-line-number="35">  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="dv">13</span>))</a>
<a class="sourceLine" id="cb191-36" data-line-number="36">  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="st">&quot;hello world&quot;</span>))</a>
<a class="sourceLine" id="cb191-37" data-line-number="37">})</a></code></pre></div>
<p>Notice how the 3 above tests elegantly fail. The provided context (“validate width works”) immediately indicates the culprit, which is a game changer for debugging.</p>
</div>
<div id="testing-javascript" class="section level2">
<h2><span class="header-section-number">13.3</span> Testing JavaScript</h2>
<p>We could not finish this chapter without mentionning tools to validate JavaScript code. We will particularly focus on <a href="https://jshint.com">JSHint</a>, which has a R <a href="https://github.com/dreamRs/jstools">wrapper</a>, nicely provided by the dreamRs team. Below is an example of how to check all the <a href="https://github.com/RinteRface/shinyMobile">shinyMobile</a> JavaScript input bindings at once:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" data-line-number="1">bindings &lt;-<span class="st"> </span><span class="kw">list.files</span>(</a>
<a class="sourceLine" id="cb192-2" data-line-number="2">  <span class="dt">path =</span> <span class="kw">system.file</span>(<span class="st">&quot;framework7-5.5.0/input-bindings&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;shinyMobile&quot;</span>),</a>
<a class="sourceLine" id="cb192-3" data-line-number="3">  <span class="dt">recursive =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb192-4" data-line-number="4">  <span class="dt">full.names =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb192-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb192-6" data-line-number="6"><span class="kw">jshint_file</span>(<span class="dt">input =</span> bindings, <span class="dt">options =</span> <span class="kw">jshint_options</span>(<span class="dt">jquery =</span> <span class="ot">TRUE</span>, <span class="dt">globals =</span> <span class="kw">list</span>(<span class="st">&quot;Shiny&quot;</span>, <span class="st">&quot;app&quot;</span>)))</a></code></pre></div>
<pre><code>## ── Checking actionSheetInputBinding.js ───────────────────────────────────────── 
## No errors found. 
## ── Checking autoCompleteInputBinding.js ──────────────────────────────────────── 
## No errors found. 
## ── Checking buttonInputBinding.js ────────────────────────────────────────────── 
## No errors found. 
## ── Checking cardInputBinding.js ──────────────────────────────────────────────── 
## No errors found. 
## ── Checking collapsibleInputBinding.js ───────────────────────────────────────── 
## No errors found. 
## ── Checking colorPickerInputBinding.js ───────────────────────────────────────── 
## 9 errors found. 
##  - Line 11: &#39;colorPickerModules&#39; is not defined. 
##  - Line 16: &#39;colorPickerSliderValue&#39; is not defined. 
##  - Line 17: &#39;colorPickerSliderValueEditable&#39; is not defined. 
##  - Line 18: &#39;colorPickerSliderLabel&#39; is not defined. 
##  - Line 19: &#39;colorPickerHexLabel&#39; is not defined. 
##  - Line 20: &#39;colorPickerHexValueEditable&#39; is not defined. 
##  - Line 21: &#39;colorPickerGroupedModules&#39; is not defined. 
##  - Line 24: &#39;colorPickerPalettes&#39; is not defined. 
##  - Line 29: &#39;colorPickerValue&#39; is not defined. 
## ── Checking dateInputBinding.js ──────────────────────────────────────────────── 
## 1 errors found. 
##  - Line 11: &#39;console&#39; is not defined. 
## ── Checking datePickerInputBinding.js ────────────────────────────────────────── 
## No errors found. 
## ── Checking fabsInputBinding.js ──────────────────────────────────────────────── 
## No errors found. 
## ── Checking gaugeInputBinding.js ─────────────────────────────────────────────── 
## 1 errors found. 
##  - Line 47: &#39;g&#39; is defined but never used. 
## ── Checking loginInputBinding.js ─────────────────────────────────────────────── 
## No errors found. 
## ── Checking messageBarInputBinding.js ────────────────────────────────────────── 
## No errors found. 
## ── Checking messagesInputBinding.js ──────────────────────────────────────────── 
## 2 errors found. 
##  - Line 70: &#39;responseInProgress&#39; is not defined. 
##  - Line 85: &#39;responseInProgress&#39; is not defined. 
## ── Checking panelInputBinding.js ─────────────────────────────────────────────── 
## No errors found. 
## ── Checking pickerInputBinding.js ────────────────────────────────────────────── 
## No errors found. 
## ── Checking popupInputBinding.js ─────────────────────────────────────────────── 
## 1 errors found. 
##  - Line 20: &#39;p&#39; is defined but never used. 
## ── Checking selectInputBinding.js ────────────────────────────────────────────── 
## No errors found. 
## ── Checking sheetInputBinding.js ─────────────────────────────────────────────── 
## 1 errors found. 
##  - Line 34: &#39;s&#39; is defined but never used. 
## ── Checking sliderInputBinding.js ────────────────────────────────────────────── 
## 1 errors found. 
##  - Line 35: &#39;r&#39; is defined but never used. 
## ── Checking smartSelectBinding.js ────────────────────────────────────────────── 
## No errors found. 
## ── Checking stepperInputBinding.js ───────────────────────────────────────────── 
## 1 errors found. 
##  - Line 33: &#39;s&#39; is defined but never used. 
## ── Checking tabsInputBinding.js ──────────────────────────────────────────────── 
## No errors found. 
## ── Checking toggleInputBinding.js ────────────────────────────────────────────── 
## No errors found. 
## ── Checking virtualListBinding.js ────────────────────────────────────────────── 
## 3 errors found. 
##  - Line 21: &#39;for of&#39; is available in ES6 (use &#39;esversion: 6&#39;) or Mozilla JS extensions (use moz). 
##  - Line 107: &#39;template literal syntax&#39; is only available in ES6 (use &#39;esversion: 6&#39;). 
##  - Line 111: &#39;template literal syntax&#39; is only available in ES6 (use &#39;esversion: 6&#39;).</code></pre>
<p>You may fine tune the <code>jshint_file</code> behavior with the <a href="https://jshint.com/docs/options/"><code>jshint_options</code></a>. One is often tempted to call <code>eval</code> in JS code, which will result in a JSHint error. An option called <code>evil</code> exists to disable the corresponding test. However, we recommand to play the game, accept those error and try to fix them instead of cheating with options!</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="custom-templates-skeleton.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="custom-templates-inputs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/custom-templates-testing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["outstanding-shiny-ui.pdf", "outstanding-shiny-ui.epub", "outstanding-shiny-ui.mobi"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
