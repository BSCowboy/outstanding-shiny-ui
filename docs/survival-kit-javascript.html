<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 JavaScript | Outstanding User Interfaces with Shiny</title>
  <meta name="description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 JavaScript | Outstanding User Interfaces with Shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 JavaScript | Outstanding User Interfaces with Shiny" />
  
  <meta name="twitter:description" content="This book will serve as content for the 2020 erum workshop." />
  

<meta name="author" content="David Granjon" />


<meta name="date" content="2020-05-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="survival-kit-html.html"/>
<link rel="next" href="survival-kit-shiny.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Outstanding User Interfaces with Shiny</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#is-this-book-for-me"><i class="fa fa-check"></i>Is this book for me?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#related-content"><i class="fa fa-check"></i>Related content</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="part"><span><b>Survival Kit</b></span></li>
<li class="chapter" data-level="2" data-path="survival-kit-html.html"><a href="survival-kit-html.html"><i class="fa fa-check"></i><b>2</b> HTML</a><ul>
<li class="chapter" data-level="2.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-basics"><i class="fa fa-check"></i><b>2.1</b> HTML Basics</a></li>
<li class="chapter" data-level="2.2" data-path="survival-kit-html.html"><a href="survival-kit-html.html#tag-attributes"><i class="fa fa-check"></i><b>2.2</b> Tag attributes</a></li>
<li class="chapter" data-level="2.3" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-page-skeleton"><i class="fa fa-check"></i><b>2.3</b> HTML page: skeleton</a></li>
<li class="chapter" data-level="2.4" data-path="survival-kit-html.html"><a href="survival-kit-html.html#about-the-dom"><i class="fa fa-check"></i><b>2.4</b> About the DOM</a><ul>
<li class="chapter" data-level="2.4.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#visualizing-the-dom-the-html-inspector"><i class="fa fa-check"></i><b>2.4.1</b> Visualizing the DOM: the HTML inspector</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="survival-kit-html.html"><a href="survival-kit-html.html#preliminary-introduction-to-css-and-javascript"><i class="fa fa-check"></i><b>2.5</b> Preliminary introduction to CSS and JavaScript</a><ul>
<li class="chapter" data-level="2.5.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-and-css"><i class="fa fa-check"></i><b>2.5.1</b> HTML and CSS</a></li>
<li class="chapter" data-level="2.5.2" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-and-javascript"><i class="fa fa-check"></i><b>2.5.2</b> HTML and JavaScript</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html"><i class="fa fa-check"></i><b>3</b> JavaScript</a><ul>
<li class="chapter" data-level="3.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#setup"><i class="fa fa-check"></i><b>3.2</b> Setup</a><ul>
<li class="chapter" data-level="3.2.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#node"><i class="fa fa-check"></i><b>3.2.1</b> Node</a></li>
<li class="chapter" data-level="3.2.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#choose-a-good-ide"><i class="fa fa-check"></i><b>3.2.2</b> Choose a good IDE</a></li>
<li class="chapter" data-level="3.2.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#first-script"><i class="fa fa-check"></i><b>3.2.3</b> First Script</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#programming-with-js-basis"><i class="fa fa-check"></i><b>3.3</b> Programming with JS: basis</a><ul>
<li class="chapter" data-level="3.3.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#js-types"><i class="fa fa-check"></i><b>3.3.1</b> JS types</a></li>
<li class="chapter" data-level="3.3.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#variables"><i class="fa fa-check"></i><b>3.3.2</b> Variables</a></li>
<li class="chapter" data-level="3.3.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#conditions"><i class="fa fa-check"></i><b>3.3.3</b> Conditions</a></li>
<li class="chapter" data-level="3.3.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#iterations"><i class="fa fa-check"></i><b>3.3.4</b> Iterations</a></li>
<li class="chapter" data-level="3.3.5" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#objects"><i class="fa fa-check"></i><b>3.3.5</b> Objects</a></li>
<li class="chapter" data-level="3.3.6" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#functions"><i class="fa fa-check"></i><b>3.3.6</b> Functions</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#jquery"><i class="fa fa-check"></i><b>3.4</b> jQuery</a><ul>
<li class="chapter" data-level="3.4.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#introduction-1"><i class="fa fa-check"></i><b>3.4.1</b> Introduction</a></li>
<li class="chapter" data-level="3.4.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#syntax"><i class="fa fa-check"></i><b>3.4.2</b> Syntax</a></li>
<li class="chapter" data-level="3.4.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#useful-functions"><i class="fa fa-check"></i><b>3.4.3</b> Useful functions</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#event-listeners"><i class="fa fa-check"></i><b>3.5</b> Event listeners</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html"><i class="fa fa-check"></i><b>4</b> Shiny, under the hood</a><ul>
<li class="chapter" data-level="4.1" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#shiny-dependencies"><i class="fa fa-check"></i><b>4.1</b> Shiny dependencies</a></li>
<li class="chapter" data-level="4.2" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#shiny-hiddens-gems"><i class="fa fa-check"></i><b>4.2</b> Shiny hiddens gems</a><ul>
<li class="chapter" data-level="4.2.1" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#initialization"><i class="fa fa-check"></i><b>4.2.1</b> Initialization</a></li>
<li class="chapter" data-level="4.2.2" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#input-bindings"><i class="fa fa-check"></i><b>4.2.2</b> Input bindings</a></li>
<li class="chapter" data-level="4.2.3" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#websocket"><i class="fa fa-check"></i><b>4.2.3</b> websocket</a></li>
<li class="chapter" data-level="4.2.4" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#custom-handlers"><i class="fa fa-check"></i><b>4.2.4</b> Custom handlers</a></li>
<li class="chapter" data-level="4.2.5" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#utilities-to-quickly-define-new-inputs"><i class="fa fa-check"></i><b>4.2.5</b> Utilities to quickly define new inputs</a></li>
<li class="chapter" data-level="4.2.6" data-path="survival-kit-shiny.html"><a href="survival-kit-shiny.html#get-access-to-initial-values"><i class="fa fa-check"></i><b>4.2.6</b> Get access to initial values</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>htmltools</b></span></li>
<li class="chapter" data-level="5" data-path="htmltools-overview.html"><a href="htmltools-overview.html"><i class="fa fa-check"></i><b>5</b> htmltools overview</a><ul>
<li class="chapter" data-level="5.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#html-tags"><i class="fa fa-check"></i><b>5.1</b> HTML Tags</a></li>
<li class="chapter" data-level="5.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#notations"><i class="fa fa-check"></i><b>5.2</b> Notations</a></li>
<li class="chapter" data-level="5.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#adding-new-tags"><i class="fa fa-check"></i><b>5.3</b> Adding new tags</a></li>
<li class="chapter" data-level="5.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#alternative-way-to-write-tags"><i class="fa fa-check"></i><b>5.4</b> Alternative way to write tags</a></li>
<li class="chapter" data-level="5.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#playing-with-tags"><i class="fa fa-check"></i><b>5.5</b> Playing with tags</a><ul>
<li class="chapter" data-level="5.5.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#tags-structure"><i class="fa fa-check"></i><b>5.5.1</b> Tags structure</a></li>
<li class="chapter" data-level="5.5.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#useful-functions-for-tags"><i class="fa fa-check"></i><b>5.5.2</b> Useful functions for tags</a></li>
<li class="chapter" data-level="5.5.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#other-interesting-functions"><i class="fa fa-check"></i><b>5.5.3</b> Other interesting functions</a></li>
<li class="chapter" data-level="5.5.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#conditionally-set-attributes"><i class="fa fa-check"></i><b>5.5.4</b> Conditionally set attributes</a></li>
<li class="chapter" data-level="5.5.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#using"><i class="fa fa-check"></i><b>5.5.5</b> Using %&gt;%</a></li>
<li class="chapter" data-level="5.5.6" data-path="htmltools-overview.html"><a href="htmltools-overview.html#programmatically-create-children-elements"><i class="fa fa-check"></i><b>5.5.6</b> Programmatically create children elements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html"><i class="fa fa-check"></i><b>6</b> Dependency utilities</a><ul>
<li class="chapter" data-level="6.1" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-dirty-approach"><i class="fa fa-check"></i><b>6.1</b> The dirty approach</a></li>
<li class="chapter" data-level="6.2" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-clean-approach"><i class="fa fa-check"></i><b>6.2</b> The clean approach</a></li>
<li class="chapter" data-level="6.3" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#another-example-importing-html-dependencies-from-other-packages"><i class="fa fa-check"></i><b>6.3</b> Another example: Importing HTML dependencies from other packages</a></li>
<li class="chapter" data-level="6.4" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#suppress-dependencies"><i class="fa fa-check"></i><b>6.4</b> Suppress dependencies</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html"><i class="fa fa-check"></i><b>7</b> Other tools</a><ul>
<li class="chapter" data-level="7.1" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html#css"><i class="fa fa-check"></i><b>7.1</b> CSS</a></li>
</ul></li>
<li class="part"><span><b>Practice</b></span></li>
<li class="chapter" data-level="8" data-path="custom-templates-selection.html"><a href="custom-templates-selection.html"><i class="fa fa-check"></i><b>8</b> Template selection</a></li>
<li class="chapter" data-level="9" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html"><i class="fa fa-check"></i><b>9</b> Define dependencies</a></li>
<li class="chapter" data-level="10" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html"><i class="fa fa-check"></i><b>10</b> Template skeleton</a></li>
<li class="chapter" data-level="11" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html"><i class="fa fa-check"></i><b>11</b> Develop custom input widgets</a><ul>
<li class="chapter" data-level="11.1" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#how-does-shiny-handle-inputs"><i class="fa fa-check"></i><b>11.1</b> How does Shiny handle inputs?</a></li>
<li class="chapter" data-level="11.2" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#how-to-add-new-input-to-shiny"><i class="fa fa-check"></i><b>11.2</b> How to add new input to Shiny?</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html"><i class="fa fa-check"></i><b>12</b> Testing templates elements</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Outstanding User Interfaces with Shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="survival-kit-javascript" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> JavaScript</h1>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">3.1</span> Introduction</h2>
<p>JavaScript (JS) was created in 1995 by Brendan Eich and also known as ECMAScript (ES). Interestingly, you might have heard about ActionScript, which is no more than an implementation of ES by Adobe Systems. Nowadays, JavaScript is a centerpiece of the web and included in almost all websites.</p>
<p>Let’s make a little experiment. If you have a personal blog (it is very popular in the RStats community) you probably know Hugo or Jekyll. These tools allow to quickly setup professionnal looking (or at least not too ugly) blogs in literraly few minutes. You can focus on the content and this is what matters! Now, if you open the HTML inspector introduced in Chapter <a href="survival-kit-html.html#survival-kit-html">2</a>, click on the elements tab (in theory it is the first tab and open by default), and uncollapse the <code>&lt;head&gt;</code> tag, you see that a lot of scripts are included, as shown in Figure <a href="survival-kit-javascript.html#fig:scripts-list">3.1</a>. Same remark in the <code>&lt;body&gt;</code> tag.</p>
<div class="figure"><span id="fig:scripts-list"></span>
<img src="images/survival-kit/scripts-list.png" alt="A website is full of JavaScript" width="1255" />
<p class="caption">
Figure 3.1: A website is full of JavaScript
</p>
</div>
<p>There are 2 ways to include scripts:</p>
<ul>
<li>Use the <code>&lt;script&gt;</code> tag with the JS code inside</li>
<li>Import an external file containing the JS code and only</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="co">// JS code here</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="kw">&lt;/script&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co">&lt;!-- We use the src attribute to link the external file --&gt;</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;file.js&quot;</span><span class="kw">&gt;</span></a></code></pre></div>
<p>Whether to choose the first or second method depends on the content of your script. If we consider jQuery, a well known JS library, it contains so much lines of code that it does not make sense to select the first method.</p>
</div>
<div id="setup" class="section level2">
<h2><span class="header-section-number">3.2</span> Setup</h2>
<p>Like R or Python, JavaScript is an interpreted language. It is also executed client side, that is in the navigator. It also means that you cannot run js code without suitable tools.</p>
<div id="node" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Node</h3>
<p><a href="https://nodejs.org/en/">Node</a> contains an interpreter for JS as well as a dependencies manager, npm (Node Package Manager). To install Node on your computer, browse to the website and follow the intruction. Once done, open a terminal and check if</p>
<pre><code>$ which node
$ node --version</code></pre>
<p>returns something. If not, it means that Node is not properly installed.</p>
</div>
<div id="choose-a-good-ide" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Choose a good IDE</h3>
<p>I really like <a href="https://code.visualstudio.com">VSCode</a> for all the JS things since it contains a Node interpreter and you can seamlessly execute any JS code (the truth is because I’m a big fan of the dracula color theme). But the <a href="https://rstudio.com/products/rstudio/">Rstudio IDE</a> may also be fine, provided that you have Node installed. Below, we will see how to run a JS code in both IDE.</p>
</div>
<div id="first-script" class="section level3">
<h3><span class="header-section-number">3.2.3</span> First Script</h3>
<p>Let’s write our first script:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;Hello World&quot;</span>)<span class="op">;</span></a></code></pre></div>
<p>You notice that all instruction end by <code>;</code>. You can run this script either in Rstudio IDE or VSCode.</p>
<div class="figure"><span id="fig:script-vscode"></span>
<img src="images/survival-kit/script-vscode.png" alt="Run JS in VSCode" width="1066" />
<p class="caption">
Figure 3.2: Run JS in VSCode
</p>
</div>
<p>In VSCode, clicking on the run arrow (top center) of Figure <a href="survival-kit-javascript.html#fig:script-vscode">3.2</a>,
triggers the <code>node hello.js</code> command, which tells Node to run my script. We see the result in the right panel (code=0 means the execution is fine and we even have the compute time). To run this script in the RStudio IDE, you need to click on the terminal tab (you could also open a basic terminal) and type <code>node hello.js</code> (or <code>node mycustompath/hello.js</code> if you are not in the folder containing the script). You should see the Hello World message in the console (see Figure <a href="survival-kit-javascript.html#fig:script-rstudio">3.3</a>).</p>
<div class="figure"><span id="fig:script-rstudio"></span>
<img src="images/survival-kit/script-rstudio.png" alt="Run JS in a terminal" width="963" />
<p class="caption">
Figure 3.3: Run JS in a terminal
</p>
</div>
</div>
</div>
<div id="programming-with-js-basis" class="section level2">
<h2><span class="header-section-number">3.3</span> Programming with JS: basis</h2>
<p>We are now all set to introduce the basis of JS. As many languages, JS is made of variables and instructions (We saw above that instructions end by <code>;</code>).</p>
<div id="js-types" class="section level3">
<h3><span class="header-section-number">3.3.1</span> JS types</h3>
<p>JS defines several types:</p>
<ul>
<li>Number: does not distinguish between integers and others (in R for instance, numeric contains integers and double)</li>
<li>String: characters (‘blabla’)</li>
<li>Boolean: true/false</li>
</ul>
<p>To check the type of an element, we may use the <code>typeof</code> operator (this is not a function like the <code>typeof</code> function in R).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">typeof</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// number</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="kw">typeof</span> <span class="st">&#39;pouic&#39;</span><span class="op">;</span> <span class="co">// string</span></a></code></pre></div>
</div>
<div id="variables" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Variables</h3>
<p>A variable is defined by:</p>
<ul>
<li>a type</li>
<li>a name</li>
<li>a value</li>
</ul>
<br>
<div class="callout callout-danger">
Valid variable names:
<ul>
<li>
don’t use an existing name like typeof
</li>
<li>
son’t start with a number (123)
</li>
<li>
don’t include any space (total price)
</li>
</ul>
</div>
<p><br></p>
<p>Based on the above forbidden items, you can use the camelCase syntax to write your variables in JS. To set a variable we use <code>let</code> (there exists <code>var</code> but this is not the latest JS norm (ES6). You will see later that we still use <code>var</code> in the shiny core and many other R packages):</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">let</span> myVariable <span class="op">=</span> <span class="st">&#39;welcome&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="va">console</span>.<span class="at">log</span>(myVariable)<span class="op">;</span></a></code></pre></div>
<p>Then we can use all mathematical operators to manipulate a variable.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">let</span> myNumber <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// affectation</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2">myNumber<span class="op">--;</span> <span class="co">// decrement</span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="va">console</span>.<span class="at">log</span>(myNumber)<span class="op">;</span> <span class="co">// print 0</span></a></code></pre></div>
<br>
<div class="callout callout-info">
List of numerical operators in JS:
<ul>
<li>
+
</li>
<li>
-
</li>
<li>
*
</li>
<li>
/
</li>
<li>
% (modulo)
</li>
<li>
++ (incrementation)
</li>
<li>
– (decrementation)
</li>
</ul>
</div>
<p><br></p>
<p>To concatenate 2 strings, use <code>+</code>.</p>
</div>
<div id="conditions" class="section level3">
<h3><span class="header-section-number">3.3.3</span> Conditions</h3>
<p>Below are the operators to check conditions.</p>
<br>
<div class="callout callout-info">
<ul>
<li>
== (A equal B)
</li>
<li>
!= (A not equal to B)
</li>
<li>
<blockquote>
(&gt;=)
</li>
<li>
&lt; (&lt;=)
</li>
<li>
AND (A AND B)
</li>
<li>
OR (A OR B)
</li>
</ul>
</div>
<p><br></p>
</blockquote>
<p>To test conditions there exists several ways:</p>
<ul>
<li><code>if (condition) { console.log('Test passed'); }</code></li>
<li><code>if (condition) { instruction A} else { instruction B }</code></li>
</ul>
<p>This is very common to other languages (and R for instance). Whenever a lot of possible conditions need to be evaluated, it is better to choose the <code>switch</code>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="cf">switch</span> (variable) <span class="op">{</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">  <span class="cf">case</span> <span class="dt">val1</span><span class="op">:</span> <span class="co">// instruction 1</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3">  <span class="cf">break</span><span class="op">;</span> <span class="co">// don&#39;t forget the break!</span></a>
<a class="sourceLine" id="cb27-4" data-line-number="4">  <span class="cf">case</span> <span class="dt">val2</span><span class="op">:</span>  <span class="co">// instruction 2</span></a>
<a class="sourceLine" id="cb27-5" data-line-number="5">  <span class="cf">break</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-6" data-line-number="6">  <span class="dt">default</span><span class="op">:</span> <span class="co">// when none of val1 and val2 are satisfied</span></a>
<a class="sourceLine" id="cb27-7" data-line-number="7"><span class="op">}</span></a></code></pre></div>
</div>
<div id="iterations" class="section level3">
<h3><span class="header-section-number">3.3.4</span> Iterations</h3>
<p>Iterations allow to repeat an instruction or a set of instructions multiple times.</p>
<div id="for-loops" class="section level4">
<h4><span class="header-section-number">3.3.4.1</span> For loops</h4>
<p>The for loop has multiple ways to be used. Below is the most classic. We start by defining the index (variable). We then set an upper bound and we finish by incrementing the index value. We execute the instruction between curly braces.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">const</span> max <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> <span class="co">// we never mentionned constants before. This is the way to call them</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;=</span> max<span class="op">;</span> i<span class="op">++</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb28-3" data-line-number="3">  <span class="va">console</span>.<span class="at">log</span>(i)<span class="op">;</span> <span class="co">// this will print i 10 times</span></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="op">}</span></a></code></pre></div>
<br>
<div class="callout callout-danger">
<p>Contrary to R, JavaScript index starts from 0 (not from 1)! This is good to keep in mind when we will mix both R and JS.</p>
</div>
<p><br></p>
<p>Below is another way to create a for loop:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw">let</span> samples <span class="op">=</span> [<span class="st">&#39;blabla&#39;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="kw">null</span>]<span class="op">;</span> <span class="co">// this is an array!</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="cf">for</span> (<span class="kw">let</span> sample of samples) <span class="op">{</span></a>
<a class="sourceLine" id="cb29-3" data-line-number="3"> <span class="va">console</span>.<span class="at">log</span>(sample)<span class="op">;</span></a>
<a class="sourceLine" id="cb29-4" data-line-number="4"><span class="op">}</span></a></code></pre></div>
<p>What is the best <code>for</code> loop? The answer is: it depends on the situation! Actually, there even exists other ways (replace of by in and you get the indexes of the array, like the with the first code, but this is really <a href="https://hacks.mozilla.org/2015/04/es6-in-depth-iterators-and-the-for-of-loop/">not recommended</a>).</p>
</div>
<div id="other-iterations-while-do-while" class="section level4">
<h4><span class="header-section-number">3.3.4.2</span> Other iterations: while, do while</h4>
<p>We will clearly never use them in this book but this is good to know.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw">const</span> h <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="cf">while</span> (i <span class="op">&lt;=</span> h) <span class="op">{</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3">  <span class="va">console</span>.<span class="at">log</span>(i)<span class="op">;</span></a>
<a class="sourceLine" id="cb30-4" data-line-number="4">  i<span class="op">++;</span> <span class="co">// we need to increment to avoid infinite loop</span></a>
<a class="sourceLine" id="cb30-5" data-line-number="5"><span class="op">}</span></a></code></pre></div>
</div>
</div>
<div id="objects" class="section level3">
<h3><span class="header-section-number">3.3.5</span> Objects</h3>
<p>JavaScript is an object oriented programming language (like Python). An object is defined by:</p>
<ul>
<li>a type</li>
<li>some properties</li>
<li>some methods (to manipulate properties)</li>
</ul>
<p>Let’s define our first object below:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">const</span> me <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2">  <span class="dt">name </span><span class="op">:</span> <span class="st">&#39;Divad&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3">  <span class="dt">age </span><span class="op">:</span> <span class="dv">29</span><span class="op">,</span></a>
<a class="sourceLine" id="cb31-4" data-line-number="4">  <span class="dt">music </span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb31-5" data-line-number="5">  <span class="dt">printName</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb31-6" data-line-number="6">    <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`I am </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">name</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-7" data-line-number="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb31-8" data-line-number="8"><span class="op">}</span></a>
<a class="sourceLine" id="cb31-9" data-line-number="9"></a>
<a class="sourceLine" id="cb31-10" data-line-number="10"><span class="va">console</span>.<span class="at">log</span>(<span class="va">JSON</span>.<span class="at">stringify</span>(me))<span class="op">;</span> <span class="co">// print a human readable object.</span></a>
<a class="sourceLine" id="cb31-11" data-line-number="11">  </a>
<a class="sourceLine" id="cb31-12" data-line-number="12"><span class="va">console</span>.<span class="at">log</span>(<span class="va">me</span>.<span class="at">name</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-13" data-line-number="13"><span class="va">console</span>.<span class="at">log</span>(<span class="va">me</span>.<span class="at">age</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-14" data-line-number="14"><span class="va">console</span>.<span class="at">log</span>(<span class="va">me</span>.<span class="at">music</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-15" data-line-number="15"><span class="co">// don&#39;t repeat yourself!!!</span></a>
<a class="sourceLine" id="cb31-16" data-line-number="16"><span class="cf">for</span> (<span class="kw">let</span> key <span class="kw">in</span> me) <span class="op">{</span> <span class="co">// here is it ok to use `in`</span></a>
<a class="sourceLine" id="cb31-17" data-line-number="17"> <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`me[</span><span class="sc">${</span>key<span class="sc">}</span><span class="vs">] is </span><span class="sc">${</span>me[key]<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-18" data-line-number="18"><span class="op">}</span></a>
<a class="sourceLine" id="cb31-19" data-line-number="19"></a>
<a class="sourceLine" id="cb31-20" data-line-number="20"><span class="va">me</span>.<span class="at">printName</span>()<span class="op">;</span></a></code></pre></div>
<p>Some comments on the above code:</p>
<ul>
<li>to access an object propertie, we use <code>object.propertie</code></li>
<li>to print a human readable version of the object <code>JSON.stringify</code> will do the job</li>
<li>we introduced string interpolation with <code>${*}</code>. <code>*</code> may be any valid expression.</li>
<li>methods are accessed like properties (we may also pass parameters). We use <code>this</code> to refer to the object itself. Take note, we will see it a lot!</li>
</ul>
<p>In JavaScript, we can find already predefined objects to interact with arrays, dates.</p>
<div id="arrays" class="section level4">
<h4><span class="header-section-number">3.3.5.1</span> Arrays</h4>
<p>An array is a structure allowing to store informations for instance</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">let</span> table <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="st">&#39;plop&#39;</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="va">console</span>.<span class="at">log</span>(table)<span class="op">;</span></a></code></pre></div>
<p>Array may be nested</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">let</span> nested <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> [<span class="st">&#39;a&#39;</span><span class="op">,</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]]<span class="op">,</span> <span class="st">&#39;plop&#39;</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="va">console</span>.<span class="at">log</span>(nested)<span class="op">;</span></a></code></pre></div>
<p>In arrays, elements may be accessed by their index, but as mentionned before, the first index is 0 (not 1 like in R). A convenient way to print all arrays’s elements is to use an iteration:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw">let</span> nested <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> [<span class="st">&#39;a&#39;</span><span class="op">,</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]]<span class="op">,</span> <span class="st">&#39;plop&#39;</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="cf">for</span> (<span class="kw">let</span> i of nested) <span class="op">{</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3">  <span class="va">console</span>.<span class="at">log</span>(i)<span class="op">;</span></a>
<a class="sourceLine" id="cb34-4" data-line-number="4"><span class="op">}</span></a>
<a class="sourceLine" id="cb34-5" data-line-number="5"></a>
<a class="sourceLine" id="cb34-6" data-line-number="6"><span class="co">// or with the classic approach</span></a>
<a class="sourceLine" id="cb34-7" data-line-number="7"><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">nested</span>.<span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb34-8" data-line-number="8">  <span class="va">console</span>.<span class="at">log</span>(nested[i])<span class="op">;</span></a>
<a class="sourceLine" id="cb34-9" data-line-number="9"><span class="op">}</span></a></code></pre></div>
<p>Note that the <code>length</code> method returns the size of an array and is very convenient in for loops. Below is a table referencing the principal methods for arrays (we will use some of them later)</p>
<table>
<thead>
<tr class="header">
<th align="center">Method/Property</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">length</td>
<td align="center">Return the number of elements in an array</td>
</tr>
<tr class="even">
<td align="center">Join(string separator)</td>
<td align="center">Transform an array in a string</td>
</tr>
<tr class="odd">
<td align="center">concat(array1, array2)</td>
<td align="center">Assemble 2 arrays</td>
</tr>
<tr class="even">
<td align="center">pop()</td>
<td align="center">Remove the last element of an array</td>
</tr>
<tr class="odd">
<td align="center">shift()</td>
<td align="center">Remove the first element of an array</td>
</tr>
<tr class="even">
<td align="center">unshift(el1, el2, …)</td>
<td align="center">Insert elements at the beginning of an array</td>
</tr>
<tr class="odd">
<td align="center">push(el1, el2, …)</td>
<td align="center">Add extra elements at the end of an array</td>
</tr>
<tr class="even">
<td align="center">sort()</td>
<td align="center">Sort array elements by increasing value of alphabetical order</td>
</tr>
<tr class="odd">
<td align="center">reverse()</td>
<td align="center">Symetric of sort()</td>
</tr>
</tbody>
</table>
<p>Quite honestly, we will only use <code>push</code> and <code>length</code> in the next chapters.</p>
</div>
<div id="strings" class="section level4">
<h4><span class="header-section-number">3.3.5.2</span> Strings</h4>
<p>Below are the main methods related to the String object (character in R)</p>
<table>
<thead>
<tr class="header">
<th align="center">Method/Property/Operator</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">+ (operator)</td>
<td align="center">String concatenation</td>
</tr>
<tr class="even">
<td align="center">length</td>
<td align="center">String length</td>
</tr>
<tr class="odd">
<td align="center">indexOf()</td>
<td align="center">Gives the position of the character following the input string</td>
</tr>
<tr class="even">
<td align="center">toLowerCase()</td>
<td align="center">Put the string in small letters</td>
</tr>
<tr class="odd">
<td align="center">toUpperCase()</td>
<td align="center">Put the string in capital letters</td>
</tr>
</tbody>
</table>
</div>
<div id="math" class="section level4">
<h4><span class="header-section-number">3.3.5.3</span> Math</h4>
<p>Below we mention some useful methods to handle mathematical objects</p>
<table>
<thead>
<tr class="header">
<th align="center">Method</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">parseInt()</td>
<td align="center">Convert a string to integer</td>
</tr>
<tr class="even">
<td align="center">parseFloat()</td>
<td align="center">Conversion to floating number</td>
</tr>
</tbody>
</table>
<p>All classic functions like <code>sqrt</code>, trigonometric functions are of course available. We call them with the <code>Math.*</code> prefix.</p>
</div>
</div>
<div id="functions" class="section level3">
<h3><span class="header-section-number">3.3.6</span> Functions</h3>
<p>Functions are useful to wrap a succession of instructions to accomplish a given task. Defining functions allows programmers to save time (less copy and paste, less search and replace), do less errors and share code more easily. In modern JavaScript (ES6), functions are defined as follows:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="kw">const</span> a <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="kw">const</span> fun <span class="op">=</span> (parm1<span class="op">,</span> parm2) <span class="op">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3">  <span class="va">console</span>.<span class="at">log</span>(a)<span class="op">;</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4">  <span class="kw">let</span> p <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></a>
<a class="sourceLine" id="cb35-5" data-line-number="5">  <span class="cf">return</span> <span class="va">Math</span>.<span class="at">max</span>(parm1<span class="op">,</span> parm2)<span class="op">;</span> <span class="co">// I use the Math object that contains the max method</span></a>
<a class="sourceLine" id="cb35-6" data-line-number="6"><span class="op">}</span></a>
<a class="sourceLine" id="cb35-7" data-line-number="7"><span class="kw">let</span> res <span class="op">=</span> <span class="at">fun</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb35-8" data-line-number="8"><span class="va">console</span>.<span class="at">log</span>(res)<span class="op">;</span> <span class="co">// prints a and 2. a global</span></a>
<a class="sourceLine" id="cb35-9" data-line-number="9"><span class="va">console</span>.<span class="at">log</span>(p)<span class="op">;</span> <span class="co">// fails because p was defined inside the function</span></a></code></pre></div>
<p>This functions computes the maximum of 2 provided numbers. Some comments about scoping rules: variables defined inside the function are available for the function but not outside. The function may use global variables defined outside of it.</p>
<div id="export-functions-about-modules" class="section level4">
<h4><span class="header-section-number">3.3.6.1</span> Export functions: about modules</h4>
<p>What happens if you wrote 100 functions and you would like to reuse some of them in different scripts? To prevent copy and pasting, we will introduce modules. Let’s save the below function in a script <code>utils.js</code>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="kw">const</span> findMax <span class="op">=</span> (parm1<span class="op">,</span> parm2) <span class="op">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2">  <span class="cf">return</span> <span class="va">Math</span>.<span class="at">max</span>(parm1<span class="op">,</span> parm2)<span class="op">;</span> <span class="co">// I use the Math object that contains the max method</span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb36-4" data-line-number="4"></a>
<a class="sourceLine" id="cb36-5" data-line-number="5"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb36-6" data-line-number="6">  findMax <span class="op">=</span> findMax</a>
<a class="sourceLine" id="cb36-7" data-line-number="7"><span class="op">}</span></a></code></pre></div>
<p>Now, if we create a <code>test.js</code> script in the same folder and want to use <code>findMax</code>, we need to import the corresponding module:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw">const</span> <span class="op">{</span>findMax<span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./utils.js&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="at">findMax</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span> <span class="co">// prints 2</span></a></code></pre></div>
</div>
</div>
</div>
<div id="jquery" class="section level2">
<h2><span class="header-section-number">3.4</span> jQuery</h2>
<div id="introduction-1" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Introduction</h3>
<p><a href="https://jquery.com">jQuery</a> is a famous JavaScript library providing a user friendly interface to manipulate the DOM and is present in almost all actual websites. It is slighly easier (understand more convenient to use) than vanilla JS, even though web developers tend to avoid it to go back to vanilla JS (Bootstrap 5, the next iteration of Bootstrap will not rely on jQuery anymore). To use jQuery in a webpage, we must include its code either by dowloading the code and putting the minified JS file in our HTML or setting a link to a CDN.</p>
</div>
<div id="syntax" class="section level3">
<h3><span class="header-section-number">3.4.2</span> Syntax</h3>
<p>Below is a minimal jQuery code representing its philosophy (“write less, do more.”):</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="at">$</span>(selector).<span class="at">action</span>()<span class="op">;</span></a></code></pre></div>
<p>The selector slot stands for any jQuery selector like class, id, element, [attribute], :input (will select all input elements) and many <a href="https://www.w3schools.com/jquery/jquery_ref_selectors.asp">more</a>. As a reminder, let’s consider the following example:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="kw">&lt;p</span><span class="ot"> class=</span><span class="st">&quot;text&quot;</span><span class="kw">&gt;</span>Hello World<span class="kw">&lt;/p&gt;</span></a></code></pre></div>
<p>To select and interact with this element, we use JavaScript and jQuery:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="kw">let</span> inner <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementsByClassName</span>(<span class="st">&#39;text&#39;</span>).<span class="at">innerHTML</span><span class="op">;</span> <span class="co">// vanilla JS</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="kw">let</span> inner <span class="op">=</span> <span class="at">$</span>(<span class="st">&#39;.text&#39;</span>).<span class="at">html</span>()<span class="op">;</span> <span class="co">// jQuery</span></a></code></pre></div>
<p>jQuery is obviously simpler than pure JavaScript.</p>
</div>
<div id="useful-functions" class="section level3">
<h3><span class="header-section-number">3.4.3</span> Useful functions</h3>
<p>TO DO: add more examples of useful function we (may) use later</p>
</div>
</div>
<div id="event-listeners" class="section level2">
<h2><span class="header-section-number">3.5</span> Event listeners</h2>
<p>TO TO: this will be needed in the following part</p>
<p>In the next chapters, we will see that some of the underlying JS code to build custom shiny inputs share the same utils functions. Therefore, introducing modules is necessary.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="survival-kit-html.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="survival-kit-shiny.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/survival-kit-javascript.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["outstanding-shiny-ui.pdf", "outstanding-shiny-ui.epub", "outstanding-shiny-ui.mobi"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
