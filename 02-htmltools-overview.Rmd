# Overview of {htmltools} {#htmltools-overview}

### HTML Tags
Both shiny and htmltools contain tags. However, by experience, htmltools contains more exported tags than shiny.
For instance, the HTML `<nav></nav>` tag, namely `tags$nav()` in R is not included in the shiny package but 
in htmltools. 

Within your package code, your tags will be like:

```r
# we use htmltools tags instead of shiny
htmltools::tags$div(...)
```

If you had to gather multiple tags together, prefer `tagList()` as `list()`, although the HTML output is the same. The first
has the shiny.tag.list class in addition to list.

#### Notations
Whether to use `tags$div` or `div` is the tag is exported by default.
For instance, you could use `htmltools::div` but not `htmltools::nav` since nav does not 
have a dedicated function (only for p, h1, h2, h3, h4, h5, h6, a, br, div, span, pre, code, img, strong, em, hr). 
Rather use `htmltools::tags$nav`. Alternatively, there exists a function (in shiny and htmltools) 
called `withTags()`. Wrapping your code in this function enables you to use `withTags(nav(), ...)` 
instead of `tags$nav()`.


#### Alternative way to write tags
htmltools and shiny come with the `HTML()` function that you can feed with raw HTML:

```r
HTML('<div>Blabla</div>')
# will render exactly like
div("Blabla")

# but there class is different
class(HTML('<div>Blabla</div>'))
class(div("Blabla"))
```

You will not be able to use tag related functions, as in the following parts.
Therefore, I strongly recommand using R and not mixing HTML in R.

#### Tags structure
According to the htmltools `tag()` function, a tag has:
- a name such as span, div, h1 ...
- attributes, which you can access with `tag$attribs`
- children, which you can access with `tag$children`
- a class, namely "shiny.tag"

For instance:

```r
# create the tag
myTag <- div(
  class = "divclass", 
  id = "first",
  h1("Here comes your baby"),
  span(class = "child", id = "baby", "Ouinnnnn")
)

# access its name
myTag$name

# access its attributes (id and class)
myTag$attribs

# access children (returns a list of 2 elements)
myTag$children

```

How to modify the class of the second child?

```r
second_children <- myTag$children[[2]]
second_children$attribs$class <- "adult"
myTag

# Hummm, this is not working ...
```

The code above is wrong. Indeed, by assigning `myTag$children[[2]]` to second_children,
`second_children$attribs$class <- "adult"` modifies the class of the copy and not the
original object. Only one way:

```r
myTag$children[[2]]$attribs$class <- "adult"
myTag
```

For strongly nested tags, you will see that the following section contains amazing functions,
such as `tagAppenChild()`.


#### Useful functions for Tags
htmltools and shiny have powerful functions to easily add attributes to tags, check for 
existing attributes, get attributes and add other tags to a list of tags.

- `tagAppendAttributes()`: this function allow you to add a new attribute to the current tag.
For instance, assuming you created a div for which you forgot to add and id attribute:

```r
mydiv <- div("Where is my brain")
mydiv <- tagAppendAttributes(mydiv, id = "here_it_is")
```

You can pass as many attributes as you want, including non standard attributes such as 
`data-toggle` (see Bootstrap 3 tabs for instance):

```r
mydiv <- tagAppendAttributes(mydiv, `data-toggle` = "tabs")
# even though you could proceed as follows
mydiv$attribs[["aria-controls"]] <- "home"
```

- `tagHasAttribute()`: to check if a tag has a specific attribute

```r
# I want to know if div has a class
mydiv <- div(class = "myclass")
has_class <- tagHasAttribute(mydiv, "class")
has_class

# if you are familiar with %>%
has_class <- mydiv %>% tagHasAttribute("class")
has_class
```
 
- `tagGetAttribute()`: to get the value of the targeted attributes, if it exists, otherwise NULL.

```r
mydiv <- div(class = "test")
# returns the class
tagGetAttribute(mydiv, "class")
# returns NULL
tagGetAttribute(mydiv, "id")
```

- `tagAppendChild()` and `tagAppendChildren()`: add other tags to an existing tag.
Whereas `tagAppendChild()` only takes on tag, you can pass a list of tags to `tagAppendChildren()`.

```r
mydiv <- div(class = "parent", id = "mother", "Not the mama!!!")
otherTag <- span("I am your child")
mydiv <- tagAppendChild(mydiv, otherTag)
```

You might wonder why there is no `tagRemoveChild()` or `tagRemoveAttributes()`.

#### Other interesting functions
The [brighter](https://github.com/ThinkR-open/brighter) package written by Colin Fay contains
very neat functions to edit your tags. Particularly, the `tagRemoveAttributes()`

```r
remotes::install_github("Thinkr-open/brighter")
library(brighter)
```

```r
mydiv <- div(class = "test", id = "coucou", "Prout")
tagRemoveAttributes(mydiv, "class", "id")
```

Up to you to create new functions to add in this package and do a nice PR.
